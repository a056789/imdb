!function(){function t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],a=!0,i=!1,r=void 0;try{for(var o,c=t[Symbol.iterator]();!(a=(o=c.next()).done)&&(n.push(o.value),!e||n.length!==e);a=!0);}catch(s){i=!0,r=s}finally{try{a||null==c.return||c.return()}finally{if(i)throw r}}return n}(t,e)||n(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||n(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function c(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[1,3],{"/5ox":function(t,n,a){"use strict";a.r(n),a.d(n,"CrupdateTitleModule",(function(){return Je}));var o=a("ofXK"),s=a("tyNb"),l=a("mrSG"),b=a("AcyG"),u=a("cIkh"),d=a("M/Pu"),p=a("2Vo4"),f=a("fXoL"),g=a("Rd8u"),h=a("FBzJ"),m=a("3Pt+"),v=a("h586"),y=a("Lm4C"),V=a("QeDF"),x=a("pLZG"),k=a("IzEk"),C=a("nYR2"),W=a("r2Ys"),w=a("kmQS"),D=a("7tLl"),O=a("i2dy"),I=a("l9qf"),P=a("bTqV"),L=a("Qu3c"),R=a("NFeN"),_=a("ihCf"),S=a("zW5C");function M(t,e){if(1&t&&(f.Wb(0,"option",42),f.Lc(1),f.Vb()),2&t){var n=e.$implicit;f.pc("ngValue",n),f.Db(1),f.Mc(n)}}function $(t,e){if(1&t&&(f.Wb(0,"option",43),f.Lc(1),f.Vb()),2&t){var n=e.$implicit;f.pc("value",n.code),f.Db(1),f.Mc(n.name)}}var j,T=((j=function(){function t(e,n,a,i,o,c,s,l){r(this,t),this.store=e,this.fb=n,this.route=a,this.uploadQueue=i,this.settings=o,this.router=c,this.titles=s,this.toast=l,this.poster$=new p.a(null),this.form=this.fb.group({name:["",[m.I.required,m.I.minLength(1)]],is_series:[!1,[m.I.required]],language:[""],tagline:["",[m.I.minLength(1),m.I.maxLength(250)]],poster:["",[m.I.minLength(1),m.I.maxLength(250)]],backdrop:["",[m.I.minLength(1),m.I.maxLength(250)]],description:["",[m.I.minLength(1)]],budget:["",m.I.min(1)],revenue:["",m.I.min(1)],runtime:["",[m.I.min(1),m.I.max(300)]],country:["",[m.I.minLength(1),m.I.maxLength(50)]],popularity:[1,[m.I.min(1),m.I.max(100)]],certification:["pg"],release_date:[""],allow_update:[!0]}),this.certificationOptions=this.settings.getJson("browse.ageRatings")}return c(t,[{key:"ngOnInit",value:function(){var t=this;this.store.dispatch(new u.q),this.store.select(d.a.title).pipe(Object(x.a)((function(t){return!!t.id})),Object(k.a)(1)).subscribe((function(e){t.form.patchValue(Object.assign(Object.assign({},e),{release_date:e.release_date?e.release_date.split("T")[0]:null})),t.poster$.next(e.poster)})),this.form.get("poster").valueChanges.subscribe((function(e){t.poster$.next(e)}))}},{key:"uploadImage",value:function(t){var e=this;Object(y.a)({types:[V.a.image]}).then((function(n){e.uploadQueue.start(n,{uri:"uploads/images",httpParams:{diskPrefix:"media-images/".concat(t,"s")}}).subscribe((function(n){e.form.patchValue(i({},t,n.fileEntry.url))}))}))}},{key:"submit",value:function(){var t=this;this.store.dispatch(new u.t(!0));var e=this.store.selectSnapshot(d.a.title).id;(e?this.titles.update(e,this.form.value):this.titles.create(this.form.value)).pipe(Object(C.a)((function(){return t.store.dispatch(new u.t(!1))}))).subscribe((function(n){t.toast.open(e?W.a.TITLE_UPDATE_SUCCESS:W.a.TITLE_CREATE_SUCCESS),t.router.navigate(e?[t.router.url.includes("admin")?"/admin/titles":t.router.url.split("?")[0].replace("/edit","")]:[t.router.url.replace("new",""+n.title.id),"edit"])}))}}]),t}()).\u0275fac=function(t){return new(t||j)(f.Qb(b.g),f.Qb(m.h),f.Qb(s.a),f.Qb(v.a),f.Qb(w.a),f.Qb(s.d),f.Qb(D.a),f.Qb(O.b))},j.\u0275cmp=f.Kb({type:j,selectors:[["primary-facts-panel"]],features:[f.Cb([v.a])],decls:88,vars:21,consts:[[3,"formGroup","ngSubmit"],[1,"poster-container"],[3,"src"],[1,"many-inputs"],[1,"input-container"],["for","name","trans",""],["type","text","formControlName","name","id","name","minlength","1","maxlength","250","required",""],[1,"inline-container"],["for","type","trans",""],["formControlName","is_series","id","type","required",""],["trans","",3,"ngValue"],["for","allow_update","trans",""],["formControlName","allow_update","id","allow_update","required",""],["for","poster","trans",""],[1,"input-with-action","action-left"],["type","button","mat-flat-button","","color","accent",3,"matTooltip","click"],["svgIcon","file-upload"],["type","text","formControlName","poster","id","poster","minlength","1","maxlength","250"],["for","backdrop","trans",""],["type","text","formControlName","backdrop","id","backdrop","minlength","1","maxlength","250"],["for","release_date","trans",""],["type","date","formControlName","release_date","id","release_date","placeholder","YYYY-MM-DD","required",""],["for","tagline","trans",""],["type","text","formControlName","tagline","id","tagline","minlength","1","maxlength","250"],["for","description","trans",""],["type","text","formControlName","description","id","description","minlength","1","cdkTextareaAutosize","","cdkAutosizeMinRows","6"],["for","runtime","trans",""],["type","number","formControlName","runtime","id","runtime","min","1","max","500"],[1,"input-container","certification-input-container"],["for","certification","trans",""],["formControlName","certification","id","certification"],[3,"ngValue",4,"ngFor","ngForOf"],["for","budget","trans",""],["type","number","formControlName","budget","id","budget","min","1"],["for","revenue","trans",""],["type","number","formControlName","revenue","id","revenue","min","1"],["for","popularity","trans",""],["type","number","formControlName","popularity","id","popularity","min","1","max","1000"],["for","language","trans",""],["formControlName","language","id","language","required",""],[3,"value",4,"ngFor","ngForOf"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled"],[3,"ngValue"],[3,"value"]],template:function(t,e){1&t&&(f.Wb(0,"form",0),f.dc("ngSubmit",(function(){return e.submit()})),f.Wb(1,"div",1),f.Rb(2,"media-image",2),f.ic(3,"async"),f.Wb(4,"div",3),f.Wb(5,"div",4),f.Wb(6,"label",5),f.Lc(7,"Title"),f.Vb(),f.Rb(8,"input",6),f.Vb(),f.Wb(9,"div",7),f.Wb(10,"div",4),f.Wb(11,"label",8),f.Lc(12,"Type"),f.Vb(),f.Wb(13,"select",9),f.Wb(14,"option",10),f.Lc(15,"Movie"),f.Vb(),f.Wb(16,"option",10),f.Lc(17,"TV Series"),f.Vb(),f.Vb(),f.Vb(),f.Wb(18,"div",4),f.Wb(19,"label",11),f.Lc(20,"Allow Auto Update"),f.Vb(),f.Wb(21,"select",12),f.Wb(22,"option",10),f.Lc(23,"Yes"),f.Vb(),f.Wb(24,"option",10),f.Lc(25,"No"),f.Vb(),f.Vb(),f.Vb(),f.Vb(),f.Wb(26,"div",4),f.Wb(27,"label",13),f.Lc(28,"Poster"),f.Vb(),f.Wb(29,"div",14),f.Wb(30,"button",15),f.dc("click",(function(){return e.uploadImage("poster")})),f.ic(31,"trans"),f.Rb(32,"mat-icon",16),f.Vb(),f.Rb(33,"input",17),f.Vb(),f.Vb(),f.Wb(34,"div",4),f.Wb(35,"label",18),f.Lc(36,"Backdrop"),f.Vb(),f.Wb(37,"div",14),f.Wb(38,"button",15),f.dc("click",(function(){return e.uploadImage("backdrop")})),f.ic(39,"trans"),f.Rb(40,"mat-icon",16),f.Vb(),f.Rb(41,"input",19),f.Vb(),f.Vb(),f.Vb(),f.Vb(),f.Wb(42,"div",7),f.Wb(43,"div",4),f.Wb(44,"label",20),f.Lc(45,"Release Date"),f.Vb(),f.Rb(46,"input",21),f.Vb(),f.Wb(47,"div",4),f.Wb(48,"label",22),f.Lc(49,"Tagline"),f.Vb(),f.Rb(50,"input",23),f.Vb(),f.Vb(),f.Wb(51,"div",4),f.Wb(52,"label",24),f.Lc(53,"Overview"),f.Vb(),f.Rb(54,"textarea",25),f.Vb(),f.Wb(55,"div",7),f.Wb(56,"div",4),f.Wb(57,"label",26),f.Lc(58,"Runtime"),f.Vb(),f.Rb(59,"input",27),f.Vb(),f.Wb(60,"div",28),f.Wb(61,"label",29),f.Lc(62,"Certification"),f.Vb(),f.Wb(63,"select",30),f.Jc(64,M,2,2,"option",31),f.Vb(),f.Vb(),f.Vb(),f.Wb(65,"div",7),f.Wb(66,"div",4),f.Wb(67,"label",32),f.Lc(68,"Budget"),f.Vb(),f.Rb(69,"input",33),f.Vb(),f.Wb(70,"div",4),f.Wb(71,"label",34),f.Lc(72,"Revenue"),f.Vb(),f.Rb(73,"input",35),f.Vb(),f.Vb(),f.Wb(74,"div",7),f.Wb(75,"div",4),f.Wb(76,"label",36),f.Lc(77,"Popularity"),f.Vb(),f.Rb(78,"input",37),f.Vb(),f.Wb(79,"div",4),f.Wb(80,"label",38),f.Lc(81,"Language"),f.Vb(),f.Wb(82,"select",39),f.Jc(83,$,2,2,"option",40),f.ic(84,"async"),f.Vb(),f.Vb(),f.Vb(),f.Wb(85,"button",41),f.ic(86,"async"),f.Lc(87,"Save"),f.Vb(),f.Vb()),2&t&&(f.pc("formGroup",e.form),f.Db(2),f.pc("src",f.jc(3,11,e.poster$)),f.Db(12),f.pc("ngValue",!1),f.Db(2),f.pc("ngValue",!0),f.Db(6),f.pc("ngValue",!0),f.Db(2),f.pc("ngValue",!1),f.Db(6),f.pc("matTooltip",f.jc(31,13,"Upload poster")),f.Db(8),f.pc("matTooltip",f.jc(39,15,"Upload backdrop")),f.Db(26),f.pc("ngForOf",e.certificationOptions),f.Db(19),f.pc("ngForOf",f.jc(84,17,e.languageOptions$)),f.Db(2),f.pc("disabled",f.jc(86,19,e.loading$)))},directives:[m.K,m.v,m.m,I.a,g.a,m.d,m.u,m.k,m.q,m.p,m.F,m.G,m.z,m.J,P.b,L.a,R.a,_.b,m.A,o.s],pipes:[o.b,S.a],styles:["primary-facts-panel{display:block}primary-facts-panel .poster-container{display:flex;margin-bottom:20px}primary-facts-panel .poster-container media-image img{height:350px;width:auto;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12);border-radius:4px}primary-facts-panel .poster-container .many-inputs{margin-left:20px;flex:1 1 auto}primary-facts-panel .poster-container .many-inputs .input-container:last-of-type{margin-bottom:0}primary-facts-panel .certification-input-container option,primary-facts-panel .certification-input-container select{text-transform:uppercase}"],encapsulation:2,changeDetection:0}),Object(l.b)([Object(b.d)(d.a.title)],j.prototype,"title$",void 0),Object(l.b)([Object(b.d)(d.a.loading)],j.prototype,"loading$",void 0),Object(l.b)([Object(b.d)(d.a.languageOptions)],j.prototype,"languageOptions$",void 0),j),E=a("/RwR"),A=a("QGXG"),N=a("7EHt"),F=a("wZkO"),Q=a("0IaG"),J=a("Sx+n"),U=a("JX91"),X=a("lJxs"),z=a("0Ej5"),q=a("VaGr"),K=a("/1cH"),B=a("FKr1");function G(t,e){1&t&&(f.Wb(0,"h2",11),f.Lc(1,"Edit"),f.Vb())}function H(t,e){1&t&&(f.Wb(0,"h2",11),f.Lc(1,"Create"),f.Vb())}function Y(t,e){if(1&t&&(f.Wb(0,"div",12),f.Wb(1,"label",13),f.Lc(2,"Person"),f.Vb(),f.Rb(3,"input",14),f.Vb()),2&t){var n=f.hc();f.Db(3),f.pc("value",null==n.credit?null:n.credit.name)}}function Z(t,e){if(1&t){var n=f.Xb();f.Wb(0,"search-input",15),f.dc("resultSelected",(function(t){return f.Ac(n),f.hc().setCredit(t)})),f.Vb()}if(2&t){var a=f.hc();f.pc("type",a.getPersonType())("resetInputOnSelect",!1)}}function tt(t,e){1&t&&(f.Wb(0,"div",12),f.Wb(1,"label",16),f.Lc(2,"Character"),f.Vb(),f.Rb(3,"input",17),f.Vb())}function et(t,e){if(1&t&&(f.Wb(0,"mat-option",25),f.Wb(1,"div",26),f.Wb(2,"span",27),f.Lc(3,"Job"),f.Vb(),f.Lc(4),f.Vb(),f.Wb(5,"div",28),f.Wb(6,"span",27),f.Lc(7,"Department"),f.Vb(),f.Lc(8),f.Vb(),f.Vb()),2&t){var n=e.$implicit;f.pc("value",n.job),f.Db(4),f.Nc(": ",n.job,""),f.Db(4),f.Nc(": ",n.department,"")}}function nt(t,e){if(1&t){var n=f.Xb();f.Ub(0),f.Wb(1,"div",12),f.Wb(2,"label",18),f.Lc(3,"Job"),f.Vb(),f.Rb(4,"input",19),f.Vb(),f.Wb(5,"mat-autocomplete",20,21),f.dc("optionSelected",(function(t){return f.Ac(n),f.hc().jobSelected(t)})),f.Jc(7,et,9,3,"mat-option",22),f.ic(8,"async"),f.Vb(),f.Wb(9,"div",12),f.Wb(10,"label",23),f.Lc(11,"Department"),f.Vb(),f.Rb(12,"input",24),f.Vb(),f.Tb()}if(2&t){var a=f.xc(6),i=f.hc();f.Db(4),f.pc("matAutocomplete",a),f.Db(3),f.pc("ngForOf",f.jc(8,2,i.filteredJobs))}}var at,it=((at=function(){function t(e,n,a,i,o,c,s){r(this,t),this.store=e,this.toast=n,this.fb=a,this.actions$=i,this.dialogRef=o,this.valueLists=c,this.data=s,this.form=this.fb.group({character:[""],department:[""],job:[""]}),this.availableJobs=[],this.data.credit&&(this.credit=this.data.credit,this.form.patchValue(this.data.credit.pivot))}return c(t,[{key:"ngOnInit",value:function(){var t=this;this.valueLists.get(["tmdbJobs"]).subscribe((function(n){t.availableJobs=[],n.tmdbJobs.forEach((function(n){var a=n.jobs.map((function(t){return{job:t,department:n.department}}));t.availableJobs=[].concat(e(t.availableJobs),e(a))})),t.filteredJobs=t.form.get("job").valueChanges.pipe(Object(U.a)(""),Object(X.a)((function(e){return t.availableJobs.filter((function(t){return!(e=e.toLowerCase())||t.job.toLowerCase().includes(e)||t.department.toLowerCase().includes(e)})).slice(0,10)})))}))}},{key:"confirm",value:function(){var t,e=this,n=this.data.credit?new u.u(this.credit.pivot.id,this.getPayload()):new u.a(null===(t=this.credit)||void 0===t?void 0:t.id,this.data.mediaItem,this.getPayload());this.store.dispatch(n).subscribe((function(){e.close(),e.toast.open(e.data.credit?W.a.CREDIT_UPDATE_SUCCESS:W.a.CREDIT_ADD_SUCCESS)}),(function(t){e.toast.open(t.message)}))}},{key:"close",value:function(){this.dialogRef.close()}},{key:"setCredit",value:function(t){this.credit=t}},{key:"getPayload",value:function(){var t=this.form.value;return"cast"===this.data.type&&(t.department="cast",t.job="cast"),t}},{key:"getPersonType",value:function(){return J.a.PERSON}},{key:"jobSelected",value:function(t){var e=this.availableJobs.find((function(e){return e.job===t.option.value}));this.form.patchValue({job:e.job,department:e.department})}}]),t}()).\u0275fac=function(t){return new(t||at)(f.Qb(b.g),f.Qb(O.b),f.Qb(m.h),f.Qb(b.b),f.Qb(Q.h),f.Qb(z.a),f.Qb(Q.a))},at.\u0275cmp=f.Kb({type:at,selectors:[["crupdate-credit-modal"]],decls:17,vars:10,consts:[[1,"modal-header"],["class","modal-title","mat-dialog-title","","trans","",4,"ngIf"],["type","button",1,"close-button","no-style","icon-button",3,"click"],["svgIcon","close"],["autocomplete","off","ngNativeValidate","",3,"formGroup","ngSubmit"],[1,"many-inputs"],["class","input-container",4,"ngIf"],["placeholder","Search for a person...","label","Person","searchProvider","local",3,"type","resetInputOnSelect","resultSelected",4,"ngIf"],[4,"ngIf"],["type","button","mat-button","","trans","",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled"],["mat-dialog-title","","trans","",1,"modal-title"],[1,"input-container"],["for","name","trans",""],["type","text","id","name","disabled","",3,"value"],["placeholder","Search for a person...","label","Person","searchProvider","local",3,"type","resetInputOnSelect","resultSelected"],["for","character","trans",""],["type","text","id","character","formControlName","character","required",""],["for","job","trans",""],["type","text","id","job","formControlName","job","required","",3,"matAutocomplete"],[3,"optionSelected"],["auto","matAutocomplete"],["class","multiline-mat-menu-item",3,"value",4,"ngFor","ngForOf"],["for","department","trans",""],["type","text","id","department","formControlName","department","required",""],[1,"multiline-mat-menu-item",3,"value"],[1,"title"],["trans",""],[1,"description"]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Jc(1,G,2,0,"h2",1),f.Jc(2,H,2,0,"h2",1),f.Wb(3,"button",2),f.dc("click",(function(){return e.close()})),f.Rb(4,"mat-icon",3),f.Vb(),f.Vb(),f.Wb(5,"form",4),f.dc("ngSubmit",(function(){return e.confirm()})),f.Wb(6,"mat-dialog-content",5),f.Jc(7,Y,4,1,"div",6),f.Jc(8,Z,1,2,"search-input",7),f.Jc(9,tt,4,0,"div",6),f.Jc(10,nt,13,4,"ng-container",8),f.Vb(),f.Wb(11,"mat-dialog-actions"),f.Wb(12,"button",9),f.dc("click",(function(){return e.close()})),f.Lc(13,"Cancel"),f.Vb(),f.Wb(14,"button",10),f.ic(15,"async"),f.Lc(16,"Save"),f.Vb(),f.Vb(),f.Vb()),2&t&&(f.Db(1),f.pc("ngIf",e.data.credit),f.Db(1),f.pc("ngIf",!e.data.credit),f.Db(3),f.pc("formGroup",e.form),f.Db(2),f.pc("ngIf",e.data.credit),f.Db(1),f.pc("ngIf",!e.data.credit),f.Db(1),f.pc("ngIf","cast"===e.data.type),f.Db(1),f.pc("ngIf","crew"===e.data.type),f.Db(4),f.pc("disabled",f.jc(15,8,e.loading$)))},directives:[o.t,R.a,m.v,m.m,Q.f,Q.c,P.b,g.a,Q.i,q.a,m.d,m.u,m.k,m.F,K.c,K.a,o.s,B.l],pipes:[o.b],styles:["crupdate-credit-modal{display:block;width:400px;max-width:100%}crupdate-credit-modal search-input input{border-color:var(--be-divider-default);margin-bottom:20px}"],encapsulation:2,changeDetection:0}),Object(l.b)([Object(b.d)(d.a.loading)],at.prototype,"loading$",void 0),at),rt=a("2hX1"),ot=a("EAOp"),ct=a("5+WD"),st=a("Um6Z"),lt=a("CH4Q");function bt(t,e){1&t&&(f.Wb(0,"th",8),f.Lc(1,"Character"),f.Vb())}function ut(t,e){1&t&&(f.Wb(0,"th",9),f.Lc(1,"Department"),f.Vb())}function dt(t,e){1&t&&(f.Wb(0,"th",10),f.Lc(1,"Job"),f.Vb())}function pt(t,e){1&t&&(f.Wb(0,"button",21),f.Rb(1,"mat-icon",22),f.Vb())}function ft(t,e){if(1&t&&(f.Wb(0,"div"),f.Lc(1),f.Vb()),2&t){var n=f.hc().$implicit;f.Db(1),f.Mc(n.name)}}function gt(t,e){if(1&t&&(f.Wb(0,"td"),f.Lc(1),f.Vb()),2&t){var n=f.hc().$implicit;f.Db(1),f.Mc(n.pivot.character)}}function ht(t,e){if(1&t&&(f.Wb(0,"td"),f.Lc(1),f.Vb()),2&t){var n=f.hc().$implicit;f.Db(1),f.Mc(n.pivot.department)}}function mt(t,e){if(1&t&&(f.Wb(0,"td"),f.Lc(1),f.Vb()),2&t){var n=f.hc().$implicit;f.Db(1),f.Mc(n.pivot.job)}}function vt(t,e){if(1&t){var n=f.Xb();f.Wb(0,"tr",11),f.Wb(1,"td"),f.Wb(2,"div",12),f.Jc(3,pt,2,0,"button",13),f.Rb(4,"media-image",14),f.Wb(5,"span"),f.Lc(6),f.Vb(),f.Vb(),f.Jc(7,ft,2,1,"div",15),f.Vb(),f.Jc(8,gt,2,1,"td",16),f.Jc(9,ht,2,1,"td",16),f.Jc(10,mt,2,1,"td",16),f.Wb(11,"td",17),f.Wb(12,"button",18),f.dc("click",(function(){f.Ac(n);var t=e.$implicit;return f.hc().openCrupdateCreditModal(t)})),f.Rb(13,"mat-icon",19),f.Vb(),f.Wb(14,"button",18),f.dc("click",(function(){f.Ac(n);var t=e.$implicit;return f.hc().detachCredit(t)})),f.Rb(15,"mat-icon",20),f.Vb(),f.Vb(),f.Vb()}if(2&t){var a=e.$implicit,i=f.hc();f.Db(3),f.pc("ngIf","cast"===i.type),f.Db(1),f.pc("src",a.poster),f.Db(2),f.Mc(a.name),f.Db(2),f.pc("ngIf","cast"===i.type),f.Db(1),f.pc("ngIf","crew"===i.type),f.Db(1),f.pc("ngIf","crew"===i.type)}}function yt(t,e){1&t&&(f.Wb(0,"no-results-message",23),f.Wb(1,"span",24),f.Lc(2,"Nothing to Display."),f.Vb(),f.Vb())}var Vt,xt=((Vt=function(){function t(e,n,a,i){r(this,t),this.dialog=e,this.store=n,this.toast=a,this.datatable=i}return c(t,[{key:"ngOnInit",value:function(){this.datatable.init()}},{key:"ngOnChanges",value:function(t){t.mediaItem&&t.mediaItem.currentValue&&(this.datatable.data="cast"===this.type?this.getCast(this.mediaItem.credits):this.getCrew(this.mediaItem.credits))}},{key:"ngOnDestroy",value:function(){this.datatable.destroy()}},{key:"openCrupdateCreditModal",value:function(t){this.dialog.open(it,{credit:t,type:this.type,mediaItem:this.mediaItem})}},{key:"detachCredit",value:function(t){var e=this;this.dialog.open(E.a,{title:"Remove Credit",body:"Are you sure you want to remove this credit?",ok:"Remove"}).afterClosed().subscribe((function(n){n&&e.store.dispatch(new u.r(e.mediaItem,t)).subscribe((function(){e.toast.open(W.a.CREDIT_REMOVE_SUCCESS)}))}))}},{key:"changeCreditsOrder",value:function(t){this.store.selectSnapshot(d.a.loading)||this.store.dispatch(new u.e(this.mediaItem,t.previousIndex,t.currentIndex,this.type))}},{key:"getCast",value:function(t){return t?t.filter((function(t){return"cast"===t.pivot.department})):[]}},{key:"getCrew",value:function(t){return t?t.filter((function(t){return"cast"!==t.pivot.department})):[]}}]),t}()).\u0275fac=function(t){return new(t||Vt)(f.Qb(A.a),f.Qb(b.g),f.Qb(O.b),f.Qb(rt.a))},Vt.\u0275cmp=f.Kb({type:Vt,selectors:[["credits-panel"]],inputs:{mediaItem:"mediaItem",type:"type"},features:[f.Cb([rt.a]),f.Bb],decls:17,vars:10,consts:[["type","button","mat-raised-button","","color","accent","leftContent","","trans","",3,"click"],["cdkDropList","",1,"material-table",3,"cdkDropListDisabled","cdkDropListDropped"],["table-sort-header","","trans",""],["table-sort-header","pivot.character","trans","",4,"ngIf"],["table-sort-header","pivot.department","trans","",4,"ngIf"],["table-sort-header","pivot.job","trans","",4,"ngIf"],["cdkDrag","",4,"ngFor","ngForOf"],["svgImage","awards.svg",4,"ngIf"],["table-sort-header","pivot.character","trans",""],["table-sort-header","pivot.department","trans",""],["table-sort-header","pivot.job","trans",""],["cdkDrag",""],[1,"column-with-image"],["type","button","mat-icon-button","","cdkDragHandle","",4,"ngIf"],["size","small",3,"src"],[4,"cdkDragPreview"],[4,"ngIf"],[1,"edit-column"],["type","button","mat-icon-button","",3,"click"],["svgIcon","edit"],["svgIcon","close"],["type","button","mat-icon-button","","cdkDragHandle",""],["svgIcon","drag-handle"],["svgImage","awards.svg"],["primary-text","","trans",""]],template:function(t,e){1&t&&(f.Wb(0,"datatable-header"),f.Wb(1,"button",0),f.dc("click",(function(){return e.openCrupdateCreditModal()})),f.Lc(2,"Add Credit"),f.Vb(),f.Vb(),f.Wb(3,"table",1),f.dc("cdkDropListDropped",(function(t){return e.changeCreditsOrder(t)})),f.Wb(4,"thead"),f.Wb(5,"tr"),f.Wb(6,"th",2),f.Lc(7,"Name"),f.Vb(),f.Jc(8,bt,2,0,"th",3),f.Jc(9,ut,2,0,"th",4),f.Jc(10,dt,2,0,"th",5),f.Rb(11,"th"),f.Vb(),f.Vb(),f.Wb(12,"tbody"),f.Jc(13,vt,16,6,"tr",6),f.ic(14,"async"),f.Vb(),f.Vb(),f.Jc(15,yt,3,0,"no-results-message",7),f.ic(16,"async")),2&t&&(f.Db(3),f.pc("cdkDropListDisabled","crew"===e.type),f.Db(5),f.pc("ngIf","cast"===e.type),f.Db(1),f.pc("ngIf","crew"===e.type),f.Db(1),f.pc("ngIf","crew"===e.type),f.Db(3),f.pc("ngForOf",f.jc(14,6,e.datatable.data$)),f.Db(2),f.pc("ngIf",!f.jc(16,8,e.datatable.data$).length))},directives:[ot.a,P.b,g.a,ct.d,st.a,o.t,o.s,ct.a,I.a,ct.c,R.a,ct.b,lt.a],pipes:[o.b],styles:["[_nghost-%COMP%]{display:block;padding:0}.cdk-drag-handle[_ngcontent-%COMP%]{cursor:move;margin-right:10px}.cdk-drag-preview[_ngcontent-%COMP%]{padding:15px;font-size:1.5rem;border-radius:4px;background-color:var(--be-background);box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{background-color:var(--be-hover)}.cdk-drag-animating[_ngcontent-%COMP%], .cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"],changeDetection:0}),Vt);function kt(t,e){1&t&&(f.Wb(0,"h2",30),f.Lc(1,"Edit Episode"),f.Vb())}function Ct(t,e){1&t&&(f.Wb(0,"h2",30),f.Lc(1,"Create Episode"),f.Vb())}function Wt(t,e){if(1&t&&(f.Wb(0,"div",31),f.Lc(1),f.Vb()),2&t){var n=e.ngIf;f.Db(1),f.Mc(n)}}var wt,Dt=((wt=function(){function t(e,n,a,i,o,c){r(this,t),this.store=e,this.toast=n,this.fb=a,this.uploadQueue=i,this.dialogRef=o,this.data=c,this.episode$=new p.a(null),this.errors$=new p.a({}),this.episodeForm=this.fb.group({name:["",[m.I.required,m.I.minLength(1)]],poster:["",[m.I.minLength(1),m.I.maxLength(250)]],description:["",[m.I.minLength(1)]],popularity:[50,[m.I.min(1),m.I.max(1e3)]],release_date:[""],episode_number:[""]})}return c(t,[{key:"ngOnInit",value:function(){var t=this;this.data.episode?(this.bindToStoreEpisode(),this.episodeForm.patchValue(Object.assign(Object.assign({},this.episode$.value),{release_date:this.episode$.value.release_date.split(" ")[0]})),setTimeout((function(){return t.loadEpisodeCredits()}))):this.episodeForm.patchValue({episode_number:this.data.season?this.data.season.episode_count+1:1})}},{key:"confirm",value:function(){this.data.episode?this.updateEpisode():this.createEpisode()}},{key:"close",value:function(){this.dialogRef.close()}},{key:"createEpisode",value:function(){var t=this;this.store.dispatch(new u.h(this.data.season,this.episodeForm.value)).subscribe((function(){t.errors$.next({}),t.toast.open(W.a.EPISODE_CREATE_SUCCESS);var e=t.store.selectSnapshot(d.a.seasons).find((function(e){return e.id===t.data.season.id})).episodes;t.data.episode=e[e.length-1]}),(function(e){return t.errors$.next(e.errors)}))}},{key:"updateEpisode",value:function(){var t=this;this.store.dispatch(new u.v(this.data.episode,this.episodeForm.value)).subscribe((function(){t.errors$.next({}),t.toast.open(W.a.EPISODE_UPDATE_SUCCESS),t.close()}),(function(e){return t.errors$.next(e.errors)}))}},{key:"uploadPoster",value:function(){var t=this;Object(y.a)({types:[V.a.image]}).then((function(e){t.uploadQueue.start(e,{uri:"uploads/images",httpParams:{diskPrefix:"media-images/posters"}}).subscribe((function(e){t.episodeForm.patchValue({poster:e.fileEntry.url})}))}))}},{key:"bindToStoreEpisode",value:function(){var t=this;this.store.select(d.a.title).subscribe((function(e){if(e.seasons){var n=e.seasons.find((function(e){return e.number===t.data.episode.season_number})).episodes.find((function(e){return e.episode_number===t.data.episode.episode_number}));t.episode$.next(Object.assign({},n))}}))}},{key:"loadEpisodeCredits",value:function(){this.data.episode.credits||this.store.dispatch(new u.p(this.episode$.value)).toPromise()}}]),t}()).\u0275fac=function(t){return new(t||wt)(f.Qb(b.g),f.Qb(O.b),f.Qb(m.h),f.Qb(v.a),f.Qb(Q.h),f.Qb(Q.a))},wt.\u0275cmp=f.Kb({type:wt,selectors:[["crupdate-episode-modal"]],features:[f.Cb([v.a])],decls:55,vars:30,consts:[[1,"modal-header"],["class","modal-title","mat-dialog-title","","trans","",4,"ngIf"],["type","button",1,"close-button","no-style","icon-button",3,"click"],["svgIcon","close"],["autocomplete","off","ngNativeValidate","",3,"formGroup","ngSubmit"],["animationDuration","0ms","color","accent",3,"dynamicHeight"],[3,"label"],[1,"many-inputs","primary-facts-panel"],[1,"input-container"],["for","name","trans",""],["type","text","formControlName","name","id","name","minlength","1","maxlength","250","required",""],["for","episode_number","trans",""],["type","number","formControlName","episode_number","id","episode_number","min","1","required",""],["class","error",4,"ngIf"],["for","poster","trans",""],[1,"input-with-action","action-left"],["type","button","mat-flat-button","","color","accent",3,"matTooltip","click"],["svgIcon","file-upload"],["type","text","formControlName","poster","id","poster","minlength","1","maxlength","250"],["for","release_date","trans",""],["type","date","formControlName","release_date","id","release_date","required",""],["for","description","trans",""],["type","text","formControlName","description","id","description","minlength","1","cdkTextareaAutosize","","cdkAutosizeMinRows","6"],["for","popularity","trans",""],["type","number","formControlName","popularity","id","popularity","min","1","max","1000"],[3,"label","disabled"],["type","cast",3,"mediaItem"],["type","crew",3,"mediaItem"],["type","button","mat-button","","trans","",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled"],["mat-dialog-title","","trans","",1,"modal-title"],[1,"error"]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Jc(1,kt,2,0,"h2",1),f.Jc(2,Ct,2,0,"h2",1),f.Wb(3,"button",2),f.dc("click",(function(){return e.close()})),f.Rb(4,"mat-icon",3),f.Vb(),f.Vb(),f.Wb(5,"form",4),f.dc("ngSubmit",(function(){return e.confirm()})),f.Wb(6,"mat-dialog-content"),f.Wb(7,"mat-tab-group",5),f.Wb(8,"mat-tab",6),f.ic(9,"trans"),f.Wb(10,"div",7),f.Wb(11,"div",8),f.Wb(12,"label",9),f.Lc(13,"Title"),f.Vb(),f.Rb(14,"input",10),f.Vb(),f.Wb(15,"div",8),f.Wb(16,"label",11),f.Lc(17,"Number"),f.Vb(),f.Rb(18,"input",12),f.Jc(19,Wt,2,1,"div",13),f.ic(20,"async"),f.Vb(),f.Wb(21,"div",8),f.Wb(22,"label",14),f.Lc(23,"Poster"),f.Vb(),f.Wb(24,"div",15),f.Wb(25,"button",16),f.dc("click",(function(){return e.uploadPoster()})),f.ic(26,"trans"),f.Rb(27,"mat-icon",17),f.Vb(),f.Rb(28,"input",18),f.Vb(),f.Vb(),f.Wb(29,"div",8),f.Wb(30,"label",19),f.Lc(31,"Release Date"),f.Vb(),f.Rb(32,"input",20),f.Vb(),f.Wb(33,"div",8),f.Wb(34,"label",21),f.Lc(35,"Overview"),f.Vb(),f.Rb(36,"textarea",22),f.Vb(),f.Wb(37,"div",8),f.Wb(38,"label",23),f.Lc(39,"Popularity"),f.Vb(),f.Rb(40,"input",24),f.Vb(),f.Vb(),f.Vb(),f.Wb(41,"mat-tab",25),f.ic(42,"trans"),f.Rb(43,"credits-panel",26),f.ic(44,"async"),f.Vb(),f.Wb(45,"mat-tab",25),f.ic(46,"trans"),f.Rb(47,"credits-panel",27),f.ic(48,"async"),f.Vb(),f.Vb(),f.Vb(),f.Wb(49,"mat-dialog-actions"),f.Wb(50,"button",28),f.dc("click",(function(){return e.close()})),f.Lc(51,"Cancel"),f.Vb(),f.Wb(52,"button",29),f.ic(53,"async"),f.Lc(54,"Save"),f.Vb(),f.Vb(),f.Vb()),2&t&&(f.Db(1),f.pc("ngIf",e.data.episode),f.Db(1),f.pc("ngIf",!e.data.episode),f.Db(3),f.pc("formGroup",e.episodeForm),f.Db(2),f.pc("dynamicHeight",!0),f.Db(1),f.pc("label",f.jc(9,14,"Primary Facts")),f.Db(11),f.pc("ngIf",f.jc(20,16,e.errors$).episode_number),f.Db(6),f.pc("matTooltip",f.jc(26,18,"Upload poster")),f.Db(16),f.pc("label",f.jc(42,20,"Cast"))("disabled",!e.data.episode),f.Db(2),f.pc("mediaItem",f.jc(44,22,e.episode$)),f.Db(2),f.pc("label",f.jc(46,24,"Crew"))("disabled",!e.data.episode),f.Db(2),f.pc("mediaItem",f.jc(48,26,e.episode$)),f.Db(5),f.pc("disabled",f.jc(53,28,e.loading$)))},directives:[o.t,R.a,m.v,m.m,Q.f,F.c,F.a,g.a,m.d,m.u,m.k,m.q,m.p,m.F,m.A,P.b,L.a,_.b,xt,Q.c,Q.i],pipes:[S.a,o.b],styles:["[_nghost-%COMP%]{display:block;width:750px;max-width:100%}label[_ngcontent-%COMP%]{text-transform:capitalize}.primary-facts-panel[_ngcontent-%COMP%], credits-panel[_ngcontent-%COMP%]{padding:20px 0}"],changeDetection:0}),Object(l.b)([Object(b.d)(d.a.loading)],wt.prototype,"loading$",void 0),wt),Ot=a("iB19");function It(t,e){if(1&t){var n=f.Xb();f.Wb(0,"tr"),f.Wb(1,"td"),f.Wb(2,"div",7),f.Rb(3,"media-image",8),f.Wb(4,"span"),f.Lc(5),f.Vb(),f.Vb(),f.Vb(),f.Wb(6,"td"),f.Lc(7),f.Vb(),f.Wb(8,"td"),f.Lc(9),f.ic(10,"formattedDate"),f.Vb(),f.Wb(11,"td",9),f.Wb(12,"button",10),f.dc("click",(function(){f.Ac(n);var t=e.$implicit;return f.hc().openCrupdateEpisodeModal(t)})),f.Rb(13,"mat-icon",11),f.Vb(),f.Wb(14,"button",10),f.dc("click",(function(){f.Ac(n);var t=e.$implicit;return f.hc().deleteEpisode(t)})),f.Rb(15,"mat-icon",12),f.Vb(),f.Vb(),f.Vb()}if(2&t){var a=e.$implicit;f.Db(3),f.pc("src",a.poster)("alt",a.name),f.Db(2),f.Mc(a.name),f.Db(2),f.Mc(a.episode_number),f.Db(2),f.Mc(f.jc(10,5,a.release_date))}}function Pt(t,e){1&t&&(f.Wb(0,"no-results-message"),f.Wb(1,"span",13),f.Lc(2,"Nothing to Display."),f.Vb(),f.Wb(3,"span",14),f.Lc(4,"This season does not have any episodes yet."),f.Vb(),f.Vb())}var Lt,Rt=((Lt=function(){function t(e,n,a,i,o){r(this,t),this.store=e,this.dialog=n,this.toast=a,this.route=i,this.datatable=o,this.trackByFn=function(t,e){return e.id}}return c(t,[{key:"ngOnInit",value:function(){this.datatable.init()}},{key:"ngAfterViewInit",value:function(){var t=+this.route.snapshot.params.episodeNumber;if(t){var e=this.season.episodes.find((function(e){return e.episode_number===t}));e&&this.openCrupdateEpisodeModal(e)}}},{key:"ngOnChanges",value:function(t){t.season.currentValue&&t.season.currentValue.episodes&&(this.datatable.data=this.season.episodes)}},{key:"ngOnDestroy",value:function(){this.datatable.destroy()}},{key:"deleteEpisode",value:function(t){var e=this;this.dialog.open(E.a,{title:"Delete Episode",body:"Are you sure you want to delete this episode?",ok:"Delete"}).afterClosed().subscribe((function(n){n&&e.store.dispatch(new u.j(t)).subscribe((function(){e.toast.open(W.a.EPISODE_DELETE_SUCCESS)}))}))}},{key:"openCrupdateEpisodeModal",value:function(t){this.dialog.open(Dt,{episode:t,season:this.season},{panelClass:"crupdate-episode-modal-container"})}}]),t}()).\u0275fac=function(t){return new(t||Lt)(f.Qb(b.g),f.Qb(A.a),f.Qb(O.b),f.Qb(s.a),f.Qb(rt.a))},Lt.\u0275cmp=f.Kb({type:Lt,selectors:[["episodes-panel"]],inputs:{season:"season"},features:[f.Cb([rt.a]),f.Bb],decls:19,vars:7,consts:[["pluralResourceName","episodes"],["leftContent",""],["mat-raised-button","","color","accent","trans","",3,"click"],[1,"material-table"],["table-sort-header","","trans",""],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"column-with-image"],["size","small",3,"src","alt"],[1,"edit-column"],["type","button","mat-icon-button","",3,"click"],["svgIcon","edit"],["svgIcon","close"],["primary-text","","trans",""],["secondary-text","","trans",""]],template:function(t,e){1&t&&(f.Wb(0,"datatable-header",0),f.Ub(1,1),f.Wb(2,"button",2),f.dc("click",(function(){return e.openCrupdateEpisodeModal()})),f.Lc(3,"Add Episode"),f.Vb(),f.Tb(),f.Vb(),f.Wb(4,"table",3),f.Wb(5,"thead"),f.Wb(6,"tr"),f.Wb(7,"th",4),f.Lc(8,"Name"),f.Vb(),f.Wb(9,"th",4),f.Lc(10,"Number"),f.Vb(),f.Wb(11,"th",4),f.Lc(12,"Release Date"),f.Vb(),f.Rb(13,"th"),f.Vb(),f.Vb(),f.Wb(14,"tbody"),f.Jc(15,It,16,7,"tr",5),f.ic(16,"async"),f.Vb(),f.Vb(),f.Jc(17,Pt,5,0,"no-results-message",6),f.ic(18,"async")),2&t&&(f.Db(15),f.pc("ngForOf",f.jc(16,3,e.datatable.data$))("ngForTrackBy",e.trackByFn),f.Db(2),f.pc("ngIf",!f.jc(18,5,e.datatable.data$).length))},directives:[ot.a,P.b,g.a,st.a,o.s,o.t,I.a,R.a,lt.a],pipes:[o.b,Ot.a],styles:["episodes-panel{display:block}episodes-panel .table-header{display:flex;align-items:center;margin-bottom:15px}episodes-panel .table-header .input-container{max-width:300px;margin-left:auto;position:relative}episodes-panel .table-header .input-container .mat-icon{position:absolute;top:11px;right:8px}episodes-panel no-results-message{margin-top:50px}"],encapsulation:2,changeDetection:0}),Lt);function _t(t,e){if(1&t&&(f.Wb(0,"mat-tab-group",8),f.Wb(1,"mat-tab",9),f.ic(2,"trans"),f.Rb(3,"episodes-panel",10),f.Vb(),f.Wb(4,"mat-tab",9),f.ic(5,"trans"),f.Rb(6,"credits-panel",11),f.Vb(),f.Wb(7,"mat-tab",9),f.ic(8,"trans"),f.Rb(9,"credits-panel",12),f.Vb(),f.Vb()),2&t){var n=f.hc().$implicit;f.Db(1),f.pc("label",f.jc(2,6,"Episodes")),f.Db(2),f.pc("season",n),f.Db(1),f.pc("label",f.jc(5,8,"Regular Cast")),f.Db(2),f.pc("mediaItem",n),f.Db(1),f.pc("label",f.jc(8,10,"Regular Crew")),f.Db(2),f.pc("mediaItem",n)}}function St(t,e){if(1&t){var n=f.Xb();f.Wb(0,"mat-expansion-panel",4),f.ic(1,"async"),f.Wb(2,"mat-expansion-panel-header"),f.Wb(3,"mat-panel-title"),f.Wb(4,"span",5),f.Lc(5,"Season"),f.Vb(),f.Lc(6," \xa0 "),f.Wb(7,"span"),f.Lc(8),f.Vb(),f.Vb(),f.Vb(),f.Jc(9,_t,10,12,"ng-template",6),f.Wb(10,"mat-action-row"),f.Wb(11,"button",7),f.dc("click",(function(){f.Ac(n);var t=e.$implicit;return f.hc(2).maybeDeleteSeason(t)})),f.Lc(12,"Delete"),f.Vb(),f.Vb(),f.Vb()}if(2&t){var a=e.$implicit,i=f.hc(2);f.pc("expanded",f.jc(1,3,i.activeSeason$)===a.number)("ngClass","season-"+a.number+"-panel"),f.Db(8),f.Mc(a.number)}}function Mt(t,e){1&t&&(f.Wb(0,"no-results-message"),f.Wb(1,"span",13),f.Lc(2,"Nothing to Display."),f.Vb(),f.Wb(3,"span",14),f.Lc(4,"This series does not have any seasons yet."),f.Vb(),f.Vb())}function $t(t,e){if(1&t){var n=f.Xb();f.Ub(0),f.Wb(1,"div",1),f.Wb(2,"button",2),f.dc("click",(function(){return f.Ac(n),f.hc().addSeason()})),f.ic(3,"async"),f.Lc(4,"Add Season"),f.Vb(),f.Vb(),f.Wb(5,"mat-accordion"),f.Jc(6,St,13,5,"mat-expansion-panel",3),f.Vb(),f.Jc(7,Mt,5,0,"no-results-message",0),f.Tb()}if(2&t){var a=e.ngIf,i=f.hc();f.Db(2),f.pc("disabled",f.jc(3,4,i.loading$)),f.Db(4),f.pc("ngForOf",a)("ngForTrackBy",i.trackByFn),f.Db(1),f.pc("ngIf",!a.length)}}var jt,Tt=((jt=function(){function t(e,n,a,i,o){r(this,t),this.store=e,this.modal=n,this.toast=a,this.route=i,this.el=o,this.activeSeason$=new p.a(1)}return c(t,[{key:"ngOnInit",value:function(){this.activeSeason$.next(+this.route.snapshot.params.seasonNumber||1)}},{key:"ngAfterViewInit",value:function(){var t=this;setTimeout((function(){var e;t.activeSeason$.value>1&&(null===(e=t.el.nativeElement.querySelector(".season-".concat(t.activeSeason$.value,"-panel")))||void 0===e||e.scrollIntoView({behavior:"smooth",block:"start",inline:"start"}))}))}},{key:"addSeason",value:function(){var t=this;this.store.dispatch(new u.i).subscribe((function(){t.toast.open(W.a.SEASON_CREATE_SUCCESS)}))}},{key:"maybeDeleteSeason",value:function(t){var e=this;this.modal.open(E.a,{title:"Delete Season",body:"Are you sure you want to delete this season?",bodyBold:"This will also delete all episodes attached to this season.",ok:"Delete"}).afterClosed().subscribe((function(n){n&&e.store.dispatch(new u.l(t)).subscribe((function(){e.toast.open(W.a.SEASON_DELETE_SUCCESS)}))}))}},{key:"trackByFn",value:function(t,e){return e.id}}]),t}()).\u0275fac=function(t){return new(t||jt)(f.Qb(b.g),f.Qb(A.a),f.Qb(O.b),f.Qb(s.a),f.Qb(f.m))},jt.\u0275cmp=f.Kb({type:jt,selectors:[["seasons-panel"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"header"],["type","button","mat-raised-button","","color","accent",3,"disabled","click"],["class","mat-elevation-z0",3,"expanded","ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"mat-elevation-z0",3,"expanded","ngClass"],["trans",""],["matExpansionPanelContent",""],["type","button","mat-button","","trans","",3,"click"],["animationDuration","0ms","color","accent"],[3,"label"],[3,"season"],["type","cast",3,"mediaItem"],["type","crew",3,"mediaItem"],["primary-text","","trans",""],["secondary-text","","trans",""]],template:function(t,e){1&t&&(f.Jc(0,$t,8,6,"ng-container",0),f.ic(1,"async")),2&t&&f.pc("ngIf",f.jc(1,1,e.seasons$))},directives:[o.t,P.b,N.a,o.s,N.c,o.q,N.f,N.g,g.a,N.e,N.d,F.c,F.a,Rt,xt,lt.a],pipes:[o.b,S.a],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     datatable-header{height:auto}.header[_ngcontent-%COMP%]{margin-bottom:20px}.mat-expansion-panel[_ngcontent-%COMP%]{border:1px solid var(--be-divider-default);border-radius:4px;margin-bottom:10px}.mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%]{font-weight:500;font-size:1.5rem}"],changeDetection:0}),Object(l.b)([Object(b.d)(d.a.seasons)],jt.prototype,"seasons$",void 0),Object(l.b)([Object(b.d)(d.a.loading)],jt.prototype,"loading$",void 0),jt),Et=a("35We"),At=a("vxfF");function Nt(t,e){if(1&t){var n=f.Xb();f.Wb(0,"div",4),f.dc("cdkDropListDropped",(function(){return f.Ac(n),f.hc().dropListDropped()})),f.Wb(1,"media-image",7),f.dc("cdkDragMoved",(function(t){return f.Ac(n),f.hc().dragMoved(t)})),f.Wb(2,"button",8),f.dc("click",(function(){f.Ac(n);var t=e.$implicit;return f.hc().deleteImage(t)})),f.Rb(3,"mat-icon",9),f.Vb(),f.Vb(),f.Vb()}if(2&t){var a=e.$implicit,i=f.hc();f.pc("cdkDropListEnterPredicate",i.dropListEnterPredicate),f.Db(1),f.pc("src",a.url)}}var Ft,Qt=((Ft=function(){function t(e,n,a,i){var o=this;r(this,t),this.images=e,this.store=n,this.toast=a,this.viewportRuler=i,this.dropListEnterPredicate=function(t,e){if(e===o.placeholder)return!0;if(e!==o.activeContainer)return!1;var n=o.placeholder.element.nativeElement,a=t.dropContainer.element.nativeElement,i=e.element.nativeElement,r=Jt(i.parentElement.children,o.source?n:a),c=Jt(i.parentElement.children,i);return o.source||(o.sourceIndex=r,o.source=t.dropContainer,n.style.width=a.clientWidth+"px",n.style.height=a.clientHeight+"px",a.parentElement.removeChild(a)),o.targetIndex=c,o.target=e,n.style.display="",i.parentElement.insertBefore(n,c>r?i.nextSibling:i),o.placeholder._dropListRef.enter(t._dragRef,t.element.nativeElement.offsetLeft,t.element.nativeElement.offsetTop),!1}}return c(t,[{key:"uploadImage",value:function(){var t=this;Object(y.a)({types:[V.a.image]}).then((function(e){var n={modelId:t.store.selectSnapshot(d.a.title).id};t.images.create(e[0],n).subscribe((function(e){t.store.dispatch(new u.b(e.image)).subscribe((function(){t.toast.open(W.a.IMAGE_CREATE_SUCCESS)}))}))}))}},{key:"deleteImage",value:function(t){var e=this;this.store.dispatch(new u.k(t)).subscribe((function(){e.toast.open(W.a.IMAGE_DELETE_SUCCESS)}))}},{key:"dragMoved",value:function(t){var e=this,n=this.getPointerPositionOnPage(t.event);this.listGroup._items.forEach((function(t){(function(t,e,n){var a=t.element.nativeElement.getBoundingClientRect(),i=a.top,r=a.bottom,o=a.left,c=a.right;return n>=i&&n<=r&&e>=o&&e<=c})(t,n.x,n.y)&&(e.activeContainer=t)}))}},{key:"dropListDropped",value:function(){if(this.target){var t=this.placeholder.element.nativeElement,e=t.parentElement;t.style.display="none",e.removeChild(t),e.appendChild(t),e.insertBefore(this.source.element.nativeElement,e.children[this.sourceIndex]),this.target=null,this.source=null,this.sourceIndex!==this.targetIndex&&this.store.dispatch(new u.f(this.sourceIndex,this.targetIndex))}}},{key:"getPointerPositionOnPage",value:function(t){var e=function(t){return t.type.startsWith("touch")}(t)?t.touches[0]||t.changedTouches[0]:t,n=this.viewportRuler.getViewportScrollPosition();return{x:e.pageX-n.left,y:e.pageY-n.top}}}]),t}()).\u0275fac=function(t){return new(t||Ft)(f.Qb(Et.a),f.Qb(b.g),f.Qb(O.b),f.Qb(At.e))},Ft.\u0275cmp=f.Kb({type:Ft,selectors:[["images-panel"]],viewQuery:function(t,e){var n;1&t&&(f.Sc(ct.e,!0),f.Sc(ct.d,!0)),2&t&&(f.wc(n=f.ec())&&(e.listGroup=n.first),f.wc(n=f.ec())&&(e.placeholder=n.first))},features:[f.Cb([v.a])],decls:9,vars:4,consts:[["mat-raised-button","","color","accent",3,"click"],["svgIcon","add"],["trans",""],["cdkDropListGroup",""],["cdkDropList","",3,"cdkDropListEnterPredicate","cdkDropListDropped"],[1,"images-grid"],["cdkDropList","",3,"cdkDropListEnterPredicate","cdkDropListDropped",4,"ngFor","ngForOf"],["cdkDrag","","size","medium","mode","landscape",1,"images-panel-media-image",3,"src","cdkDragMoved"],["mat-mini-fab","","color","warn",3,"click"],["svgIcon","delete"]],template:function(t,e){1&t&&(f.Wb(0,"button",0),f.dc("click",(function(){return e.uploadImage()})),f.Rb(1,"mat-icon",1),f.Wb(2,"span",2),f.Lc(3,"Upload Image"),f.Vb(),f.Vb(),f.Wb(4,"div",3),f.Wb(5,"div",4),f.dc("cdkDropListDropped",(function(){return e.dropListDropped()})),f.Vb(),f.Wb(6,"div",5),f.Jc(7,Nt,4,2,"div",6),f.ic(8,"async"),f.Vb(),f.Vb()),2&t&&(f.Db(5),f.pc("cdkDropListEnterPredicate",e.dropListEnterPredicate),f.Db(2),f.pc("ngForOf",f.jc(8,2,e.images$)))},directives:[P.b,R.a,g.a,ct.e,ct.d,o.s,I.a,ct.a],pipes:[o.b],styles:[".mat-raised-button[_ngcontent-%COMP%]{display:block;margin-bottom:25px}.images-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);grid-auto-rows:1fr;grid-gap:15px;overflow:hidden}media-image[_ngcontent-%COMP%]{display:block;box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12);border-radius:4px;overflow:hidden;position:relative;cursor:move;transition:box-shadow .2s cubic-bezier(0,0,.2,1)}media-image[_ngcontent-%COMP%]:active{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12);opacity:.6}.mat-mini-fab[_ngcontent-%COMP%]{position:absolute;bottom:8px;right:8px}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.3}.cdk-drag-preview[_ngcontent-%COMP%]{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}"],changeDetection:0}),Object(l.b)([Object(b.d)(d.a.images)],Ft.prototype,"images$",void 0),Ft);function Jt(t,e){return Array.prototype.indexOf.call(t,e)}var Ut=a("SRuq"),Xt=a("WAq7"),zt=a("CZpq"),qt=a("A5z7");function Kt(t,e){if(1&t){var n=f.Xb();f.Wb(0,"form",9),f.dc("ngSubmit",(function(){f.Ac(n);var t=f.hc();return t.selectTagsFromString(t.formControl.value)})),f.Wb(1,"div",10),f.Rb(2,"input",11),f.Wb(3,"button",12),f.Lc(4,"Add"),f.Vb(),f.Vb(),f.Vb()}if(2&t){var a=f.hc(),i=f.xc(8);f.Db(2),f.pc("matAutocomplete",i)("formControl",a.formControl)}}var Bt=function(t){return{tagName:t}};function Gt(t,e){if(1&t&&(f.Wb(0,"p",13),f.Lc(1,"Separate :tagName with comma."),f.Vb()),2&t){var n=f.hc();f.pc("transValues",f.tc(1,Bt,n.pluralName))}}function Ht(t,e){if(1&t){var n=f.Xb();f.Wb(0,"mat-chip",14),f.dc("removed",(function(){f.Ac(n);var t=e.$implicit;return f.hc().deselectTag(t)})),f.Wb(1,"span"),f.Lc(2),f.Vb(),f.Rb(3,"mat-icon",15),f.Vb()}if(2&t){var a=e.$implicit,i=f.hc();f.pc("removable",!i.readonly),f.Db(2),f.Mc(a)}}function Yt(t,e){if(1&t){var n=f.Xb();f.Wb(0,"div",20),f.dc("click",(function(){f.Ac(n);var t=e.$implicit;return f.hc(2).selectTags([t.name])})),f.Lc(1),f.Vb()}if(2&t){var a=e.$implicit;f.Db(1),f.Mc(a.display_name)}}function Zt(t,e){if(1&t&&(f.Wb(0,"div",16),f.Wb(1,"p",17),f.Lc(2,"Choose from existing :tagName:"),f.Vb(),f.Wb(3,"div",18),f.Jc(4,Yt,2,1,"div",19),f.ic(5,"async"),f.Vb(),f.Vb()),2&t){var n=f.hc();f.Db(1),f.pc("transValues",f.tc(4,Bt,n.pluralName)),f.Db(3),f.pc("ngForOf",f.jc(5,2,n.existingTags$))}}function te(t,e){if(1&t&&(f.Wb(0,"mat-option",21),f.Lc(1),f.Vb()),2&t){var n=e.$implicit;f.pc("value",n.name),f.Db(1),f.Mc(n.display_name)}}var ee,ne,ae=((ee=function(){function t(e){r(this,t),this.tagService=e,this.readonly=!1,this.pluralName="tags",this.formControl=new m.i,this.selectedTags$=new p.a([]),this.existingTags$=new p.a([]),this.suggestedTags$=new p.a([])}return c(t,[{key:"ngOnInit",value:function(){var t=this;this.tagService.index({perPage:15,type:this.tagType}).subscribe((function(e){t.existingTags$.next(e.pagination.data.filter((function(t){return"status"!==t.type})))})),this.formControl.valueChanges.subscribe((function(e){var n=e?t.existingTags$.value.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())})):[];t.suggestedTags$.next(n)}))}},{key:"writeValue",value:function(t){this.selectTags(t,{skipPropagate:!0,override:!0})}},{key:"registerOnChange",value:function(t){this.propagateChange=t}},{key:"registerOnTouched",value:function(){}},{key:"selectTags",value:function(t){var n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(t||[]).map((function(t){return t.trim()})).filter((function(t){return!n.selectedTags$.value.includes(t)}));a.override?this.selectedTags$.next(i):i.length&&this.selectedTags$.next([].concat(e(this.selectedTags$.value),e(i))),this.formControl.reset(),a.skipPropagate||this.propagateChange(this.selectedTags$.value)}},{key:"deselectTag",value:function(t){var e=this.selectedTags$.value.slice();e.splice(e.indexOf(t),1),this.selectedTags$.next(e),this.propagateChange(this.selectedTags$.value)}},{key:"selectTagsFromString",value:function(t){var e=t.split(",").map((function(t){return Object(Xt.a)(t)}));this.selectTags(e)}}]),t}()).\u0275fac=function(t){return new(t||ee)(f.Qb(zt.a))},ee.\u0275cmp=f.Kb({type:ee,selectors:[["tags-manager"]],inputs:{readonly:"readonly",tagType:"tagType",pluralName:"pluralName"},features:[f.Cb([{provide:m.s,useExisting:ee,multi:!0}])],decls:11,vars:10,consts:[["class","input-container","ngNativeValidate","",3,"ngSubmit",4,"ngIf"],["class","main-info","trans","",3,"transValues",4,"ngIf"],[1,"selected-tags"],[3,"selectable"],[3,"removable","removed",4,"ngFor","ngForOf"],["class","existing-tags",4,"ngIf"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["ngNativeValidate","",1,"input-container",3,"ngSubmit"],[1,"input-with-action"],["type","text","required","",1,"tags-string-input",3,"matAutocomplete","formControl"],["type","submit","mat-flat-button","","color","accent","trans","",1,"add-tags-button"],["trans","",1,"main-info",3,"transValues"],[3,"removable","removed"],["svgIcon","cancel","matChipRemove",""],[1,"existing-tags"],["trans","",3,"transValues"],[1,"existing-tags-list"],["class","existing-tag-name",3,"click",4,"ngFor","ngForOf"],[1,"existing-tag-name",3,"click"],[3,"value"]],template:function(t,e){1&t&&(f.Jc(0,Kt,5,2,"form",0),f.Jc(1,Gt,2,3,"p",1),f.Wb(2,"div",2),f.Wb(3,"mat-chip-list",3),f.Jc(4,Ht,4,2,"mat-chip",4),f.ic(5,"async"),f.Vb(),f.Vb(),f.Jc(6,Zt,6,6,"div",5),f.Wb(7,"mat-autocomplete",6,7),f.dc("optionSelected",(function(t){return e.selectTags([t.option.value])})),f.Jc(9,te,2,2,"mat-option",8),f.ic(10,"async"),f.Vb()),2&t&&(f.pc("ngIf",!e.readonly),f.Db(1),f.pc("ngIf",!e.readonly),f.Db(2),f.pc("selectable",!1),f.Db(1),f.pc("ngForOf",f.jc(5,6,e.selectedTags$)),f.Db(2),f.pc("ngIf",!e.readonly),f.Db(3),f.pc("ngForOf",f.jc(10,8,e.suggestedTags$)))},directives:[o.t,qt.c,o.s,K.a,m.v,m.w,K.c,m.d,m.F,m.u,m.j,P.b,g.a,qt.a,R.a,qt.d,B.l],pipes:[o.b],styles:["[_nghost-%COMP%]{display:block}.selected-tag[_ngcontent-%COMP%]{margin:0 10px 10px 0;display:inline-block}.main-info[_ngcontent-%COMP%]{margin-top:5px;font-size:1.3rem}.existing-tags[_ngcontent-%COMP%]{margin-top:25px}.existing-tags[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:5px;font-size:1.3rem;color:var(--be-secondary-text)}.existing-tags-list[_ngcontent-%COMP%]{border:1px solid var(--be-divider-default);padding:8px;height:78px;overflow:auto}.existing-tag-name[_ngcontent-%COMP%]{display:inline-block;margin-right:6px;color:var(--be-link);text-decoration:underline;font-size:1.2rem;cursor:pointer}"],changeDetection:0}),ee),ie=function(t){return{tagName:t}},re=((ne=function(){function t(e,n){r(this,t),this.dialogRef=e,this.data=n,this.selectedTagsControl=new m.i,this.pluralName=this.data.pluralName||"tags"}return c(t,[{key:"close",value:function(){this.dialogRef.close()}},{key:"confirm",value:function(){this.dialogRef.close(this.selectedTagsControl.value)}},{key:"noTagsSelected",value:function(){var t;return!(null===(t=this.selectedTagsControl.value)||void 0===t?void 0:t.length)}}]),t}()).\u0275fac=function(t){return new(t||ne)(f.Qb(Q.h),f.Qb(Q.a))},ne.\u0275cmp=f.Kb({type:ne,selectors:[["tag-manager-modal"]],decls:12,vars:10,consts:[[1,"modal-header"],["mat-dialog-title","","trans","",3,"transValues"],["type","button","mat-icon-button","","tabindex","-1",1,"close-button",3,"click"],["svgIcon","close"],[3,"tagType","pluralName","formControl"],["type","button","mat-button","","trans","",1,"cancel-button",3,"click"],["type","button","mat-raised-button","","color","accent","trans","",1,"submit-button",3,"disabled","transValues","click"]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Wb(1,"h2",1),f.Lc(2,"Select :tagName"),f.Vb(),f.Wb(3,"button",2),f.dc("click",(function(){return e.close()})),f.Rb(4,"mat-icon",3),f.Vb(),f.Vb(),f.Wb(5,"mat-dialog-content"),f.Rb(6,"tags-manager",4),f.Vb(),f.Wb(7,"mat-dialog-actions"),f.Wb(8,"button",5),f.dc("click",(function(){return e.close()})),f.Lc(9,"Cancel"),f.Vb(),f.Wb(10,"button",6),f.dc("click",(function(){return e.confirm()})),f.Lc(11,"Merge :tagName"),f.Vb(),f.Vb()),2&t&&(f.Db(1),f.pc("transValues",f.tc(6,ie,e.pluralName)),f.Db(5),f.pc("tagType",e.data.tagType)("pluralName",e.pluralName)("formControl",e.selectedTagsControl),f.Db(4),f.pc("disabled",e.noTagsSelected())("transValues",f.tc(8,ie,e.pluralName)))},directives:[Q.i,g.a,P.b,R.a,Q.f,ae,m.u,m.j,Q.c],styles:["[_nghost-%COMP%]{display:block;width:400px;max-width:100%}.mat-dialog-title[_ngcontent-%COMP%], .submit-button[_ngcontent-%COMP%]{text-transform:capitalize}"],changeDetection:0}),ne);function oe(t,e){if(1&t){var n=f.Xb();f.Wb(0,"tr"),f.Wb(1,"td"),f.Lc(2),f.Vb(),f.Wb(3,"td"),f.Lc(4),f.Vb(),f.Wb(5,"td",5),f.Wb(6,"button",6),f.dc("click",(function(){f.Ac(n);var t=e.$implicit;return f.hc().detachTag(t)})),f.Rb(7,"mat-icon",7),f.Vb(),f.Vb(),f.Vb()}if(2&t){var a=e.$implicit;f.Db(2),f.Mc(a.name),f.Db(2),f.Mc(a.display_name||"-")}}function ce(t,e){1&t&&(f.Wb(0,"no-results-message",8),f.Wb(1,"span",9),f.Lc(2,"Nothing to display"),f.Vb(),f.Vb())}var se,le=((se=function(){function t(e,n,a,i){r(this,t),this.store=e,this.modal=n,this.toast=a,this.datatable=i}return c(t,[{key:"ngOnInit",value:function(){var t=this;this.datatable.init(),this.getTagObservable().subscribe((function(e){t.datatable.data=e||[]}))}},{key:"ngOnDestroy",value:function(){this.datatable.destroy()}},{key:"openTagManagerModal",value:function(){var t=this;this.modal.open(re,{tagType:this.type,pluralName:"production_country"===this.type?"countries":this.type+"s"}).beforeClosed().subscribe((function(e){e&&e.length&&t.store.dispatch(new u.d(e,t.type))}))}},{key:"detachTag",value:function(t){var e=this;this.store.dispatch(new u.n(t)).subscribe((function(){e.toast.open(W.a.TAG_DETACH_SUCCESS)}))}},{key:"getTagObservable",value:function(){return this.store.select("keyword"===this.type?d.a.keywords:"genre"===this.type?d.a.genres:d.a.countries)}}]),t}()).\u0275fac=function(t){return new(t||se)(f.Qb(b.g),f.Qb(A.a),f.Qb(O.b),f.Qb(rt.a))},se.\u0275cmp=f.Kb({type:se,selectors:[["tags-panel"]],inputs:{type:"type",displayType:"displayType"},features:[f.Cb([rt.a])],decls:18,vars:12,consts:[["mat-raised-button","","color","accent","leftContent","",3,"click"],[1,"material-table"],["table-sort-header","","trans",""],[4,"ngFor","ngForOf"],["svgImage","folder.svg",4,"ngIf"],[1,"edit-column"],["mat-icon-button","",3,"click"],["svgIcon","close"],["svgImage","folder.svg"],["primary-text","","trans",""]],template:function(t,e){1&t&&(f.Wb(0,"datatable-header"),f.Wb(1,"button",0),f.dc("click",(function(){return e.openTagManagerModal()})),f.Lc(2),f.ic(3,"trans"),f.ic(4,"trans"),f.Vb(),f.Vb(),f.Wb(5,"table",1),f.Wb(6,"thead"),f.Wb(7,"tr"),f.Wb(8,"th",2),f.Lc(9,"Name"),f.Vb(),f.Wb(10,"th",2),f.Lc(11,"Display Name"),f.Vb(),f.Rb(12,"th"),f.Vb(),f.Vb(),f.Wb(13,"tbody"),f.Jc(14,oe,8,2,"tr",3),f.ic(15,"async"),f.Vb(),f.Vb(),f.Jc(16,ce,3,0,"no-results-message",4),f.ic(17,"async")),2&t&&(f.Db(2),f.Oc(" ",f.jc(3,4,"Add")," ",f.jc(4,6,e.displayType||e.type+"s")," "),f.Db(12),f.pc("ngForOf",f.jc(15,8,e.datatable.data$)),f.Db(2),f.pc("ngIf",!f.jc(17,10,e.datatable.data$).length))},directives:[ot.a,P.b,st.a,g.a,o.s,o.t,R.a,lt.a],pipes:[S.a,o.b],styles:["[_nghost-%COMP%]{padding:0}"],changeDetection:0}),se),be=a("/be1");function ue(t,e){1&t&&f.Rb(0,"primary-facts-panel",15)}function de(t,e){1&t&&f.Rb(0,"seasons-panel",15)}function pe(t,e){1&t&&f.Rb(0,"images-panel",15)}function fe(t,e){if(1&t&&f.Rb(0,"video-index",16),2&t){var n=f.hc(2);f.pc("title",n.title)}}function ge(t,e){if(1&t&&f.Rb(0,"credits-panel",17),2&t){var n=f.hc(2);f.pc("mediaItem",n.title)}}function he(t,e){if(1&t&&f.Rb(0,"credits-panel",18),2&t){var n=f.hc(2);f.pc("mediaItem",n.title)}}function me(t,e){1&t&&f.Rb(0,"tags-panel",19)}function ve(t,e){1&t&&f.Rb(0,"tags-panel",20)}function ye(t,e){1&t&&f.Rb(0,"tags-panel",21)}function Ve(t,e){if(1&t&&f.Rb(0,"reviews-index",16),2&t){var n=f.hc(2);f.pc("title",n.title)}}function xe(t,e){1&t&&(f.Wb(0,"p",22),f.Lc(1,'Save from "Primary Facts" panel in order to enable other menu items.'),f.Vb())}function ke(t,e){if(1&t){var n=f.Xb();f.Ub(0),f.Jc(1,ue,1,0,"primary-facts-panel",1),f.Jc(2,de,1,0,"seasons-panel",1),f.Jc(3,pe,1,0,"images-panel",1),f.Jc(4,fe,1,1,"video-index",2),f.Jc(5,ge,1,1,"credits-panel",3),f.Jc(6,he,1,1,"credits-panel",4),f.Jc(7,me,1,0,"tags-panel",5),f.Jc(8,ve,1,0,"tags-panel",6),f.Jc(9,ye,1,0,"tags-panel",7),f.Jc(10,Ve,1,1,"reviews-index",2),f.Wb(11,"aside",8),f.Wb(12,"div",9),f.Lc(13,"Edit"),f.Vb(),f.Wb(14,"div",10),f.Wb(15,"button",11),f.dc("click",(function(){return f.Ac(n),f.hc().openPanel("primaryFacts")})),f.Lc(16,"Primary Facts"),f.Vb(),f.Wb(17,"button",12),f.dc("click",(function(){return f.Ac(n),f.hc().openPanel("seasons")})),f.Lc(18,"Seasons"),f.Vb(),f.Wb(19,"button",12),f.dc("click",(function(){return f.Ac(n),f.hc().openPanel("images")})),f.Lc(20,"Images"),f.Vb(),f.Wb(21,"button",12),f.dc("click",(function(){return f.Ac(n),f.hc().openPanel("videos")})),f.Lc(22,"Videos"),f.Vb(),f.Wb(23,"button",12),f.dc("click",(function(){return f.Ac(n),f.hc().openPanel("cast")})),f.Lc(24,"Cast"),f.Vb(),f.Wb(25,"button",12),f.dc("click",(function(){return f.Ac(n),f.hc().openPanel("crew")})),f.Lc(26,"Crew"),f.Vb(),f.Wb(27,"button",12),f.dc("click",(function(){return f.Ac(n),f.hc().openPanel("genres")})),f.Lc(28,"Genres"),f.Vb(),f.Wb(29,"button",12),f.dc("click",(function(){return f.Ac(n),f.hc().openPanel("keywords")})),f.Lc(30,"Keywords"),f.Vb(),f.Wb(31,"button",12),f.dc("click",(function(){return f.Ac(n),f.hc().openPanel("countries")})),f.Lc(32,"Countries"),f.Vb(),f.Wb(33,"button",12),f.dc("click",(function(){return f.Ac(n),f.hc().openPanel("reviews")})),f.Lc(34,"Reviews"),f.Vb(),f.Vb(),f.Jc(35,xe,2,0,"p",13),f.Vb(),f.Rb(36,"loading-indicator",14),f.ic(37,"async"),f.Tb()}if(2&t){var a=e.ngIf,i=f.hc();f.Db(1),f.pc("ngIf","primaryFacts"===a),f.Db(1),f.pc("ngIf","seasons"===a),f.Db(1),f.pc("ngIf","images"===a),f.Db(1),f.pc("ngIf","videos"===a),f.Db(1),f.pc("ngIf","cast"===a),f.Db(1),f.pc("ngIf","crew"===a),f.Db(1),f.pc("ngIf","keywords"===a),f.Db(1),f.pc("ngIf","genres"===a),f.Db(1),f.pc("ngIf","countries"===a),f.Db(1),f.pc("ngIf","reviews"===a),f.Db(5),f.Hb("active","primaryFacts"===a),f.Db(2),f.Hb("active","seasons"===a),f.pc("disabled",!i.titleCreated()),f.Db(2),f.Hb("active","images"===a),f.pc("disabled",!i.titleCreated()),f.Db(2),f.Hb("active","videos"===a),f.pc("disabled",!i.titleCreated()),f.Db(2),f.Hb("active","cast"===a),f.pc("disabled",!i.titleCreated()),f.Db(2),f.Hb("active","crew"===a),f.pc("disabled",!i.titleCreated()),f.Db(2),f.Hb("active","genres"===a),f.pc("disabled",!i.titleCreated()),f.Db(2),f.Hb("active","keywords"===a),f.pc("disabled",!i.titleCreated()),f.Db(2),f.Hb("active","countries"===a),f.pc("disabled",!i.titleCreated()),f.Db(2),f.Hb("active","reviews"===a),f.pc("disabled",!i.titleCreated()),f.Db(2),f.pc("ngIf",!i.titleCreated()),f.Db(1),f.pc("isVisible",f.jc(37,41,i.loading$))}}var Ce,We,we,De,Oe=((Ce=function(){function t(e,n,a){r(this,t),this.store=e,this.router=n,this.route=a,this.activePanel$=new p.a("primaryFacts")}return c(t,[{key:"ngOnInit",value:function(){var t=this;this.route.data.subscribe((function(e){var n,a;t.store.dispatch(new u.o(null===(n=e.api)||void 0===n?void 0:n.title)),t.title=null===(a=e.api)||void 0===a?void 0:a.title})),this.route.queryParams.subscribe((function(e){t.activePanel$.next(e.active||"primaryFacts")})),this.route.snapshot.params.seasonNumber&&this.activePanel$.next("seasons")}},{key:"ngOnDestroy",value:function(){this.store.dispatch(new u.s)}},{key:"openPanel",value:function(t){this.router.navigate([],{queryParams:{active:t}})}},{key:"titleCreated",value:function(){return!!this.store.selectSnapshot(d.a.title).id}}]),t}()).\u0275fac=function(t){return new(t||Ce)(f.Qb(b.g),f.Qb(s.d),f.Qb(s.a))},Ce.\u0275cmp=f.Kb({type:Ce,selectors:[["crupdate-title"]],decls:2,vars:3,consts:[[4,"ngIf"],["class","material-panel crupdate-title-panel",4,"ngIf"],["class","material-panel crupdate-title-panel",3,"title",4,"ngIf"],["class","material-panel crupdate-title-panel","type","cast",3,"mediaItem",4,"ngIf"],["class","material-panel crupdate-title-panel","type","crew",3,"mediaItem",4,"ngIf"],["class","material-panel crupdate-title-panel","type","keyword",4,"ngIf"],["class","material-panel crupdate-title-panel","type","genre",4,"ngIf"],["class","material-panel crupdate-title-panel","type","production_country","displayType","country",4,"ngIf"],[1,"sidebar","material-panel"],["trans","",1,"header"],[1,"list"],["trans","",1,"list-item","no-style",3,"click"],["trans","",1,"list-item","no-style",3,"disabled","click"],["class","message","trans","",4,"ngIf"],[1,"overlay",3,"isVisible"],[1,"material-panel","crupdate-title-panel"],[1,"material-panel","crupdate-title-panel",3,"title"],["type","cast",1,"material-panel","crupdate-title-panel",3,"mediaItem"],["type","crew",1,"material-panel","crupdate-title-panel",3,"mediaItem"],["type","keyword",1,"material-panel","crupdate-title-panel"],["type","genre",1,"material-panel","crupdate-title-panel"],["type","production_country","displayType","country",1,"material-panel","crupdate-title-panel"],["trans","",1,"message"]],template:function(t,e){1&t&&(f.Jc(0,ke,38,43,"ng-container",0),f.ic(1,"async")),2&t&&f.pc("ngIf",f.jc(1,1,e.activePanel$))},directives:[o.t,g.a,h.a,T,Tt,Qt,Ut.a,xt,le,be.a],pipes:[o.b],styles:[".be-dark-mode crupdate-title .sidebar .header{background-color:transparent;border-bottom:1px solid var(--be-divider-default)}crupdate-title{display:flex;align-items:flex-start;width:100%}crupdate-title .material-panel{flex:1 1 auto;min-height:412px}crupdate-title .material-panel .inline-container,crupdate-title .material-panel form>.input-container{margin-bottom:25px}crupdate-title video-index.material-panel{padding:0}crupdate-title data-table{border:none}crupdate-title .inline-container{display:flex}crupdate-title .inline-container .input-container{flex:1 1 auto}crupdate-title .inline-container .input-container.size-small{flex:1 1 30%}crupdate-title .inline-container .input-container:first-of-type{margin-right:15px}crupdate-title .sidebar{flex:0 0 260px;margin-left:30px;padding:0;overflow:hidden}crupdate-title .sidebar .header{background-color:var(--be-primary-default);color:var(--be-accent-contrast);padding:15px 20px;font-size:1.6rem;font-weight:500}crupdate-title .sidebar .list .list-item{display:block;width:100%;padding:10px 20px;white-space:nowrap;text-transform:capitalize}crupdate-title .sidebar .list .list-item:disabled{color:var(--be-hint-text);cursor:default}crupdate-title .sidebar .list .list-item.active{font-weight:500}crupdate-title .sidebar .list .list-item:not(:disabled):hover{cursor:pointer}crupdate-title .sidebar .message{margin:8px 20px;padding-top:8px;font-size:1.3rem;color:var(--be-secondary-text);border-top:1px solid var(--be-divider-lighter)}@media only screen and (max-width:768px){crupdate-title{display:block}crupdate-title primary-facts-panel.material-panel{border:none}crupdate-title primary-facts-panel.material-panel .poster-container{display:block}crupdate-title primary-facts-panel.material-panel .many-inputs{margin-left:0}crupdate-title primary-facts-panel.material-panel img{margin:0 auto 20px}crupdate-title .sidebar{margin:30px 20px 0}crupdate-title .inline-container{display:block}crupdate-title .inline-container .input-container:first-of-type{margin-bottom:20px}}.crupdate-title-panel .table-header,crupdate-episode-modal .table-header{display:flex;align-items:center;margin-bottom:15px}.crupdate-title-panel .table-header .mat-raised-button,crupdate-episode-modal .table-header .mat-raised-button{text-transform:capitalize}.crupdate-title-panel .table-header .input-container,crupdate-episode-modal .table-header .input-container{max-width:300px;margin-left:auto;position:relative}.crupdate-title-panel .table-header .input-container .mat-icon,crupdate-episode-modal .table-header .input-container .mat-icon{position:absolute;top:11px;right:8px}.crupdate-title-panel no-results-message,crupdate-episode-modal no-results-message{margin-top:50px;margin-bottom:50px}.crupdate-title-panel .mat-column-edit,crupdate-episode-modal .mat-column-edit{max-width:100px;color:var(--be-secondary-text)}"],encapsulation:2,changeDetection:0}),Object(l.b)([Object(b.d)(d.a.loading)],Ce.prototype,"loading$",void 0),Ce),Ie=a("JIr8"),Pe=a("5+tZ"),Le=a("LRne"),Re=a("EY2u"),_e=[{path:"",component:Oe,resolve:{api:(We=function(){function t(e,n,a){r(this,t),this.router=e,this.store=n,this.titles=a}return c(t,[{key:"resolve",value:function(t,e){var n=this;return t.params.titleId?this.titles.get(t.params.titleId,{fullCredits:!0,keywords:!0,countries:!0,seasons:!0,skipUpdating:!0,allVideos:!0}).pipe(Object(Ie.a)((function(){return n.router.navigate(n.fallbackUri(e)),Re.a})),Object(Pe.a)((function(t){return t?Object(Le.a)(t):(n.router.navigate(n.fallbackUri(e)),Re.a)}))):Object(Le.a)(null)}},{key:"fallbackUri",value:function(t){return t.url.includes("admin")?["/admin/titles"]:[t.url.replace("/edit","")]}}]),t}(),We.\u0275fac=function(t){return new(t||We)(f.ac(s.d),f.ac(b.g),f.ac(D.a))},We.\u0275prov=f.Mb({token:We,factory:We.\u0275fac,providedIn:"root"}),We)},data:{permissions:["titles.update"]}}],Se=((we=function t(){r(this,t)}).\u0275mod=f.Ob({type:we}),we.\u0275inj=f.Nb({factory:function(t){return new(t||we)},imports:[[s.h.forChild(_e)],s.h]}),we),Me=a("6rvT"),$e=a("Iysn"),je=a("ZFTr"),Te=a("k3xQ"),Ee=a("X3pI"),Ae=a("NWPP"),Ne=a("1ImS"),Fe=a("CHUN"),Qe=a("99o5"),Je=((De=function t(){r(this,t)}).\u0275mod=f.Ob({type:De}),De.\u0275inj=f.Nb({factory:function(t){return new(t||De)},imports:[[o.c,Se,Me.a,m.o,m.E,$e.a,je.a,Te.a,Ee.a,Ae.a,Ne.a,Fe.a,Qe.a,P.c,R.b,L.b,Q.g,F.g,_.c,N.b,ct.f,K.b]]}),De)},"/be1":function(t,e,n){"use strict";n.d(e,"a",(function(){return Q}));var a,i=n("Xmgp"),o=n("HSW/"),s=n("2hX1"),l=n("r2Ys"),b=n("fXoL"),u=n("QGXG"),d=n("twBr"),p=n("kmQS"),f=n("q18H"),g=n("i2dy"),h=n("EAOp"),m=n("ofXK"),v=n("Ivca"),y=n("Um6Z"),V=n("Rd8u"),x=n("rcZy"),k=n("bTqV"),C=n("3Pt+"),W=n("MNfM"),w=n("8ZjS"),D=((a=function(){function t(e,n){r(this,t),this.fb=e,this.datable=n,this.form=this.fb.group({type:null,user:null,title:null,season:null,episode:null})}return c(t,[{key:"ngOnInit",value:function(){var t=this;this.form.patchValue(Object.assign({title:this.title},this.datable.filters$.value)),this.title&&this.form.get("title").disable(),this.form.valueChanges.subscribe((function(e){t.datable.filters$.next(e)}))}}]),t}()).\u0275fac=function(t){return new(t||a)(b.Qb(C.h),b.Qb(s.a))},a.\u0275cmp=b.Kb({type:a,selectors:[["review-index-filters"]],inputs:{title:"title"},decls:15,vars:3,consts:[[1,"many-inputs",3,"formGroup"],[1,"input-container"],["for","review-type-filter","trans",""],["id","review-type-filter","formControlName","type"],["trans","",3,"ngValue"],["value","review","trans",""],["value","rating","trans",""],["formControlName","user"],[3,"formGroup"]],template:function(t,e){1&t&&(b.Wb(0,"div",0),b.Wb(1,"div",1),b.Wb(2,"label",2),b.Lc(3,"Type"),b.Vb(),b.Wb(4,"select",3),b.Wb(5,"option",4),b.Lc(6,"All"),b.Vb(),b.Wb(7,"option",5),b.Lc(8,"Review"),b.Vb(),b.Wb(9,"option",6),b.Lc(10,"Rating"),b.Vb(),b.Vb(),b.Vb(),b.Wb(11,"div",1),b.Rb(12,"select-user-input",7),b.Vb(),b.Wb(13,"div",1),b.Rb(14,"select-title-input",8),b.Vb(),b.Vb()),2&t&&(b.pc("formGroup",e.form),b.Db(5),b.pc("ngValue",null),b.Db(9),b.pc("formGroup",e.form))},directives:[C.v,C.m,V.a,C.G,C.u,C.k,C.z,C.J,W.a,w.a],styles:[""],changeDetection:0}),a),O=n("eKg+"),I=n("NFeN"),P=n("Sn2F"),L=n("Qu3c"),R=n("CH4Q"),_=n("iB19"),S=n("zW5C");function M(t,e){if(1&t){var n=b.Xb();b.Wb(0,"button",15),b.dc("click",(function(){return b.Ac(n),b.hc().openCrupdateReviewModal()})),b.Lc(1,"Add"),b.Vb()}}function $(t,e){if(1&t){var n=b.Xb();b.Wb(0,"button",16),b.dc("click",(function(){return b.Ac(n),b.hc().maybeDeleteSelectedReviews()})),b.Lc(1,"Delete Selected"),b.Vb()}}function j(t,e){if(1&t&&b.Rb(0,"review-index-filters",17),2&t){var n=b.hc();b.pc("title",n.title)}}function T(t,e){if(1&t&&(b.Ub(0),b.Rb(1,"img",30),b.Wb(2,"span"),b.Lc(3),b.Vb(),b.Tb()),2&t){var n=b.hc().$implicit;b.Db(1),b.pc("src",n.reviewable.poster,b.Dc),b.Db(2),b.Mc(n.reviewable.name)}}function E(t,e){if(1&t){var n=b.Xb();b.Wb(0,"button",31),b.dc("click",(function(){b.Ac(n);var t=b.hc().$implicit;return b.hc().openCrupdateReviewModal(t)})),b.ic(1,"trans"),b.Rb(2,"mat-icon",32),b.Vb()}2&t&&b.pc("matTooltip",b.jc(1,1,"Edit review"))}function A(t,e){if(1&t&&(b.Wb(0,"tr"),b.Rb(1,"td",18),b.Wb(2,"td",19),b.Rb(3,"mat-icon",20),b.Wb(4,"span"),b.Lc(5),b.Vb(),b.Vb(),b.Wb(6,"td",21),b.Rb(7,"user-column",22),b.Vb(),b.Wb(8,"td",23),b.Wb(9,"div",24),b.Jc(10,T,4,2,"ng-container",25),b.Vb(),b.Vb(),b.Wb(11,"td",26),b.Lc(12),b.Vb(),b.Wb(13,"td",27),b.Lc(14),b.ic(15,"formattedDate"),b.Vb(),b.Wb(16,"td",28),b.Jc(17,E,3,3,"button",29),b.Vb(),b.Vb()),2&t){var n=e.$implicit,a=b.hc();b.Db(1),b.pc("table-body-checkbox",n.id),b.Db(4),b.Nc("",n.score,"/10"),b.Db(2),b.pc("user",n.user),b.Db(3),b.pc("ngIf",n.reviewable),b.Db(2),b.Mc(n.body?"Review":"Rating"),b.Db(2),b.Mc(b.jc(15,7,n.updated_at)),b.Db(3),b.pc("ngIf",a.currentUser.hasPermission("reviews.update"))}}function N(t,e){1&t&&(b.Wb(0,"no-results-message",33),b.Wb(1,"span",34),b.Lc(2,"No reviews have been created yet"),b.Vb(),b.Vb())}var F,Q=((F=function(){function t(e,n,a,i,o,c,s){r(this,t),this.datatable=e,this.reviews=n,this.modal=a,this.currentUser=i,this.settings=o,this.urls=c,this.toast=s,this.reviews$=this.datatable.data$}return c(t,[{key:"ngOnInit",value:function(){this.datatable.paginator.dontUpdateQueryParams=!!this.title;var t={uri:i.a.BASE_URI,staticParams:{with:["user","reviewable"]}};this.title&&(t.staticParams={titleId:this.title.id}),this.datatable.init(t)}},{key:"openCrupdateReviewModal",value:function(t){var e,n;this.datatable.openCrupdateResourceModal(o.a,{review:t,mediaId:null===(e=this.title)||void 0===e?void 0:e.id,mediaType:null===(n=this.title)||void 0===n?void 0:n.type}).subscribe()}},{key:"maybeDeleteSelectedReviews",value:function(){var t=this;this.datatable.confirmResourceDeletion("reviews").subscribe((function(){t.reviews.delete(t.datatable.selectedRows$.value).subscribe((function(){t.toast.open(l.a.REVIEW_DELETE_SUCCESS),t.datatable.reset()}))}))}}]),t}()).\u0275fac=function(t){return new(t||F)(b.Qb(s.a),b.Qb(i.a),b.Qb(u.a),b.Qb(d.a),b.Qb(p.a),b.Qb(f.a),b.Qb(g.b))},F.\u0275cmp=b.Kb({type:F,selectors:[["reviews-index"]],inputs:{title:"title"},features:[b.Cb([s.a])],decls:28,vars:8,consts:[[1,"datatable","responsive-table"],["pluralResourceName","reviews"],["leftContent",""],["mat-raised-button","","color","accent","trans","",3,"click",4,"ngIf"],["rightContent","","mat-raised-button","","color","accent","trans","",3,"click",4,"ngIf"],["tableFilters",""],[1,"material-table"],["table-header-checkbox",""],["table-sort-header","","trans",""],["table-sort-header","user_id","trans",""],["table-sort-header","media_item_id","trans",""],["table-sort-header","body","trans",""],["table-sort-header","updated_at","trans",""],[4,"ngFor","ngForOf"],["svgImage","like-dislike.svg",4,"ngIf"],["mat-raised-button","","color","accent","trans","",3,"click"],["rightContent","","mat-raised-button","","color","accent","trans","",3,"click"],[3,"title"],[3,"table-body-checkbox"],["data-label","Score"],["svgIcon","star-border",1,"star-icon"],["data-label","User"],[3,"user"],["data-label","Reviewable"],[1,"column-with-image"],[4,"ngIf"],["data-label","Type"],["data-label","Last Updated"],[1,"edit-column"],["mat-icon-button","",3,"matTooltip","click",4,"ngIf"],["alt","reviewable image",3,"src"],["mat-icon-button","",3,"matTooltip","click"],["svgIcon","edit"],["svgImage","like-dislike.svg"],["primary-text","","trans",""]],template:function(t,e){1&t&&(b.Wb(0,"div",0),b.Wb(1,"datatable-header",1),b.Ub(2,2),b.Jc(3,M,2,0,"button",3),b.Tb(),b.Jc(4,$,2,0,"button",4),b.Jc(5,j,1,1,"ng-template",null,5,b.Kc),b.Vb(),b.Wb(7,"table",6),b.Wb(8,"thead"),b.Wb(9,"tr"),b.Rb(10,"th",7),b.Wb(11,"th",8),b.Lc(12,"Score"),b.Vb(),b.Wb(13,"th",9),b.Lc(14,"Owner"),b.Vb(),b.Wb(15,"th",10),b.Lc(16,"Reviewable"),b.Vb(),b.Wb(17,"th",11),b.Lc(18,"Type"),b.Vb(),b.Wb(19,"th",12),b.Lc(20,"Last Updated"),b.Vb(),b.Rb(21,"th"),b.Vb(),b.Vb(),b.Wb(22,"tbody"),b.Jc(23,A,18,9,"tr",13),b.ic(24,"async"),b.Vb(),b.Vb(),b.Jc(25,N,3,0,"no-results-message",14),b.ic(26,"async"),b.Rb(27,"datatable-footer"),b.Vb()),2&t&&(b.Db(3),b.pc("ngIf",e.currentUser.hasPermission("reviews.create")),b.Db(1),b.pc("ngIf",e.currentUser.hasPermission("reviews.delete")),b.Db(19),b.pc("ngForOf",b.jc(24,4,e.reviews$)),b.Db(2),b.pc("ngIf",b.jc(26,6,e.datatable.paginator.noResults$)))},directives:[h.a,m.t,v.a,y.a,V.a,m.s,x.a,k.b,D,O.a,I.a,P.a,L.a,R.a],pipes:[m.b,_.a,S.a],styles:[".star-icon[_ngcontent-%COMP%]{vertical-align:middle;margin-right:5px}"],changeDetection:0}),F)},"1ImS":function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var a=n("ofXK"),i=n("NFeN"),o=n("6rvT"),c=n("bSwM"),s=n("3Pt+"),l=n("bTqV"),b=n("A5z7"),u=n("bv9b"),d=n("0Gur"),p=n("Iysn"),f=n("fXoL"),g=function(){var t=function t(){r(this,t)};return t.\u0275mod=f.Ob({type:t}),t.\u0275inj=f.Nb({factory:function(e){return new(e||t)},imports:[[a.c,o.a,s.E,s.o,d.a,p.a,l.c,i.b,c.b,b.e,u.b],c.b]}),t}()},"2hX1":function(n,a,o){"use strict";o.d(a,"a",(function(){return R}));var s,l=o("2Vo4"),b=o("itXk"),u=o("LRne"),d=o("lJxs"),p=o("eIep"),f=o("vkgz"),g=o("fXoL"),h=o("tyNb"),m=o("LRXf"),v=o("ahrr"),y=((s=function(){function t(e,n,a){var i=this;r(this,t),this.router=e,this.http=n,this.localStorage=a,this.params$=new l.a({}),this.paginatedOnce$=new l.a(!1),this.loading$=new l.a(!1),this.response$=new l.a(null),this.dontUpdateQueryParams=!1,this.perPageCacheKey=null,this.noResults$=this.response$.pipe(Object(d.a)((function(t){return i.paginatedOnce$.value&&0===t.pagination.data.length})))}return c(t,[{key:"paginate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=this.subscription?{}:this.currentQueryParams();this.params$.next(Object.assign(Object.assign(Object.assign({},this.response$.value?{perPage:this.response$.value.pagination.per_page,page:this.response$.value.pagination.current_page}:{}),a),t)),this.subscription||this.init(e,n)}},{key:"nextPage",value:function(){var t=this.response$.value.pagination.current_page,e=this.response$.value.pagination.total,n=t+1;this.paginate(Object.assign(Object.assign({},this.params$.value),{page:!t||n>e?t:n}))}},{key:"previousPage",value:function(){var t=this.response$.value.pagination.current_page;this.paginate(Object.assign(Object.assign({},this.params$.value),{page:t-1||1}))}},{key:"changePerPage",value:function(t){var e;t!==(null===(e=this.params$.value)||void 0===e?void 0:e.perPage)&&(this.perPageCacheKey&&this.localStorage.set(this.perPageCacheKey,t),this.paginate(Object.assign(Object.assign({},this.params$.value),{perPage:t})))}},{key:"currentQueryParams",value:function(){return this.router.routerState.root.snapshot.queryParams}},{key:"init",value:function(t,e){var n=this;this.subscription=this.params$.pipe(Object(p.a)((function(a){n.loading$.next(!0);var i=!n.paginatedOnce$.value;return i&&n.perPageCacheKey&&n.localStorage.get(n.perPageCacheKey)&&(a=Object.assign({perPage:n.localStorage.get(n.perPageCacheKey)},a)),(i&&e?Object(u.a)({pagination:e}):n.http.get(t,a)).pipe(Object(f.a)((function(){n.updateQueryParams(a),n.loading$.next(!1),n.paginatedOnce$.next(!0)}),(function(){n.loading$.next(!1),n.paginatedOnce$.next(!0)})))}))).subscribe((function(t){n.response$.next(t)}))}},{key:"updateQueryParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.dontUpdateQueryParams){for(var e in t)Array.isArray(t[e])&&(t[e]=t[e].join(","));this.router.navigate([],{queryParams:t,replaceUrl:!0})}}},{key:"canLoadNextPage",value:function(){var t,e;return this.response$.value&&this.currentPage<(null===(e=null===(t=this.response$.value)||void 0===t?void 0:t.pagination)||void 0===e?void 0:e.last_page)}},{key:"params",get:function(){return this.params$.value}},{key:"currentPage",get:function(){var t,e;return null===(e=null===(t=this.response$.value)||void 0===t?void 0:t.pagination)||void 0===e?void 0:e.current_page}}]),t}()).\u0275fac=function(t){return new(t||s)(g.ac(h.d),g.ac(m.a),g.ac(v.a))},s.\u0275prov=g.Mb({token:s,factory:s.\u0275fac}),s),V=o("Kj3r"),x=o("Zy1z"),k=o("pLZG"),C=o("F96W"),W=o("/RwR"),w={title:"Delete :resource",body:"Are you sure you want to delete selected :resource?",ok:"Delete"},D=o("hLX6"),O=o("8LU1");function I(t,e){var n=D.pick(e,t);if(Object(O.a)(n)){var a=Number(n);return a<9007199254740991?a:n}return n}var P,L=o("QGXG"),R=((P=function(){function n(t,e,a,i){r(this,n),this.modal=t,this.router=e,this.http=a,this.localStorage=i,this.sort$=new l.a({}),this.filters$=new l.a({}),this.staticParams$=new l.a({}),this.paginator=new y(this.router,this.http,this.localStorage),this.ignoreNextParamChange=!1,this.originalData$=new l.a([]),this.data$=new l.a([]),this.selectedRows$=new l.a([])}return c(n,[{key:"init",value:function(){var n=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.config=a,this.staticParams$.next(Object.assign(Object.assign({},this.staticParams$.value),a.staticParams)),a.uri?this.connectToPaginator():a.initialData&&(this.data=a.initialData),this.mainSub=Object(b.a)([this.sort$,this.filters$,this.staticParams$]).pipe(Object(V.a)(0),Object(d.a)((function(t){return Object.assign.apply(Object,[{}].concat(e(t)))}))).subscribe((function(e){if(n.ignoreNextParamChange)return n.ignoreNextParamChange=!1;e=Object(C.a)(e),Object.entries(e).forEach((function(n){var a=t(n,2),i=a[0],r=a[1];"object"==typeof r&&r.id&&(e[i+"Id"]=r.id,delete e[i])})),n.config.uri?n.paginator.paginate(e,n.config.uri,n.config.initialData):Object.keys(e).length&&n.applyLocalTransforms(e)})),this}},{key:"connectToPaginator",value:function(){var n=this;this.paginatorSub=this.paginator.response$.pipe(Object(x.a)()).subscribe((function(a){var i,r=t(a,2),o=r[0],c=r[1],s=n.config.infiniteScroll&&(null===(i=null==o?void 0:o.pagination)||void 0===i?void 0:i.current_page)!==c.pagination.current_page?[].concat(e(n.data$.value),e(c.pagination.data)):c.pagination.data;n.data$.next(s)}))}},{key:"applyLocalTransforms",value:function(t){var n=e(this.originalData$.value);t.query&&(n=function(t,e){return t.filter((function(t){return function(t,e){var n=function t(e){return Object.keys(e).reduce((function(n,a){return n+(e[a]&&"object"==typeof e[a]?t(e[a]):e[a])+"\u25ec"}),"").toLowerCase()}(t),a=e.trim().toLowerCase();return-1!==n.indexOf(a)}(t,e)}))}(n,t.query)),t.orderBy&&t.orderDir&&(n=function(t,e,n){return t.sort((function(t,a){var i=I(t,e),r=I(a,e),o=typeof i,c=typeof r;o!==c&&("number"===o&&(i+=""),"number"===c&&(r+=""));var s=0;return null!=i&&null!=r?i>r?s=1:i<r&&(s=-1):null!=i?s=1:null!=r&&(s=-1),s*("asc"===n?1:-1)}))}(n,t.orderBy,t.orderDir)),this.data$.next(n)}},{key:"addFilter",value:function(t,e){this.filters$.next(Object.assign(Object.assign({},this.filters$.value),i({},t,e)))}},{key:"removeFilter",value:function(t){var e=Object.assign({},this.filters$.value);delete e[t],this.filters$.next(e)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.filters$.next({}),this.sort$.next({}),this.selectedRows$.next([]),t&&this.staticParams$.next(t)}},{key:"openCrupdateResourceModal",value:function(t,e,n){var a=this;return this.modal.open(t,e,n).beforeClosed().pipe(Object(k.a)((function(t){return!!t})),Object(f.a)((function(){return a.reset()})))}},{key:"confirmResourceDeletion",value:function(t){var e=Object.assign(Object.assign({},w),{replacements:{resource:t}});return this.modal.open(W.a,e).afterClosed().pipe(Object(k.a)((function(t){return t})))}},{key:"getCurrentParams",value:function(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.sort$.value),this.filters$.value),this.staticParams$.value),this.paginator.params)}},{key:"destroy",value:function(){var t,e;null===(t=this.paginatorSub)||void 0===t||t.unsubscribe(),null===(e=this.mainSub)||void 0===e||e.unsubscribe()}},{key:"data",get:function(){return this.data$.value},set:function(t){var n=e(t);this.originalData$.next(n),this.data$.next(n),this.ignoreNextParamChange=!0,this.reset()}}]),n}()).\u0275fac=function(t){return new(t||P)(g.ac(L.a),g.ac(h.d),g.ac(m.a),g.ac(v.a))},P.\u0275prov=g.Mb({token:P,factory:P.\u0275fac}),P)},CHUN:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var a=n("ofXK"),i=n("bTqV"),o=n("NFeN"),c=n("STbY"),s=n("6rvT"),l=n("3Pt+"),b=n("X3pI"),u=n("fXoL"),d=function(){var t=function t(){r(this,t)};return t.\u0275mod=u.Ob({type:t}),t.\u0275inj=u.Nb({factory:function(e){return new(e||t)},imports:[[a.c,i.c,c.b,s.a,l.E,o.b,b.a]]}),t}()},CZpq:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var a=n("fXoL"),i=n("LRXf"),o=function(){var t=function(){function t(e){r(this,t),this.http=e}return c(t,[{key:"index",value:function(e){return this.http.get(t.BASE_URI,e)}},{key:"create",value:function(e){return this.http.post(t.BASE_URI,e)}},{key:"update",value:function(e,n){return this.http.put("".concat(t.BASE_URI,"/").concat(e),n)}},{key:"delete",value:function(e){return this.http.delete("".concat(t.BASE_URI,"/").concat(e))}}]),t}();return t.BASE_URI="tags",t.\u0275fac=function(e){return new(e||t)(a.ac(i.a))},t.\u0275prov=a.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},EAOp:function(t,e,n){"use strict";n.d(e,"a",(function(){return J}));var a=n("fXoL"),i=[{originX:"start",originY:"center",overlayX:"end",overlayY:"center",offsetX:5},{originX:"end",originY:"center",overlayX:"start",overlayY:"center",offsetX:5}],o=n("nPOm"),s=n("0IaG"),l=n("ZfYz"),b=n("NFeN"),u=n("Rd8u"),d=n("3Pt+"),p=n("ofXK"),f=n("bTqV");function g(t,e){1&t&&a.Sb(0)}var h,m=((h=function(){function t(e,n){r(this,t),this.data=e,this.overlayPanelRef=n}return c(t,[{key:"close",value:function(){this.overlayPanelRef.close()}}]),t}()).\u0275fac=function(t){return new(t||h)(a.Qb(o.a),a.Qb(l.a))},h.\u0275cmp=a.Kb({type:h,selectors:[["datatable-filters-panel"]],hostVars:1,hostBindings:function(t,e){2&t&&a.Rc("@dialogContainer","enter")},decls:9,vars:1,consts:[["svgIcon","filter-list"],["trans",""],[1,"body",3,"ngSubmit"],[4,"ngTemplateOutlet"],["type","button","mat-button","","color","accent","trans","",3,"click"]],template:function(t,e){1&t&&(a.Wb(0,"header"),a.Rb(1,"mat-icon",0),a.Wb(2,"span",1),a.Lc(3,"Filters"),a.Vb(),a.Vb(),a.Wb(4,"form",2),a.dc("ngSubmit",(function(){return e.close()})),a.Jc(5,g,1,0,"ng-container",3),a.Vb(),a.Wb(6,"footer"),a.Wb(7,"button",4),a.dc("click",(function(){return e.close()})),a.Lc(8,"Close"),a.Vb(),a.Vb()),2&t&&(a.Db(5),a.pc("ngTemplateOutlet",e.data.filters))},directives:[b.a,u.a,d.K,d.v,d.w,p.A,f.b],styles:["[_nghost-%COMP%]{display:block;min-width:250px;margin:auto;background-color:var(--be-background);border-radius:4px;box-shadow:0 8px 9px -5px rgba(0,0,0,.2),0 15px 22px 2px rgba(0,0,0,.14),0 6px 28px 5px rgba(0,0,0,.12)}header[_ngcontent-%COMP%]{border-bottom:1px solid var(--be-divider-default);padding:15px 20px;margin-bottom:20px;font-weight:500}header[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{vertical-align:middle;margin-right:5px}.body[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}footer[_ngcontent-%COMP%]{border-top:1px solid var(--be-divider-default);text-align:right;margin-top:10px;padding:10px 20px}"],data:{animation:[s.j.dialogContainer]},changeDetection:0}),h),v=n("lJxs"),y=n("F96W"),V=n("2hX1"),x=n("dz5c"),k=n("bv9b"),C=n("Kj3r"),W=n("/uUt"),w=n("tyNb"),D=n("zW5C");function O(t,e){1&t&&a.Rb(0,"mat-icon",3)}var I,P=((I=function(){function t(e,n){r(this,t),this.datatable=e,this.route=n,this.searchControl=new d.i(this.route.snapshot.queryParams.query),this.hideIcon=!1}return c(t,[{key:"ngOnInit",value:function(){var t=this;this.searchControl.valueChanges.pipe(Object(C.a)(400),Object(W.a)()).subscribe((function(e){t.datatable.addFilter("query",e)}))}}]),t}()).\u0275fac=function(t){return new(t||I)(a.Qb(V.a),a.Qb(w.a))},I.\u0275cmp=a.Kb({type:I,selectors:[["datatable-header-search-input"]],inputs:{placeholder:"placeholder",hideIcon:"hideIcon"},decls:4,vars:5,consts:[[1,"input-container","search-input-container"],["type","text",1,"search-input",3,"placeholder","formControl"],["svgIcon","search",4,"ngIf"],["svgIcon","search"]],template:function(t,e){1&t&&(a.Wb(0,"div",0),a.Rb(1,"input",1),a.ic(2,"trans"),a.Jc(3,O,1,0,"mat-icon",2),a.Vb()),2&t&&(a.Db(1),a.pc("placeholder",a.jc(2,3,e.placeholder))("formControl",e.searchControl),a.Db(2),a.pc("ngIf",!e.hideIcon))},directives:[d.d,d.u,d.j,p.t,b.a],pipes:[D.a],styles:[".input-container[_ngcontent-%COMP%]{min-width:250px;position:relative;flex-shrink:0}.input-container[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{position:absolute;top:calc(50% - 12px);right:5px;color:var(--be-secondary-text)}.icon-left[_nghost-%COMP%]   .mat-icon[_ngcontent-%COMP%], .icon-left   [_nghost-%COMP%]   .mat-icon[_ngcontent-%COMP%]{left:10px;right:0}"],changeDetection:0}),I),L=n("A5z7"),R=["tableFilters"],_=["filterButton"];function S(t,e){1&t&&a.Rb(0,"mat-progress-bar",7)}function M(t,e){1&t&&(a.Wb(0,"div",8),a.nc(1),a.Vb())}function $(t,e){if(1&t&&(a.Wb(0,"div",9),a.Lc(1),a.ic(2,"trans"),a.Vb()),2&t){var n=a.hc();a.Db(1),a.Pc(" ",n.numberOfRowsSelected," ",n.pluralResourceName," ",a.jc(2,3,"Selected")," ")}}function j(t,e){if(1&t){var n=a.Xb();a.Wb(0,"mat-chip",18),a.dc("removed",(function(){a.Ac(n);var t=e.$implicit;return a.hc(3).datatable.removeFilter(t.key)})),a.Lc(1),a.Rb(2,"mat-icon",19),a.Vb()}if(2&t){var i=e.$implicit,r=a.hc(3);a.pc("removable",!0)("selectable",!1),a.Db(1),a.Oc(" ",i.key,": ",r.isModel(i.value)?i.value.name||i.value.display_name:i.value," ")}}function T(t,e){if(1&t){var n=a.Xb();a.Ub(0),a.Wb(1,"mat-chip-list",13),a.Jc(2,j,3,4,"mat-chip",14),a.ic(3,"keyvalue"),a.ic(4,"async"),a.Vb(),a.Wb(5,"button",15,16),a.dc("click",(function(){return a.Ac(n),a.hc(2).openFiltersPanel()})),a.Rb(7,"mat-icon",17),a.Vb(),a.Tb()}if(2&t){var i=a.hc(2);a.Db(2),a.pc("ngForOf",a.jc(3,3,a.jc(4,5,i.filters$))),a.Db(3),a.Hb("active",i.filterPanelRef)}}function E(t,e){if(1&t&&(a.Wb(0,"div",10),a.Jc(1,T,8,7,"ng-container",11),a.Rb(2,"datatable-header-search-input",12),a.Vb()),2&t){var n=a.hc();a.Db(1),a.pc("ngIf",n.filterPanelTemplate),a.Db(1),a.rc("placeholder","Search ",n.pluralResourceName,"")}}function A(t,e){1&t&&(a.Wb(0,"div",20),a.nc(1,1),a.Vb())}var N,F=[[["","leftContent",""]],[["","rightContent",""]]],Q=["[leftContent]","[rightContent]"],J=((N=function(){function t(e,n,a){r(this,t),this.datatable=e,this.cd=n,this.overlayPanel=a,this.showSelectedActions=!0,this.subscriptions=[],this.filters$=this.datatable.filters$.pipe(Object(v.a)((function(t){var e=Object(y.a)(t);return delete e.query,e})))}return c(t,[{key:"ngOnInit",value:function(){var t=this,e=this.datatable.filters$.subscribe((function(){t.filterPanelRef&&t.filterPanelRef.close()})),n=this.datatable.selectedRows$.subscribe((function(e){t.numberOfRowsSelected=e.length,t.cd.markForCheck()}));this.subscriptions=[e,n]}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(t){return t.unsubscribe()}))}},{key:"openFiltersPanel",value:function(){var t=this;if(this.filterPanelRef)this.filterPanelRef.close();else{var e=i.slice();e[0].offsetY=40,e[1].offsetY=40,this.filterPanelRef=this.overlayPanel.open(m,{origin:this.filterButton,position:e,mobilePosition:"center",data:{filters:this.filterPanelTemplate},maxWidth:"90%"}),this.filterButton.nativeElement.classList.add("active"),this.filterPanelRef.afterClosed().subscribe((function(){t.filterPanelRef=null,t.filterButton.nativeElement.classList.remove("active")}))}}},{key:"isModel",value:function(t){return"object"==typeof t&&t.id}}]),t}()).\u0275fac=function(t){return new(t||N)(a.Qb(V.a),a.Qb(a.i),a.Qb(x.a))},N.\u0275cmp=a.Kb({type:N,selectors:[["datatable-header"]],contentQueries:function(t,e,n){var i;1&t&&a.Jb(n,R,!0),2&t&&a.wc(i=a.ec())&&(e.filterPanelTemplate=i.first)},viewQuery:function(t,e){var n;1&t&&a.Sc(_,!0,a.m),2&t&&a.wc(n=a.ec())&&(e.filterButton=n.first)},hostVars:2,hostBindings:function(t,e){2&t&&a.Hb("rows-selected",e.numberOfRowsSelected)},inputs:{pluralResourceName:"pluralResourceName",showSelectedActions:"showSelectedActions"},ngContentSelectors:Q,decls:8,vars:7,consts:[["mode","indeterminate","color","accent",4,"ngIf"],[1,"left-column"],["class","default-left-content",4,"ngIf"],["class","selected-left-content capitalize",4,"ngIf"],[1,"right-column"],["class","default-right-content",4,"ngIf"],["class","selected-right-actions",4,"ngIf"],["mode","indeterminate","color","accent"],[1,"default-left-content"],[1,"selected-left-content","capitalize"],[1,"default-right-content"],[4,"ngIf"],[3,"placeholder"],["aria-label","Active Filters",1,"filter-chip-list"],[3,"removable","selectable","removed",4,"ngFor","ngForOf"],["mat-icon-button","",1,"filter-button",3,"click"],["filterButton",""],["svgIcon","filter-list"],[3,"removable","selectable","removed"],["matChipRemove","","svgIcon","cancel"],[1,"selected-right-actions"]],template:function(t,e){1&t&&(a.oc(F),a.Jc(0,S,1,0,"mat-progress-bar",0),a.ic(1,"async"),a.Wb(2,"div",1),a.Jc(3,M,2,0,"div",2),a.Jc(4,$,3,5,"div",3),a.Vb(),a.Wb(5,"div",4),a.Jc(6,E,3,2,"div",5),a.Jc(7,A,2,0,"div",6),a.Vb()),2&t&&(a.pc("ngIf",a.jc(1,5,e.datatable.paginator&&e.datatable.paginator.loading$)),a.Db(3),a.pc("ngIf",!e.showSelectedActions||!e.numberOfRowsSelected),a.Db(1),a.pc("ngIf",e.showSelectedActions&&e.numberOfRowsSelected),a.Db(2),a.pc("ngIf",!e.showSelectedActions||!e.numberOfRowsSelected),a.Db(1),a.pc("ngIf",e.showSelectedActions&&e.numberOfRowsSelected))},directives:[p.t,k.a,P,L.c,p.s,f.b,b.a,L.a,L.d],pipes:[p.b,D.a,p.l],styles:[".rows-selected[_nghost-%COMP%], .rows-selected   [_nghost-%COMP%]{background-color:var(--be-accent-emphasis);color:var(--be-secondary-text);font-size:1.5rem;border-color:var(--be-divider-default)}[_nghost-%COMP%]{display:flex;align-items:center;height:85px;padding:15px;border-bottom:1px solid transparent;position:relative}.mat-progress-bar[_ngcontent-%COMP%]{position:absolute;top:0;left:0}.left-column[_ngcontent-%COMP%]{margin-right:auto}.right-column[_ngcontent-%COMP%]{margin-left:25px}.default-right-content[_ngcontent-%COMP%]{display:flex;align-items:center}.filter-button[_ngcontent-%COMP%]{margin-right:10px}.active[_ngcontent-%COMP%]{color:var(--be-accent-default)}.mat-chip[_ngcontent-%COMP%]{text-transform:capitalize}  datatable-header info-popover{margin-left:10px}"],changeDetection:0}),N)},F96W:function(t,e,n){"use strict";function a(t){var e=Object.assign({},t);return Object.keys(e).forEach((function(t){return(null==e[t]||""===e[t])&&delete e[t]})),e}n.d(e,"a",(function(){return a}))},Ivca:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var a=n("fXoL"),i=n("2hX1"),o=n("bSwM"),s=["table-header-checkbox",""],l=function(){var t=function(){function t(e,n){r(this,t),this.datatable=e,this.cd=n}return c(t,[{key:"ngOnInit",value:function(){var t=this;this.changeRef=this.datatable.selectedRows$.subscribe((function(){t.cd.markForCheck()}))}},{key:"ngOnDestroy",value:function(){this.changeRef.unsubscribe()}},{key:"anyRowsSelected",value:function(){return!!this.datatable.selectedRows$.value.length}},{key:"allRowsSelected",value:function(){var t;return this.datatable.selectedRows$.value.length&&this.datatable.selectedRows$.value.length===(null===(t=this.datatable.data$.value)||void 0===t?void 0:t.length)}},{key:"toggleAllRows",value:function(){this.allRowsSelected()?this.datatable.selectedRows$.next([]):this.datatable.selectedRows$.next(this.datatable.data$.value.map((function(t){return t.id})))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.Qb(i.a),a.Qb(a.i))},t.\u0275cmp=a.Kb({type:t,selectors:[["","table-header-checkbox",""]],hostAttrs:[1,"table-checkbox"],attrs:s,decls:1,vars:2,consts:[[3,"checked","indeterminate","change"]],template:function(t,e){1&t&&(a.Wb(0,"mat-checkbox",0),a.dc("change",(function(t){return t?e.toggleAllRows():null})),a.Vb()),2&t&&a.pc("checked",e.allRowsSelected())("indeterminate",e.anyRowsSelected()&&!e.allRowsSelected())},directives:[o.a],encapsulation:2,changeDetection:0}),t}()},MNfM:function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var a=n("Kj3r"),i=n("/uUt"),o=n("eIep"),s=n("JIr8"),l=n("nYR2"),b=n("3Pt+"),u=n("2Vo4"),d=n("LRne"),p=n("fXoL"),f=n("mWN8"),g=n("Rd8u"),h=n("STbY"),m=n("ofXK"),v=n("FBzJ"),y=n("bTqV"),V=n("NFeN"),x=["searchInput"];function k(t,e){if(1&t&&(p.Wb(0,"span"),p.Rb(1,"img",20),p.Lc(2),p.Vb()),2&t){var n=e.ngIf;p.Db(1),p.pc("src",n.avatar,p.Dc),p.Db(1),p.Nc("",n.display_name," ")}}function C(t,e){1&t&&(p.Wb(0,"span",21),p.Lc(1,"Any"),p.Vb())}function W(t,e){if(1&t){var n=p.Xb();p.Wb(0,"button",22),p.dc("click",(function(){return p.Ac(n),p.hc().clearSearchInput()})),p.Rb(1,"mat-icon",23),p.Vb()}}function w(t,e){if(1&t){var n=p.Xb();p.Wb(0,"div",14),p.dc("click",(function(){p.Ac(n);var t=e.$implicit;return p.hc().selectUser(t)})),p.Rb(1,"img",24),p.Wb(2,"div",25),p.Wb(3,"div",26),p.Lc(4),p.Vb(),p.Wb(5,"div",27),p.Lc(6),p.Vb(),p.Vb(),p.Vb()}if(2&t){var a=e.$implicit;p.Db(1),p.pc("src",a.avatar,p.Dc),p.Db(3),p.Mc(a.display_name),p.Db(2),p.Mc(a.email)}}function D(t,e){1&t&&(p.Wb(0,"div",28),p.Lc(1,"No users found."),p.Vb())}var O=function(){var t=function(){function t(e){r(this,t),this.users=e,this.searchFormControl=new b.i,this.loading$=new u.a(!1),this.users$=new u.a([]),this.selectedUser$=new u.a(null),this.searchedOnce=!1}return c(t,[{key:"ngOnInit",value:function(){this.bindToSearchControl()}},{key:"writeValue",value:function(t){"object"==typeof t&&this.selectedUser$.next(t)}},{key:"registerOnChange",value:function(t){this.propagateChange=t}},{key:"registerOnTouched",value:function(){}},{key:"bindToSearchControl",value:function(){var t=this;this.searchFormControl.valueChanges.pipe(Object(a.a)(150),Object(i.a)(),Object(o.a)((function(e){return t.searchUsers(e)})),Object(s.a)((function(){return Object(d.a)([])}))).subscribe((function(e){t.searchedOnce=!0,t.users$.next(e)}))}},{key:"searchUsers",value:function(t){var e=this;return this.loading$.next(!0),this.users.getAll({query:t,perPage:7}).pipe(Object(l.a)((function(){return e.loading$.next(!1)})))}},{key:"onMenuOpened",value:function(){var t=this;this.searchedOnce||this.clearSearchInput(),setTimeout((function(){t.searchInput.nativeElement.focus()}))}},{key:"selectUser",value:function(t){this.selectedUser$.next(t),this.propagateChange(t)}},{key:"clearSearchInput",value:function(){this.searchFormControl.setValue("")}},{key:"onMenuClosed",value:function(){this.loading$.next(!1),this.clearSearchInput()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(p.Qb(f.a))},t.\u0275cmp=p.Kb({type:t,selectors:[["select-user-input"]],viewQuery:function(t,e){var n;1&t&&p.Hc(x,!0),2&t&&p.wc(n=p.ec())&&(e.searchInput=n.first)},features:[p.Cb([{provide:b.s,useExisting:t,multi:!0}])],decls:28,vars:16,consts:[[1,"input-container"],["trans","",1,"fake-label"],["tabindex","0",1,"fake-input",3,"matMenuTriggerFor","menuOpened","menuClosed"],[4,"ngIf","ngIfElse"],["anyUser",""],[1,"arrow-container"],[1,"arrow"],["menu","matMenu"],[1,"input-container","search-input-container",3,"click"],[1,"search-input-wrapper"],["type","text","placeholder","Search...","trans-placeholder","",3,"formControl","blur"],["searchInput",""],["class","clear-search-input-button","mat-icon-button","",3,"click",4,"ngIf"],[1,"small",3,"isVisible"],["mat-menu-item","",3,"click"],["src","client/assets/images/anonymous-user.png","alt",""],[1,"info","any-user-info"],["trans","",1,"name"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["class","nothing-found-item","aria-disabled","true","mat-menu-item","","disabled","","trans","",4,"ngIf"],[3,"src"],["trans",""],["mat-icon-button","",1,"clear-search-input-button",3,"click"],["svgIcon","close"],["alt","",3,"src"],[1,"user-info"],[1,"name"],[1,"email"],["aria-disabled","true","mat-menu-item","","disabled","","trans","",1,"nothing-found-item"]],template:function(t,e){if(1&t){var n=p.Xb();p.Wb(0,"div",0),p.Wb(1,"div",1),p.Lc(2,"User"),p.Vb(),p.Wb(3,"div",2),p.dc("menuOpened",(function(){return e.onMenuOpened()}))("menuClosed",(function(){return e.onMenuClosed()})),p.Jc(4,k,3,2,"span",3),p.ic(5,"async"),p.Jc(6,C,2,0,"ng-template",null,4,p.Kc),p.Wb(8,"div",5),p.Rb(9,"div",6),p.Vb(),p.Vb(),p.Vb(),p.Wb(10,"mat-menu",null,7),p.Wb(12,"div",8),p.dc("click",(function(t){return t.stopPropagation()})),p.Wb(13,"div",9),p.Wb(14,"input",10,11),p.dc("blur",(function(){return p.Ac(n),p.xc(15).focus()})),p.Vb(),p.Jc(16,W,2,0,"button",12),p.Rb(17,"loading-indicator",13),p.ic(18,"async"),p.Vb(),p.Vb(),p.Wb(19,"div",14),p.dc("click",(function(){return e.selectUser(null)})),p.Rb(20,"img",15),p.Wb(21,"div",16),p.Wb(22,"div",17),p.Lc(23,"Any User"),p.Vb(),p.Vb(),p.Vb(),p.Jc(24,w,7,3,"div",18),p.ic(25,"async"),p.Jc(26,D,2,0,"div",19),p.ic(27,"async"),p.Vb()}if(2&t){var a=p.xc(7),i=p.xc(11);p.Db(3),p.pc("matMenuTriggerFor",i),p.Db(1),p.pc("ngIf",p.jc(5,8,e.selectedUser$))("ngIfElse",a),p.Db(10),p.pc("formControl",e.searchFormControl),p.Db(2),p.pc("ngIf",e.searchFormControl.value),p.Db(1),p.pc("isVisible",p.jc(18,10,e.loading$)),p.Db(7),p.pc("ngForOf",p.jc(25,12,e.users$)),p.Db(2),p.pc("ngIf",e.searchedOnce&&!p.jc(27,14,e.users$).length)}},directives:[g.a,h.c,m.t,h.d,b.d,b.u,b.j,v.a,h.a,m.s,y.b,V.a],pipes:[m.b],styles:["[_nghost-%COMP%]{display:block;min-width:280px;max-width:100%}.fake-input[_ngcontent-%COMP%]{position:relative}.fake-label[_ngcontent-%COMP%]{text-transform:capitalize}img[_ngcontent-%COMP%]{display:inline-block;margin-right:8px;width:25px;height:25px;-o-object-fit:cover;object-fit:cover;border-radius:4px;vertical-align:middle}.arrow-container[_ngcontent-%COMP%]{height:100%;position:absolute;top:1px;right:1px;width:20px}.arrow[_ngcontent-%COMP%]{position:absolute;border-color:#000 transparent transparent;border-style:solid;border-width:5px 4px 0;height:0;width:0;left:50%;top:50%;margin-left:-4px;margin-top:-2px}.search-input-container[_ngcontent-%COMP%]{padding:0 8px;min-width:280px;max-width:100%;margin-bottom:10px}.search-input-wrapper[_ngcontent-%COMP%]{position:relative}.clear-search-input-button[_ngcontent-%COMP%]{position:absolute;top:4px;right:0;color:var(--be-secondary-text)}.mat-menu-item[_ngcontent-%COMP%]{display:flex;vertical-align:middle;line-height:normal}.mat-menu-item.selected[_ngcontent-%COMP%]{background-color:var(--be-accent-emphasis)}.mat-menu-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:35px;height:35px;align-self:center}.mat-menu-item[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{text-transform:capitalize}.mat-menu-item[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{color:var(--be-secondary-text);font-size:1.3rem}.any-user-info[_ngcontent-%COMP%], .user-info[_ngcontent-%COMP%]{align-self:center}loading-indicator[_ngcontent-%COMP%]{position:absolute;top:12px;right:40px}.nothing-found-item[_ngcontent-%COMP%]{color:var(--be-hint-text);line-height:48px}"],changeDetection:0}),t}()},SRuq:function(t,e,n){"use strict";n.d(e,"a",(function(){return H}));var a,i=n("Taaj"),o=n("E8hf"),s=n("nYR2"),l=n("2Vo4"),b=n("VfAk"),u=n("2hX1"),d=n("fXoL"),p=n("QGXG"),f=n("twBr"),g=n("kmQS"),h=n("q18H"),m=n("i2dy"),v=n("EAOp"),y=n("ofXK"),V=n("Ivca"),x=n("Um6Z"),k=n("Rd8u"),C=n("rcZy"),W=n("bTqV"),w=n("3Pt+"),D=n("MNfM"),O=n("8ZjS"),I=((a=function(){function t(e,n){r(this,t),this.fb=e,this.datable=n,this.form=this.fb.group({source:null,category:null,approved:null,quality:null,type:null,user:null,title:null,season:null,episode:null})}return c(t,[{key:"ngOnInit",value:function(){var t=this;this.form.patchValue(Object.assign({title:this.title},this.datable.filters$.value)),this.title&&this.form.get("title").disable(),this.form.valueChanges.subscribe((function(e){t.datable.filters$.next(e)}))}}]),t}()).\u0275fac=function(t){return new(t||a)(d.Qb(w.h),d.Qb(u.a))},a.\u0275cmp=d.Kb({type:a,selectors:[["video-index-filters"]],inputs:{title:"title"},decls:69,vars:9,consts:[[1,"many-inputs",3,"formGroup"],[1,"input-container"],["for","video-source-filter","trans",""],["id","video-source-filter","formControlName","source"],["trans","",3,"ngValue"],["value","local","trans",""],["value","external","trans",""],["for","video-category-filter","trans",""],["id","video-category-filter","formControlName","category"],["value","trailer","trans",""],["value","clip","trans",""],["value","featurette","trans",""],["value","teaser","trans",""],["value","full","trans",""],["for","video-approved-filter","trans",""],["id","video-approved-filter","formControlName","approved"],["for","video-quality-filter","trans",""],["id","video-quality-filter","formControlName","quality"],["value","sd","trans",""],["value","hd","trans",""],["value","4k","trans",""],["value","hdr","trans",""],["for","video-type-filter","trans",""],["id","video-type-filter","formControlName","type"],["value","embed","trans",""],["value","video","trans",""],["value","frame","trans",""],["formControlName","user"],[3,"formGroup"]],template:function(t,e){1&t&&(d.Wb(0,"div",0),d.Wb(1,"div",1),d.Wb(2,"label",2),d.Lc(3,"Source"),d.Vb(),d.Wb(4,"select",3),d.Wb(5,"option",4),d.Lc(6,"All"),d.Vb(),d.Wb(7,"option",5),d.Lc(8,"Local"),d.Vb(),d.Wb(9,"option",6),d.Lc(10,"External"),d.Vb(),d.Vb(),d.Vb(),d.Wb(11,"div",1),d.Wb(12,"label",7),d.Lc(13,"Category"),d.Vb(),d.Wb(14,"select",8),d.Wb(15,"option",4),d.Lc(16,"All"),d.Vb(),d.Wb(17,"option",9),d.Lc(18,"Trailer"),d.Vb(),d.Wb(19,"option",10),d.Lc(20,"Clip"),d.Vb(),d.Wb(21,"option",11),d.Lc(22,"Featurette"),d.Vb(),d.Wb(23,"option",12),d.Lc(24,"Teaser"),d.Vb(),d.Wb(25,"option",13),d.Lc(26,"Full Movie or episode"),d.Vb(),d.Vb(),d.Vb(),d.Wb(27,"div",1),d.Wb(28,"label",14),d.Lc(29,"Approved"),d.Vb(),d.Wb(30,"select",15),d.Wb(31,"option",4),d.Lc(32,"All"),d.Vb(),d.Wb(33,"option",4),d.Lc(34,"Approved only"),d.Vb(),d.Wb(35,"option",4),d.Lc(36,"Not approved only"),d.Vb(),d.Vb(),d.Vb(),d.Wb(37,"div",1),d.Wb(38,"label",16),d.Lc(39,"Quality"),d.Vb(),d.Wb(40,"select",17),d.Wb(41,"option",4),d.Lc(42,"All"),d.Vb(),d.Wb(43,"option",18),d.Lc(44,"SD"),d.Vb(),d.Wb(45,"option",19),d.Lc(46,"HD"),d.Vb(),d.Wb(47,"option",20),d.Lc(48,"4K"),d.Vb(),d.Wb(49,"option",21),d.Lc(50,"HDR"),d.Vb(),d.Vb(),d.Vb(),d.Wb(51,"div",1),d.Wb(52,"label",22),d.Lc(53,"Type"),d.Vb(),d.Wb(54,"select",23),d.Wb(55,"option",4),d.Lc(56,"All"),d.Vb(),d.Wb(57,"option",24),d.Lc(58,"Embed"),d.Vb(),d.Wb(59,"option",25),d.Lc(60,"Direct Video"),d.Vb(),d.Wb(61,"option",26),d.Lc(62,"Frame"),d.Vb(),d.Wb(63,"option",6),d.Lc(64,"Remote Link"),d.Vb(),d.Vb(),d.Vb(),d.Wb(65,"div",1),d.Rb(66,"select-user-input",27),d.Vb(),d.Wb(67,"div",1),d.Rb(68,"select-title-input",28),d.Vb(),d.Vb()),2&t&&(d.pc("formGroup",e.form),d.Db(5),d.pc("ngValue",null),d.Db(10),d.pc("ngValue",null),d.Db(16),d.pc("ngValue",null),d.Db(2),d.pc("ngValue",!0),d.Db(2),d.pc("ngValue",!1),d.Db(6),d.pc("ngValue",null),d.Db(14),d.pc("ngValue",null),d.Db(13),d.pc("formGroup",e.form))},directives:[w.v,w.m,k.a,w.G,w.u,w.k,w.z,w.J,D.a,O.a],styles:[""],changeDetection:0}),a),P=n("eKg+"),L=n("NFeN"),R=n("tyNb"),_=n("Qu3c"),S=n("CH4Q"),M=n("zW5C");function $(t,e){if(1&t){var n=d.Xb();d.Ub(0,13),d.Wb(1,"button",14),d.dc("click",(function(){return d.Ac(n),d.hc().openCrupdateVideoModal()})),d.Lc(2,"Add"),d.Vb(),d.Tb()}}function j(t,e){if(1&t){var n=d.Xb();d.Wb(0,"button",15),d.dc("click",(function(){return d.Ac(n),d.hc().maybeDeleteSelectedVideos()})),d.Lc(1,"Delete Selected"),d.Vb()}}function T(t,e){if(1&t&&d.Rb(0,"video-index-filters",16),2&t){var n=d.hc();d.pc("title",n.title)}}function E(t,e){1&t&&(d.Wb(0,"th",17),d.Lc(1,"Title"),d.Vb())}var A=function(t){return["/admin/titles",t,"edit"]},N=function(){return{active:"videos"}};function F(t,e){if(1&t&&(d.Wb(0,"a",44),d.Lc(1),d.Vb()),2&t){var n=d.hc(2).$implicit;d.pc("routerLink",d.tc(3,A,n.title.id))("queryParams",d.sc(5,N)),d.Db(1),d.Mc(n.title.name)}}function Q(t,e){if(1&t&&(d.Wb(0,"td",42),d.Jc(1,F,2,6,"a",43),d.Vb()),2&t){var n=d.hc().$implicit;d.Db(1),d.pc("ngIf",n.title)}}function J(t,e){1&t&&d.Rb(0,"mat-icon",45)}function U(t,e){1&t&&d.Rb(0,"mat-icon",46)}function X(t,e){1&t&&(d.Wb(0,"div"),d.Lc(1,"-"),d.Vb())}function z(t,e){if(1&t&&(d.Wb(0,"div",47),d.Lc(1),d.Vb()),2&t){var n=d.hc().$implicit;d.Db(1),d.Mc(n.quality)}}function q(t,e){if(1&t){var n=d.Xb();d.Wb(0,"button",48),d.dc("click",(function(){d.Ac(n);var t=d.hc().$implicit;return d.hc().openCrupdateVideoModal(t)})),d.ic(1,"trans"),d.Rb(2,"mat-icon",49),d.Vb()}2&t&&d.pc("matTooltip",d.jc(1,1,"Edit video"))}function K(t,e){if(1&t){var n=d.Xb();d.Wb(0,"tr"),d.Rb(1,"td",18),d.Wb(2,"td"),d.Wb(3,"div",19),d.Rb(4,"img",20),d.Wb(5,"a",21),d.Lc(6),d.Vb(),d.Vb(),d.Vb(),d.Jc(7,Q,2,1,"td",22),d.Wb(8,"td",23),d.Lc(9),d.Vb(),d.Wb(10,"td",24),d.Lc(11),d.Vb(),d.Wb(12,"td",25),d.Wb(13,"button",26),d.dc("click",(function(){d.Ac(n);var t=e.$implicit;return d.hc().toggleApprovedState(t)})),d.ic(14,"async"),d.Rb(15,"mat-icon",27),d.Rb(16,"mat-icon",28),d.Vb(),d.Vb(),d.Wb(17,"td",29),d.Lc(18),d.Vb(),d.Wb(19,"td",30),d.Wb(20,"div",31),d.Jc(21,J,1,0,"mat-icon",32),d.Jc(22,U,1,0,"mat-icon",33),d.Jc(23,X,2,0,"div",34),d.Jc(24,z,2,1,"div",35),d.Vb(),d.Vb(),d.Wb(25,"td",36),d.Lc(26),d.Vb(),d.Wb(27,"td",37),d.Lc(28),d.Vb(),d.Wb(29,"td",38),d.Lc(30),d.Vb(),d.Wb(31,"td",39),d.Lc(32),d.Vb(),d.Wb(33,"td",40),d.Jc(34,q,3,3,"button",41),d.Vb(),d.Vb()}if(2&t){var a=e.$implicit,i=d.hc();d.Db(1),d.pc("table-body-checkbox",a.id),d.Db(3),d.pc("src",a.thumbnail||(null==a.title?null:a.title.backdrop),d.Dc)("title",a.name),d.Db(1),d.pc("href",a.url,d.Dc),d.Db(1),d.Mc(a.name),d.Db(1),d.pc("ngIf",!i.title),d.Db(2),d.Mc(a.type),d.Db(2),d.Mc(a.category),d.Db(2),d.Hb("disapproved",!a.approved)("approved",a.approved),d.pc("disabled",d.jc(14,23,i.modifying$)),d.Db(5),d.Mc(a.plays_count),d.Db(2),d.pc("ngSwitch",a.quality),d.Db(1),d.pc("ngSwitchCase","hd"),d.Db(1),d.pc("ngSwitchCase","4k"),d.Db(1),d.pc("ngSwitchCase","regular"),d.Db(3),d.Mc(a.score?a.score+"%":"-"),d.Db(2),d.Mc(a.reports_count?a.reports_count:"-"),d.Db(2),d.Mc(a.season||"-"),d.Db(2),d.Mc(a.episode||"-"),d.Db(2),d.pc("ngIf",i.currentUser.hasPermission("videos.update"))}}function B(t,e){1&t&&(d.Wb(0,"no-results-message",50),d.Wb(1,"span",51),d.Lc(2,"No videos have been created yet"),d.Vb(),d.Vb())}var G,H=((G=function(){function t(e,n,a,i,o,c,s){r(this,t),this.datatable=e,this.videos=n,this.modal=a,this.currentUser=i,this.settings=o,this.urls=c,this.toast=s,this.videos$=this.datatable.data$,this.modifying$=new l.a(!1)}return c(t,[{key:"ngOnInit",value:function(){this.datatable.paginator.dontUpdateQueryParams=!!this.title;var t={uri:i.a.BASE_URI,staticParams:{}};this.title&&(t.staticParams={titleId:this.title.id}),this.datatable=this.datatable.init(t)}},{key:"maybeDeleteSelectedVideos",value:function(){var t=this;this.datatable.confirmResourceDeletion("videos").subscribe((function(){t.videos.delete(t.datatable.selectedRows$.value).subscribe((function(){t.datatable.reset()}))}))}},{key:"openCrupdateVideoModal",value:function(t){this.datatable.openCrupdateResourceModal(o.a,{video:t,title:t?t.title:this.title}).subscribe()}},{key:"toggleApprovedState",value:function(t){var e=this;this.modifying$.next(!0);var n=t.approved?this.videos.disapprove(t.id):this.videos.approve(t.id);t.approved=!t.approved,n.pipe(Object(s.a)((function(){return e.modifying$.next(!1)}))).subscribe((function(){}),(function(){e.toast.open(b.a.Default),t.approved=!t.approved}))}}]),t}()).\u0275fac=function(t){return new(t||G)(d.Qb(u.a),d.Qb(i.a),d.Qb(p.a),d.Qb(f.a),d.Qb(g.a),d.Qb(h.a),d.Qb(m.b))},G.\u0275cmp=d.Kb({type:G,selectors:[["video-index"]],inputs:{title:"title"},features:[d.Cb([u.a])],decls:38,vars:9,consts:[[1,"datatable","responsive-table"],["pluralResourceName","videos"],["leftContent","",4,"ngIf"],["rightContent","","mat-raised-button","","color","accent","trans","",3,"click",4,"ngIf"],["tableFilters",""],[1,"material-table"],["table-header-checkbox",""],["table-sort-header","","trans",""],["table-sort-header","title_id","trans","",4,"ngIf"],["table-sort-header","plays_count","trans",""],["table-sort-header","reports_count","trans",""],[4,"ngFor","ngForOf"],["svgImage","video-files.svg",4,"ngIf"],["leftContent",""],["mat-raised-button","","color","accent","trans","",3,"click"],["rightContent","","mat-raised-button","","color","accent","trans","",3,"click"],[3,"title"],["table-sort-header","title_id","trans",""],[3,"table-body-checkbox"],[1,"column-with-image"],["alt","",3,"src","title"],["target","_blank",1,"video-name","link",3,"href"],["data-label","Title",4,"ngIf"],["data-label","Type",1,"capitalize"],["data-label","Category",1,"capitalize"],["data-label","Approved"],["mat-icon-button","",1,"approve-button",3,"disabled","click"],["svgIcon","check",1,"success-icon"],["svgIcon","close",1,"warn-icon"],["data-label","Plays"],["data-label","Quality"],[3,"ngSwitch"],["class","icon-quality","svgIcon","hd",4,"ngSwitchCase"],["class","icon-quality","svgIcon","4k",4,"ngSwitchCase"],[4,"ngSwitchCase"],["class","text-quality",4,"ngSwitchDefault"],["data-label","Score"],["data-label","Reports"],["data-label","Season"],["data-label","Episode"],[1,"edit-column"],["mat-icon-button","",3,"matTooltip","click",4,"ngIf"],["data-label","Title"],["class","title-name link",3,"routerLink","queryParams",4,"ngIf"],[1,"title-name","link",3,"routerLink","queryParams"],["svgIcon","hd",1,"icon-quality"],["svgIcon","4k",1,"icon-quality"],[1,"text-quality"],["mat-icon-button","",3,"matTooltip","click"],["svgIcon","edit"],["svgImage","video-files.svg"],["primary-text","","trans",""]],template:function(t,e){1&t&&(d.Wb(0,"div",0),d.Wb(1,"datatable-header",1),d.Jc(2,$,3,0,"ng-container",2),d.Jc(3,j,2,0,"button",3),d.Jc(4,T,1,1,"ng-template",null,4,d.Kc),d.Vb(),d.Wb(6,"table",5),d.Wb(7,"thead"),d.Wb(8,"tr"),d.Rb(9,"th",6),d.Wb(10,"th",7),d.Lc(11,"Name"),d.Vb(),d.Jc(12,E,2,0,"th",8),d.Wb(13,"th",7),d.Lc(14,"Type"),d.Vb(),d.Wb(15,"th",7),d.Lc(16,"Category"),d.Vb(),d.Wb(17,"th",7),d.Lc(18,"Approved"),d.Vb(),d.Wb(19,"th",9),d.Lc(20,"Plays"),d.Vb(),d.Wb(21,"th",7),d.Lc(22,"Quality"),d.Vb(),d.Wb(23,"th",7),d.Lc(24,"Score"),d.Vb(),d.Wb(25,"th",10),d.Lc(26,"Reports"),d.Vb(),d.Wb(27,"th",7),d.Lc(28,"Season"),d.Vb(),d.Wb(29,"th",7),d.Lc(30,"Episode"),d.Vb(),d.Rb(31,"th"),d.Vb(),d.Vb(),d.Wb(32,"tbody"),d.Jc(33,K,35,25,"tr",11),d.ic(34,"async"),d.Vb(),d.Vb(),d.Jc(35,B,3,0,"no-results-message",12),d.ic(36,"async"),d.Rb(37,"datatable-footer"),d.Vb()),2&t&&(d.Db(2),d.pc("ngIf",e.currentUser.hasPermission("videos.create")),d.Db(1),d.pc("ngIf",e.currentUser.hasPermission("videos.delete")),d.Db(9),d.pc("ngIf",!e.title),d.Db(21),d.pc("ngForOf",d.jc(34,5,e.videos$)),d.Db(2),d.pc("ngIf",d.jc(36,7,e.datatable.paginator.noResults$)))},directives:[v.a,y.t,V.a,x.a,k.a,y.s,C.a,W.b,I,P.a,L.a,y.x,y.y,y.z,R.g,_.a,S.a],pipes:[y.b,M.a],styles:[".title-name[_ngcontent-%COMP%], .video-name[_ngcontent-%COMP%]{display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:200px}.approved[_ngcontent-%COMP%]:hover   .warn-icon[_ngcontent-%COMP%]{display:inline-block}.approved[_ngcontent-%COMP%]:hover   .success-icon[_ngcontent-%COMP%]{display:none}.approved[_ngcontent-%COMP%]   .success-icon[_ngcontent-%COMP%], .disapproved[_ngcontent-%COMP%]:hover   .success-icon[_ngcontent-%COMP%]{display:inline-block}.disapproved[_ngcontent-%COMP%]:hover   .warn-icon[_ngcontent-%COMP%]{display:none}.disapproved[_ngcontent-%COMP%]   .warn-icon[_ngcontent-%COMP%]{display:inline-block}.success-icon[_ngcontent-%COMP%]{display:none;color:#43a047}.warn-icon[_ngcontent-%COMP%]{display:none;color:#f44336}"],changeDetection:0}),G)},Sn2F:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var a=n("fXoL"),i=n("ofXK");function o(t,e){if(1&t&&(a.Ub(0),a.Rb(1,"img",1),a.Wb(2,"div",2),a.Wb(3,"div"),a.Lc(4),a.Vb(),a.Wb(5,"div",3),a.Lc(6),a.Vb(),a.Vb(),a.Tb()),2&t){var n=a.hc();a.Db(1),a.pc("src",n.user.avatar,a.Dc),a.Db(3),a.Mc(n.user.display_name),a.Db(2),a.Mc(n.user.email)}}var c=function(){var t=function t(){r(this,t),this.showEmail=!1};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Kb({type:t,selectors:[["user-column"]],hostAttrs:[1,"column-with-image"],inputs:{user:"user",showEmail:"showEmail"},decls:1,vars:1,consts:[[4,"ngIf"],["alt","",3,"src"],[1,"content"],[1,"email","secondary"]],template:function(t,e){1&t&&a.Jc(0,o,7,3,"ng-container",0),2&t&&a.pc("ngIf",e.user)},directives:[i.t],styles:[""],changeDetection:0}),t}()},Um6Z:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var a=n("pLZG"),i=n("FtGj"),o=n("WAq7"),s=n("fXoL"),l=n("2hX1"),b=n("u47x"),u=n("ofXK"),d=n("NFeN"),p=["columnName"],f=["table-sort-header",""],g=["*"],h=function(){var t=function(){function t(e,n,a,i){r(this,t),this.datable=e,this.cd=n,this.focusMonitor=a,this.el=i,this.orderDir=null,this.arrowVisible=!1,this.arrowDirection="down"}return c(t,[{key:"ngOnInit",value:function(){var t=this;this.orderBy||(this.orderBy=Object(o.a)(this.columnName.nativeElement.textContent,"_")),this.sortSub=this.datable.sort$.pipe(Object(a.a)((function(e){return e.orderBy!==t.orderBy}))).subscribe((function(){t.orderDir=null,t.onMouseLeave(),t.cd.markForCheck()}))}},{key:"ngAfterViewInit",value:function(){this.focusMonitor.monitor(this.el).subscribe()}},{key:"ngOnDestroy",value:function(){this.sortSub.unsubscribe(),this.focusMonitor.stopMonitoring(this.el)}},{key:"changeSort",value:function(){this.datable.sort$.next({orderBy:this.orderBy,orderDir:this.getDirection(this.orderDir)})}},{key:"getDirection",value:function(t){switch(t){case"asc":return this.arrowVisible=!1,this.orderDir=null;case"desc":return this.arrowVisible=!0,this.arrowDirection="up",this.orderDir="asc";default:return this.arrowVisible=!0,this.arrowDirection="down",this.orderDir="desc"}}},{key:"onMouseEnter",value:function(){var t;(null===(t=this.datable.config)||void 0===t?void 0:t.disableSort)||(this.arrowVisible=!0)}},{key:"onMouseLeave",value:function(){this.arrowVisible=!1,this.orderDir||(this.arrowDirection="down")}},{key:"handleClick",value:function(){var t;(null===(t=this.datable.config)||void 0===t?void 0:t.disableSort)||this.changeSort()}},{key:"handleKeydown",value:function(t){var e;(null===(e=this.datable.config)||void 0===e?void 0:e.disableSort)||t.keyCode!==i.n&&t.keyCode!==i.f||(t.preventDefault(),this.changeSort())}},{key:"sortDisabled",get:function(){var t;return null===(t=this.datable.config)||void 0===t?void 0:t.disableSort}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s.Qb(l.a),s.Qb(s.i),s.Qb(b.h),s.Qb(s.m))},t.\u0275cmp=s.Kb({type:t,selectors:[["","table-sort-header",""]],viewQuery:function(t,e){var n;1&t&&s.Hc(p,!0),2&t&&s.wc(n=s.ec())&&(e.columnName=n.first)},hostAttrs:["tabindex","0"],hostVars:4,hostBindings:function(t,e){1&t&&s.dc("click",(function(){return e.handleClick()}))("keydown",(function(t){return e.handleKeydown(t)}))("mouseenter",(function(){return e.onMouseEnter()}))("mouseleave",(function(){return e.onMouseLeave()})),2&t&&s.Hb("active",e.orderDir)("sort-disabled",e.sortDisabled)},inputs:{orderBy:["table-sort-header","orderBy"]},attrs:f,ngContentSelectors:g,decls:5,vars:3,consts:[[1,"text"],["columnName",""],[1,"icon-wrapper",3,"ngClass"],["svgIcon","arrow-downward",1,"sort-icon"]],template:function(t,e){1&t&&(s.oc(),s.Wb(0,"span",0,1),s.nc(2),s.Vb(),s.Wb(3,"span",2),s.Rb(4,"mat-icon",3),s.Vb()),2&t&&(s.Db(3),s.pc("ngClass",e.arrowDirection),s.Db(1),s.Hb("hint-visible",e.arrowVisible))},directives:[u.q,d.a],styles:["[_nghost-%COMP%]{outline:none}[_nghost-%COMP%]:not(.sort-disabled){cursor:pointer}.active[_nghost-%COMP%]   .sort-icon[_ngcontent-%COMP%]{color:var(--be-text);opacity:1;transform:translate(0)}.cdk-keyboard-focused[_nghost-%COMP%]   .text[_ngcontent-%COMP%]{border-bottom:1px solid}.text[_ngcontent-%COMP%]{display:inline-block}.sort-icon[_ngcontent-%COMP%], .text[_ngcontent-%COMP%]{vertical-align:middle}.sort-icon[_ngcontent-%COMP%]{width:15px;height:15px;transition:all 225ms cubic-bezier(.4,0,.2,1);transform:translateY(25%);opacity:0}.icon-wrapper[_ngcontent-%COMP%]{display:inline-block;margin-left:4px;transition:transform 225ms cubic-bezier(.4,0,.2,1)}.icon-wrapper[_ngcontent-%COMP%]:not(.down){transform:rotate(180deg)}.hint-visible[_ngcontent-%COMP%]{opacity:1;transform:translate(0)}"],changeDetection:0}),t}()},"eKg+":function(t,n,a){"use strict";a.d(n,"a",(function(){return b}));var i=a("fXoL"),o=a("2hX1"),s=a("bSwM"),l=["table-body-checkbox",""],b=function(){var t=function(){function t(e,n){r(this,t),this.datatable=e,this.cd=n}return c(t,[{key:"ngOnInit",value:function(){var t=this;this.changeRef=this.datatable.selectedRows$.subscribe((function(e){t.cd.markForCheck()}))}},{key:"ngOnDestroy",value:function(){this.changeRef.unsubscribe()}},{key:"isRowSelected",value:function(t){return this.datatable.selectedRows$.value.indexOf(t)>-1}},{key:"toggleRow",value:function(t){if(this.isRowSelected(t)){var n=this.datatable.selectedRows$.value.slice(),a=this.datatable.selectedRows$.value.indexOf(t);n.splice(a,1),this.datatable.selectedRows$.next(n)}else this.datatable.selectedRows$.next([].concat(e(this.datatable.selectedRows$.value),[t]))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.Qb(o.a),i.Qb(i.i))},t.\u0275cmp=i.Kb({type:t,selectors:[["","table-body-checkbox",""]],hostAttrs:[1,"table-checkbox"],inputs:{rowId:["table-body-checkbox","rowId"]},attrs:l,decls:1,vars:1,consts:[[3,"checked","click","change"]],template:function(t,e){1&t&&(i.Wb(0,"mat-checkbox",0),i.dc("click",(function(t){return t.stopPropagation()}))("change",(function(t){return t?e.toggleRow(e.rowId):null})),i.Vb()),2&t&&i.pc("checked",e.isRowSelected(e.rowId))},directives:[s.a],encapsulation:2,changeDetection:0}),t}()},rcZy:function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var a=n("3Pt+"),i=n("pLZG"),o=n("lJxs"),s=n("fXoL"),l=n("2hX1"),b=n("ofXK"),u=n("bTqV"),d=n("NFeN"),p=n("Rd8u"),f=n("zW5C");function g(t,e){if(1&t&&(s.Wb(0,"div",6),s.Wb(1,"div",7),s.Lc(2,"Items per page"),s.Vb(),s.Wb(3,"div",8),s.Wb(4,"select",9),s.Wb(5,"option",10),s.Lc(6,"10"),s.Vb(),s.Wb(7,"option",10),s.Lc(8,"15"),s.Vb(),s.Wb(9,"option",10),s.Lc(10,"20"),s.Vb(),s.Wb(11,"option",10),s.Lc(12,"50"),s.Vb(),s.Wb(13,"option",10),s.Lc(14,"100"),s.Vb(),s.Vb(),s.Vb(),s.Vb()),2&t){var n=s.hc();s.Db(4),s.pc("formControl",n.perPageControl),s.Db(1),s.pc("ngValue",10),s.Db(2),s.pc("ngValue",15),s.Db(2),s.pc("ngValue",20),s.Db(2),s.pc("ngValue",50),s.Db(2),s.pc("ngValue",100)}}function h(t,e){if(1&t&&(s.Wb(0,"div",11),s.Lc(1),s.ic(2,"trans"),s.Vb()),2&t){var n=s.hc();s.Db(1),s.Qc(" ",n.from," - ",n.to," ",s.jc(2,4,"of")," ",n.totalRecords," ")}}var m=function(){var t=function(){function t(e,n){r(this,t),this.datable=e,this.cd=n,this.hidePerPage=!1,this.perPageControl=new a.i(15)}return c(t,[{key:"ngOnInit",value:function(){var t=this;this.changeRef=this.datable.paginator.response$.pipe(Object(i.a)((function(t){return!!(null==t?void 0:t.pagination)})),Object(o.a)((function(t){return t.pagination}))).subscribe((function(e){t.to=e.per_page*e.current_page,t.from=t.to-e.per_page||1,t.totalRecords=e.total,t.havePrevious=e.current_page>1,t.haveNext=e.current_page<e.last_page,t.perPageControl.setValue(parseInt(""+e.per_page),{emitEvent:!1}),t.cd.markForCheck()})),this.perPageControl.valueChanges.subscribe((function(e){t.datable.paginator.changePerPage(e)}))}},{key:"ngOnDestroy",value:function(){this.changeRef.unsubscribe(),this.datable.destroy()}},{key:"previousPage",value:function(){this.datable.paginator.previousPage()}},{key:"nextPage",value:function(){this.datable.paginator.nextPage()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s.Qb(l.a),s.Qb(s.i))},t.\u0275cmp=s.Kb({type:t,selectors:[["datatable-footer"]],inputs:{hidePerPage:"hidePerPage"},decls:9,vars:8,consts:[["class","page-size",4,"ngIf"],[1,"range-actions"],["class","range-label",4,"ngIf"],["type","button","mat-icon-button","",1,"range-button",3,"disabled","click"],["svgIcon","chevron-left"],["svgIcon","chevron-right"],[1,"page-size"],["trans","",1,"page-size-label"],[1,"input-container"],[1,"page-size-input",3,"formControl"],[3,"ngValue"],[1,"range-label"]],template:function(t,e){1&t&&(s.Jc(0,g,15,6,"div",0),s.Wb(1,"div",1),s.Jc(2,h,3,6,"div",2),s.Wb(3,"button",3),s.dc("click",(function(){return e.previousPage()})),s.ic(4,"async"),s.Rb(5,"mat-icon",4),s.Vb(),s.Wb(6,"button",3),s.dc("click",(function(){return e.nextPage()})),s.ic(7,"async"),s.Rb(8,"mat-icon",5),s.Vb(),s.Vb()),2&t&&(s.pc("ngIf",!e.hidePerPage),s.Db(2),s.pc("ngIf",e.from&&e.to&&e.totalRecords),s.Db(1),s.pc("disabled",!e.havePrevious||s.jc(4,4,e.datable.paginator.loading$)),s.Db(3),s.pc("disabled",!e.haveNext||s.jc(7,6,e.datable.paginator.loading$)))},directives:[b.t,u.b,d.a,p.a,a.G,a.u,a.j,a.z,a.J],pipes:[b.b,f.a],styles:["[_nghost-%COMP%]{padding:0 8px;justify-content:flex-end;flex-wrap:wrap-reverse;width:100%;height:56px}.page-size[_ngcontent-%COMP%], [_nghost-%COMP%]{display:flex;align-items:center}.page-size[_ngcontent-%COMP%]{margin-right:8px}.page-size-label[_ngcontent-%COMP%]{font-size:1.2rem;color:var(--be-secondary-text);margin:0 4px}.input-container[_ngcontent-%COMP%]{width:auto}.page-size-input[_ngcontent-%COMP%]{width:60px;height:33px;padding:4px;margin:0 4px}.range-actions[_ngcontent-%COMP%]{display:flex;align-items:center}.range-label[_ngcontent-%COMP%]{margin:0 32px 0 24px;font-size:1.2rem}.range-button[_ngcontent-%COMP%], .range-label[_ngcontent-%COMP%]{color:var(--be-secondary-text)}.range-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:28px;height:28px;line-height:28px}"],changeDetection:0}),t}()}}])}();
//# sourceMappingURL=1-es5.a7ccf09225c9b14afcf0.js.map