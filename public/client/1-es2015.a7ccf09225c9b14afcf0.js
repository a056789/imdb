(window.webpackJsonp=window.webpackJsonp||[]).push([[1,3],{"/5ox":function(t,e,a){"use strict";a.r(e),a.d(e,"CrupdateTitleModule",(function(){return De}));var n=a("ofXK"),i=a("tyNb"),s=a("mrSG"),o=a("AcyG"),c=a("cIkh"),r=a("M/Pu"),l=a("2Vo4"),b=a("fXoL"),d=a("Rd8u"),p=a("FBzJ"),u=a("3Pt+"),h=a("h586"),g=a("Lm4C"),m=a("QeDF"),f=a("pLZG"),v=a("IzEk"),y=a("nYR2"),V=a("r2Ys"),x=a("kmQS"),W=a("7tLl"),C=a("i2dy"),w=a("l9qf"),D=a("bTqV"),O=a("Qu3c"),I=a("NFeN"),P=a("ihCf"),k=a("zW5C");function L(t,e){if(1&t&&(b.Wb(0,"option",42),b.Lc(1),b.Vb()),2&t){const t=e.$implicit;b.pc("ngValue",t),b.Db(1),b.Mc(t)}}function R(t,e){if(1&t&&(b.Wb(0,"option",43),b.Lc(1),b.Vb()),2&t){const t=e.$implicit;b.pc("value",t.code),b.Db(1),b.Mc(t.name)}}let _=(()=>{class t{constructor(t,e,a,n,i,s,o,c){this.store=t,this.fb=e,this.route=a,this.uploadQueue=n,this.settings=i,this.router=s,this.titles=o,this.toast=c,this.poster$=new l.a(null),this.form=this.fb.group({name:["",[u.I.required,u.I.minLength(1)]],is_series:[!1,[u.I.required]],language:[""],tagline:["",[u.I.minLength(1),u.I.maxLength(250)]],poster:["",[u.I.minLength(1),u.I.maxLength(250)]],backdrop:["",[u.I.minLength(1),u.I.maxLength(250)]],description:["",[u.I.minLength(1)]],budget:["",u.I.min(1)],revenue:["",u.I.min(1)],runtime:["",[u.I.min(1),u.I.max(300)]],country:["",[u.I.minLength(1),u.I.maxLength(50)]],popularity:[1,[u.I.min(1),u.I.max(100)]],certification:["pg"],release_date:[""],allow_update:[!0]}),this.certificationOptions=this.settings.getJson("browse.ageRatings")}ngOnInit(){this.store.dispatch(new c.q),this.store.select(r.a.title).pipe(Object(f.a)(t=>!!t.id),Object(v.a)(1)).subscribe(t=>{this.form.patchValue(Object.assign(Object.assign({},t),{release_date:t.release_date?t.release_date.split("T")[0]:null})),this.poster$.next(t.poster)}),this.form.get("poster").valueChanges.subscribe(t=>{this.poster$.next(t)})}uploadImage(t){Object(g.a)({types:[m.a.image]}).then(e=>{this.uploadQueue.start(e,{uri:"uploads/images",httpParams:{diskPrefix:`media-images/${t}s`}}).subscribe(e=>{this.form.patchValue({[t]:e.fileEntry.url})})})}submit(){this.store.dispatch(new c.t(!0));const t=this.store.selectSnapshot(r.a.title).id;(t?this.titles.update(t,this.form.value):this.titles.create(this.form.value)).pipe(Object(y.a)(()=>this.store.dispatch(new c.t(!1)))).subscribe(e=>{this.toast.open(t?V.a.TITLE_UPDATE_SUCCESS:V.a.TITLE_CREATE_SUCCESS),this.router.navigate(t?[this.router.url.includes("admin")?"/admin/titles":this.router.url.split("?")[0].replace("/edit","")]:[this.router.url.replace("new",""+e.title.id),"edit"])})}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(o.g),b.Qb(u.h),b.Qb(i.a),b.Qb(h.a),b.Qb(x.a),b.Qb(i.d),b.Qb(W.a),b.Qb(C.b))},t.\u0275cmp=b.Kb({type:t,selectors:[["primary-facts-panel"]],features:[b.Cb([h.a])],decls:88,vars:21,consts:[[3,"formGroup","ngSubmit"],[1,"poster-container"],[3,"src"],[1,"many-inputs"],[1,"input-container"],["for","name","trans",""],["type","text","formControlName","name","id","name","minlength","1","maxlength","250","required",""],[1,"inline-container"],["for","type","trans",""],["formControlName","is_series","id","type","required",""],["trans","",3,"ngValue"],["for","allow_update","trans",""],["formControlName","allow_update","id","allow_update","required",""],["for","poster","trans",""],[1,"input-with-action","action-left"],["type","button","mat-flat-button","","color","accent",3,"matTooltip","click"],["svgIcon","file-upload"],["type","text","formControlName","poster","id","poster","minlength","1","maxlength","250"],["for","backdrop","trans",""],["type","text","formControlName","backdrop","id","backdrop","minlength","1","maxlength","250"],["for","release_date","trans",""],["type","date","formControlName","release_date","id","release_date","placeholder","YYYY-MM-DD","required",""],["for","tagline","trans",""],["type","text","formControlName","tagline","id","tagline","minlength","1","maxlength","250"],["for","description","trans",""],["type","text","formControlName","description","id","description","minlength","1","cdkTextareaAutosize","","cdkAutosizeMinRows","6"],["for","runtime","trans",""],["type","number","formControlName","runtime","id","runtime","min","1","max","500"],[1,"input-container","certification-input-container"],["for","certification","trans",""],["formControlName","certification","id","certification"],[3,"ngValue",4,"ngFor","ngForOf"],["for","budget","trans",""],["type","number","formControlName","budget","id","budget","min","1"],["for","revenue","trans",""],["type","number","formControlName","revenue","id","revenue","min","1"],["for","popularity","trans",""],["type","number","formControlName","popularity","id","popularity","min","1","max","1000"],["for","language","trans",""],["formControlName","language","id","language","required",""],[3,"value",4,"ngFor","ngForOf"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled"],[3,"ngValue"],[3,"value"]],template:function(t,e){1&t&&(b.Wb(0,"form",0),b.dc("ngSubmit",(function(){return e.submit()})),b.Wb(1,"div",1),b.Rb(2,"media-image",2),b.ic(3,"async"),b.Wb(4,"div",3),b.Wb(5,"div",4),b.Wb(6,"label",5),b.Lc(7,"Title"),b.Vb(),b.Rb(8,"input",6),b.Vb(),b.Wb(9,"div",7),b.Wb(10,"div",4),b.Wb(11,"label",8),b.Lc(12,"Type"),b.Vb(),b.Wb(13,"select",9),b.Wb(14,"option",10),b.Lc(15,"Movie"),b.Vb(),b.Wb(16,"option",10),b.Lc(17,"TV Series"),b.Vb(),b.Vb(),b.Vb(),b.Wb(18,"div",4),b.Wb(19,"label",11),b.Lc(20,"Allow Auto Update"),b.Vb(),b.Wb(21,"select",12),b.Wb(22,"option",10),b.Lc(23,"Yes"),b.Vb(),b.Wb(24,"option",10),b.Lc(25,"No"),b.Vb(),b.Vb(),b.Vb(),b.Vb(),b.Wb(26,"div",4),b.Wb(27,"label",13),b.Lc(28,"Poster"),b.Vb(),b.Wb(29,"div",14),b.Wb(30,"button",15),b.dc("click",(function(){return e.uploadImage("poster")})),b.ic(31,"trans"),b.Rb(32,"mat-icon",16),b.Vb(),b.Rb(33,"input",17),b.Vb(),b.Vb(),b.Wb(34,"div",4),b.Wb(35,"label",18),b.Lc(36,"Backdrop"),b.Vb(),b.Wb(37,"div",14),b.Wb(38,"button",15),b.dc("click",(function(){return e.uploadImage("backdrop")})),b.ic(39,"trans"),b.Rb(40,"mat-icon",16),b.Vb(),b.Rb(41,"input",19),b.Vb(),b.Vb(),b.Vb(),b.Vb(),b.Wb(42,"div",7),b.Wb(43,"div",4),b.Wb(44,"label",20),b.Lc(45,"Release Date"),b.Vb(),b.Rb(46,"input",21),b.Vb(),b.Wb(47,"div",4),b.Wb(48,"label",22),b.Lc(49,"Tagline"),b.Vb(),b.Rb(50,"input",23),b.Vb(),b.Vb(),b.Wb(51,"div",4),b.Wb(52,"label",24),b.Lc(53,"Overview"),b.Vb(),b.Rb(54,"textarea",25),b.Vb(),b.Wb(55,"div",7),b.Wb(56,"div",4),b.Wb(57,"label",26),b.Lc(58,"Runtime"),b.Vb(),b.Rb(59,"input",27),b.Vb(),b.Wb(60,"div",28),b.Wb(61,"label",29),b.Lc(62,"Certification"),b.Vb(),b.Wb(63,"select",30),b.Jc(64,L,2,2,"option",31),b.Vb(),b.Vb(),b.Vb(),b.Wb(65,"div",7),b.Wb(66,"div",4),b.Wb(67,"label",32),b.Lc(68,"Budget"),b.Vb(),b.Rb(69,"input",33),b.Vb(),b.Wb(70,"div",4),b.Wb(71,"label",34),b.Lc(72,"Revenue"),b.Vb(),b.Rb(73,"input",35),b.Vb(),b.Vb(),b.Wb(74,"div",7),b.Wb(75,"div",4),b.Wb(76,"label",36),b.Lc(77,"Popularity"),b.Vb(),b.Rb(78,"input",37),b.Vb(),b.Wb(79,"div",4),b.Wb(80,"label",38),b.Lc(81,"Language"),b.Vb(),b.Wb(82,"select",39),b.Jc(83,R,2,2,"option",40),b.ic(84,"async"),b.Vb(),b.Vb(),b.Vb(),b.Wb(85,"button",41),b.ic(86,"async"),b.Lc(87,"Save"),b.Vb(),b.Vb()),2&t&&(b.pc("formGroup",e.form),b.Db(2),b.pc("src",b.jc(3,11,e.poster$)),b.Db(12),b.pc("ngValue",!1),b.Db(2),b.pc("ngValue",!0),b.Db(6),b.pc("ngValue",!0),b.Db(2),b.pc("ngValue",!1),b.Db(6),b.pc("matTooltip",b.jc(31,13,"Upload poster")),b.Db(8),b.pc("matTooltip",b.jc(39,15,"Upload backdrop")),b.Db(26),b.pc("ngForOf",e.certificationOptions),b.Db(19),b.pc("ngForOf",b.jc(84,17,e.languageOptions$)),b.Db(2),b.pc("disabled",b.jc(86,19,e.loading$)))},directives:[u.K,u.v,u.m,w.a,d.a,u.d,u.u,u.k,u.q,u.p,u.F,u.G,u.z,u.J,D.b,O.a,I.a,P.b,u.A,n.s],pipes:[n.b,k.a],styles:["primary-facts-panel{display:block}primary-facts-panel .poster-container{display:flex;margin-bottom:20px}primary-facts-panel .poster-container media-image img{height:350px;width:auto;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12);border-radius:4px}primary-facts-panel .poster-container .many-inputs{margin-left:20px;flex:1 1 auto}primary-facts-panel .poster-container .many-inputs .input-container:last-of-type{margin-bottom:0}primary-facts-panel .certification-input-container option,primary-facts-panel .certification-input-container select{text-transform:uppercase}"],encapsulation:2,changeDetection:0}),Object(s.b)([Object(o.d)(r.a.title)],t.prototype,"title$",void 0),Object(s.b)([Object(o.d)(r.a.loading)],t.prototype,"loading$",void 0),Object(s.b)([Object(o.d)(r.a.languageOptions)],t.prototype,"languageOptions$",void 0),t})();var $=a("/RwR"),M=a("QGXG"),S=a("7EHt"),j=a("wZkO"),T=a("0IaG"),E=a("Sx+n"),N=a("JX91"),A=a("lJxs"),F=a("0Ej5"),Q=a("VaGr"),J=a("/1cH"),U=a("FKr1");function X(t,e){1&t&&(b.Wb(0,"h2",11),b.Lc(1,"Edit"),b.Vb())}function z(t,e){1&t&&(b.Wb(0,"h2",11),b.Lc(1,"Create"),b.Vb())}function q(t,e){if(1&t&&(b.Wb(0,"div",12),b.Wb(1,"label",13),b.Lc(2,"Person"),b.Vb(),b.Rb(3,"input",14),b.Vb()),2&t){const t=b.hc();b.Db(3),b.pc("value",null==t.credit?null:t.credit.name)}}function K(t,e){if(1&t){const t=b.Xb();b.Wb(0,"search-input",15),b.dc("resultSelected",(function(e){return b.Ac(t),b.hc().setCredit(e)})),b.Vb()}if(2&t){const t=b.hc();b.pc("type",t.getPersonType())("resetInputOnSelect",!1)}}function B(t,e){1&t&&(b.Wb(0,"div",12),b.Wb(1,"label",16),b.Lc(2,"Character"),b.Vb(),b.Rb(3,"input",17),b.Vb())}function G(t,e){if(1&t&&(b.Wb(0,"mat-option",25),b.Wb(1,"div",26),b.Wb(2,"span",27),b.Lc(3,"Job"),b.Vb(),b.Lc(4),b.Vb(),b.Wb(5,"div",28),b.Wb(6,"span",27),b.Lc(7,"Department"),b.Vb(),b.Lc(8),b.Vb(),b.Vb()),2&t){const t=e.$implicit;b.pc("value",t.job),b.Db(4),b.Nc(": ",t.job,""),b.Db(4),b.Nc(": ",t.department,"")}}function H(t,e){if(1&t){const t=b.Xb();b.Ub(0),b.Wb(1,"div",12),b.Wb(2,"label",18),b.Lc(3,"Job"),b.Vb(),b.Rb(4,"input",19),b.Vb(),b.Wb(5,"mat-autocomplete",20,21),b.dc("optionSelected",(function(e){return b.Ac(t),b.hc().jobSelected(e)})),b.Jc(7,G,9,3,"mat-option",22),b.ic(8,"async"),b.Vb(),b.Wb(9,"div",12),b.Wb(10,"label",23),b.Lc(11,"Department"),b.Vb(),b.Rb(12,"input",24),b.Vb(),b.Tb()}if(2&t){const t=b.xc(6),e=b.hc();b.Db(4),b.pc("matAutocomplete",t),b.Db(3),b.pc("ngForOf",b.jc(8,2,e.filteredJobs))}}let Y=(()=>{class t{constructor(t,e,a,n,i,s,o){this.store=t,this.toast=e,this.fb=a,this.actions$=n,this.dialogRef=i,this.valueLists=s,this.data=o,this.form=this.fb.group({character:[""],department:[""],job:[""]}),this.availableJobs=[],this.data.credit&&(this.credit=this.data.credit,this.form.patchValue(this.data.credit.pivot))}ngOnInit(){this.valueLists.get(["tmdbJobs"]).subscribe(t=>{this.availableJobs=[],t.tmdbJobs.forEach(t=>{const e=t.jobs.map(e=>({job:e,department:t.department}));this.availableJobs=[...this.availableJobs,...e]}),this.filteredJobs=this.form.get("job").valueChanges.pipe(Object(N.a)(""),Object(A.a)(t=>this.availableJobs.filter(e=>!(t=t.toLowerCase())||e.job.toLowerCase().includes(t)||e.department.toLowerCase().includes(t)).slice(0,10)))})}confirm(){var t;const e=this.data.credit?new c.u(this.credit.pivot.id,this.getPayload()):new c.a(null===(t=this.credit)||void 0===t?void 0:t.id,this.data.mediaItem,this.getPayload());this.store.dispatch(e).subscribe(()=>{this.close(),this.toast.open(this.data.credit?V.a.CREDIT_UPDATE_SUCCESS:V.a.CREDIT_ADD_SUCCESS)},t=>{this.toast.open(t.message)})}close(){this.dialogRef.close()}setCredit(t){this.credit=t}getPayload(){const t=this.form.value;return"cast"===this.data.type&&(t.department="cast",t.job="cast"),t}getPersonType(){return E.a.PERSON}jobSelected(t){const e=this.availableJobs.find(e=>e.job===t.option.value);this.form.patchValue({job:e.job,department:e.department})}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(o.g),b.Qb(C.b),b.Qb(u.h),b.Qb(o.b),b.Qb(T.h),b.Qb(F.a),b.Qb(T.a))},t.\u0275cmp=b.Kb({type:t,selectors:[["crupdate-credit-modal"]],decls:17,vars:10,consts:[[1,"modal-header"],["class","modal-title","mat-dialog-title","","trans","",4,"ngIf"],["type","button",1,"close-button","no-style","icon-button",3,"click"],["svgIcon","close"],["autocomplete","off","ngNativeValidate","",3,"formGroup","ngSubmit"],[1,"many-inputs"],["class","input-container",4,"ngIf"],["placeholder","Search for a person...","label","Person","searchProvider","local",3,"type","resetInputOnSelect","resultSelected",4,"ngIf"],[4,"ngIf"],["type","button","mat-button","","trans","",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled"],["mat-dialog-title","","trans","",1,"modal-title"],[1,"input-container"],["for","name","trans",""],["type","text","id","name","disabled","",3,"value"],["placeholder","Search for a person...","label","Person","searchProvider","local",3,"type","resetInputOnSelect","resultSelected"],["for","character","trans",""],["type","text","id","character","formControlName","character","required",""],["for","job","trans",""],["type","text","id","job","formControlName","job","required","",3,"matAutocomplete"],[3,"optionSelected"],["auto","matAutocomplete"],["class","multiline-mat-menu-item",3,"value",4,"ngFor","ngForOf"],["for","department","trans",""],["type","text","id","department","formControlName","department","required",""],[1,"multiline-mat-menu-item",3,"value"],[1,"title"],["trans",""],[1,"description"]],template:function(t,e){1&t&&(b.Wb(0,"div",0),b.Jc(1,X,2,0,"h2",1),b.Jc(2,z,2,0,"h2",1),b.Wb(3,"button",2),b.dc("click",(function(){return e.close()})),b.Rb(4,"mat-icon",3),b.Vb(),b.Vb(),b.Wb(5,"form",4),b.dc("ngSubmit",(function(){return e.confirm()})),b.Wb(6,"mat-dialog-content",5),b.Jc(7,q,4,1,"div",6),b.Jc(8,K,1,2,"search-input",7),b.Jc(9,B,4,0,"div",6),b.Jc(10,H,13,4,"ng-container",8),b.Vb(),b.Wb(11,"mat-dialog-actions"),b.Wb(12,"button",9),b.dc("click",(function(){return e.close()})),b.Lc(13,"Cancel"),b.Vb(),b.Wb(14,"button",10),b.ic(15,"async"),b.Lc(16,"Save"),b.Vb(),b.Vb(),b.Vb()),2&t&&(b.Db(1),b.pc("ngIf",e.data.credit),b.Db(1),b.pc("ngIf",!e.data.credit),b.Db(3),b.pc("formGroup",e.form),b.Db(2),b.pc("ngIf",e.data.credit),b.Db(1),b.pc("ngIf",!e.data.credit),b.Db(1),b.pc("ngIf","cast"===e.data.type),b.Db(1),b.pc("ngIf","crew"===e.data.type),b.Db(4),b.pc("disabled",b.jc(15,8,e.loading$)))},directives:[n.t,I.a,u.v,u.m,T.f,T.c,D.b,d.a,T.i,Q.a,u.d,u.u,u.k,u.F,J.c,J.a,n.s,U.l],pipes:[n.b],styles:["crupdate-credit-modal{display:block;width:400px;max-width:100%}crupdate-credit-modal search-input input{border-color:var(--be-divider-default);margin-bottom:20px}"],encapsulation:2,changeDetection:0}),Object(s.b)([Object(o.d)(r.a.loading)],t.prototype,"loading$",void 0),t})();var Z=a("2hX1"),tt=a("EAOp"),et=a("5+WD"),at=a("Um6Z"),nt=a("CH4Q");function it(t,e){1&t&&(b.Wb(0,"th",8),b.Lc(1,"Character"),b.Vb())}function st(t,e){1&t&&(b.Wb(0,"th",9),b.Lc(1,"Department"),b.Vb())}function ot(t,e){1&t&&(b.Wb(0,"th",10),b.Lc(1,"Job"),b.Vb())}function ct(t,e){1&t&&(b.Wb(0,"button",21),b.Rb(1,"mat-icon",22),b.Vb())}function rt(t,e){if(1&t&&(b.Wb(0,"div"),b.Lc(1),b.Vb()),2&t){const t=b.hc().$implicit;b.Db(1),b.Mc(t.name)}}function lt(t,e){if(1&t&&(b.Wb(0,"td"),b.Lc(1),b.Vb()),2&t){const t=b.hc().$implicit;b.Db(1),b.Mc(t.pivot.character)}}function bt(t,e){if(1&t&&(b.Wb(0,"td"),b.Lc(1),b.Vb()),2&t){const t=b.hc().$implicit;b.Db(1),b.Mc(t.pivot.department)}}function dt(t,e){if(1&t&&(b.Wb(0,"td"),b.Lc(1),b.Vb()),2&t){const t=b.hc().$implicit;b.Db(1),b.Mc(t.pivot.job)}}function pt(t,e){if(1&t){const t=b.Xb();b.Wb(0,"tr",11),b.Wb(1,"td"),b.Wb(2,"div",12),b.Jc(3,ct,2,0,"button",13),b.Rb(4,"media-image",14),b.Wb(5,"span"),b.Lc(6),b.Vb(),b.Vb(),b.Jc(7,rt,2,1,"div",15),b.Vb(),b.Jc(8,lt,2,1,"td",16),b.Jc(9,bt,2,1,"td",16),b.Jc(10,dt,2,1,"td",16),b.Wb(11,"td",17),b.Wb(12,"button",18),b.dc("click",(function(){b.Ac(t);const a=e.$implicit;return b.hc().openCrupdateCreditModal(a)})),b.Rb(13,"mat-icon",19),b.Vb(),b.Wb(14,"button",18),b.dc("click",(function(){b.Ac(t);const a=e.$implicit;return b.hc().detachCredit(a)})),b.Rb(15,"mat-icon",20),b.Vb(),b.Vb(),b.Vb()}if(2&t){const t=e.$implicit,a=b.hc();b.Db(3),b.pc("ngIf","cast"===a.type),b.Db(1),b.pc("src",t.poster),b.Db(2),b.Mc(t.name),b.Db(2),b.pc("ngIf","cast"===a.type),b.Db(1),b.pc("ngIf","crew"===a.type),b.Db(1),b.pc("ngIf","crew"===a.type)}}function ut(t,e){1&t&&(b.Wb(0,"no-results-message",23),b.Wb(1,"span",24),b.Lc(2,"Nothing to Display."),b.Vb(),b.Vb())}let ht=(()=>{class t{constructor(t,e,a,n){this.dialog=t,this.store=e,this.toast=a,this.datatable=n}ngOnInit(){this.datatable.init()}ngOnChanges(t){t.mediaItem&&t.mediaItem.currentValue&&(this.datatable.data="cast"===this.type?this.getCast(this.mediaItem.credits):this.getCrew(this.mediaItem.credits))}ngOnDestroy(){this.datatable.destroy()}openCrupdateCreditModal(t){this.dialog.open(Y,{credit:t,type:this.type,mediaItem:this.mediaItem})}detachCredit(t){this.dialog.open($.a,{title:"Remove Credit",body:"Are you sure you want to remove this credit?",ok:"Remove"}).afterClosed().subscribe(e=>{e&&this.store.dispatch(new c.r(this.mediaItem,t)).subscribe(()=>{this.toast.open(V.a.CREDIT_REMOVE_SUCCESS)})})}changeCreditsOrder(t){this.store.selectSnapshot(r.a.loading)||this.store.dispatch(new c.e(this.mediaItem,t.previousIndex,t.currentIndex,this.type))}getCast(t){return t?t.filter(t=>"cast"===t.pivot.department):[]}getCrew(t){return t?t.filter(t=>"cast"!==t.pivot.department):[]}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(M.a),b.Qb(o.g),b.Qb(C.b),b.Qb(Z.a))},t.\u0275cmp=b.Kb({type:t,selectors:[["credits-panel"]],inputs:{mediaItem:"mediaItem",type:"type"},features:[b.Cb([Z.a]),b.Bb],decls:17,vars:10,consts:[["type","button","mat-raised-button","","color","accent","leftContent","","trans","",3,"click"],["cdkDropList","",1,"material-table",3,"cdkDropListDisabled","cdkDropListDropped"],["table-sort-header","","trans",""],["table-sort-header","pivot.character","trans","",4,"ngIf"],["table-sort-header","pivot.department","trans","",4,"ngIf"],["table-sort-header","pivot.job","trans","",4,"ngIf"],["cdkDrag","",4,"ngFor","ngForOf"],["svgImage","awards.svg",4,"ngIf"],["table-sort-header","pivot.character","trans",""],["table-sort-header","pivot.department","trans",""],["table-sort-header","pivot.job","trans",""],["cdkDrag",""],[1,"column-with-image"],["type","button","mat-icon-button","","cdkDragHandle","",4,"ngIf"],["size","small",3,"src"],[4,"cdkDragPreview"],[4,"ngIf"],[1,"edit-column"],["type","button","mat-icon-button","",3,"click"],["svgIcon","edit"],["svgIcon","close"],["type","button","mat-icon-button","","cdkDragHandle",""],["svgIcon","drag-handle"],["svgImage","awards.svg"],["primary-text","","trans",""]],template:function(t,e){1&t&&(b.Wb(0,"datatable-header"),b.Wb(1,"button",0),b.dc("click",(function(){return e.openCrupdateCreditModal()})),b.Lc(2,"Add Credit"),b.Vb(),b.Vb(),b.Wb(3,"table",1),b.dc("cdkDropListDropped",(function(t){return e.changeCreditsOrder(t)})),b.Wb(4,"thead"),b.Wb(5,"tr"),b.Wb(6,"th",2),b.Lc(7,"Name"),b.Vb(),b.Jc(8,it,2,0,"th",3),b.Jc(9,st,2,0,"th",4),b.Jc(10,ot,2,0,"th",5),b.Rb(11,"th"),b.Vb(),b.Vb(),b.Wb(12,"tbody"),b.Jc(13,pt,16,6,"tr",6),b.ic(14,"async"),b.Vb(),b.Vb(),b.Jc(15,ut,3,0,"no-results-message",7),b.ic(16,"async")),2&t&&(b.Db(3),b.pc("cdkDropListDisabled","crew"===e.type),b.Db(5),b.pc("ngIf","cast"===e.type),b.Db(1),b.pc("ngIf","crew"===e.type),b.Db(1),b.pc("ngIf","crew"===e.type),b.Db(3),b.pc("ngForOf",b.jc(14,6,e.datatable.data$)),b.Db(2),b.pc("ngIf",!b.jc(16,8,e.datatable.data$).length))},directives:[tt.a,D.b,d.a,et.d,at.a,n.t,n.s,et.a,w.a,et.c,I.a,et.b,nt.a],pipes:[n.b],styles:["[_nghost-%COMP%]{display:block;padding:0}.cdk-drag-handle[_ngcontent-%COMP%]{cursor:move;margin-right:10px}.cdk-drag-preview[_ngcontent-%COMP%]{padding:15px;font-size:1.5rem;border-radius:4px;background-color:var(--be-background);box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{background-color:var(--be-hover)}.cdk-drag-animating[_ngcontent-%COMP%], .cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"],changeDetection:0}),t})();function gt(t,e){1&t&&(b.Wb(0,"h2",30),b.Lc(1,"Edit Episode"),b.Vb())}function mt(t,e){1&t&&(b.Wb(0,"h2",30),b.Lc(1,"Create Episode"),b.Vb())}function ft(t,e){if(1&t&&(b.Wb(0,"div",31),b.Lc(1),b.Vb()),2&t){const t=e.ngIf;b.Db(1),b.Mc(t)}}let vt=(()=>{class t{constructor(t,e,a,n,i,s){this.store=t,this.toast=e,this.fb=a,this.uploadQueue=n,this.dialogRef=i,this.data=s,this.episode$=new l.a(null),this.errors$=new l.a({}),this.episodeForm=this.fb.group({name:["",[u.I.required,u.I.minLength(1)]],poster:["",[u.I.minLength(1),u.I.maxLength(250)]],description:["",[u.I.minLength(1)]],popularity:[50,[u.I.min(1),u.I.max(1e3)]],release_date:[""],episode_number:[""]})}ngOnInit(){this.data.episode?(this.bindToStoreEpisode(),this.episodeForm.patchValue(Object.assign(Object.assign({},this.episode$.value),{release_date:this.episode$.value.release_date.split(" ")[0]})),setTimeout(()=>this.loadEpisodeCredits())):this.episodeForm.patchValue({episode_number:this.data.season?this.data.season.episode_count+1:1})}confirm(){this.data.episode?this.updateEpisode():this.createEpisode()}close(){this.dialogRef.close()}createEpisode(){this.store.dispatch(new c.h(this.data.season,this.episodeForm.value)).subscribe(()=>{this.errors$.next({}),this.toast.open(V.a.EPISODE_CREATE_SUCCESS);const t=this.store.selectSnapshot(r.a.seasons).find(t=>t.id===this.data.season.id).episodes;this.data.episode=t[t.length-1]},t=>this.errors$.next(t.errors))}updateEpisode(){this.store.dispatch(new c.v(this.data.episode,this.episodeForm.value)).subscribe(()=>{this.errors$.next({}),this.toast.open(V.a.EPISODE_UPDATE_SUCCESS),this.close()},t=>this.errors$.next(t.errors))}uploadPoster(){Object(g.a)({types:[m.a.image]}).then(t=>{this.uploadQueue.start(t,{uri:"uploads/images",httpParams:{diskPrefix:"media-images/posters"}}).subscribe(t=>{this.episodeForm.patchValue({poster:t.fileEntry.url})})})}bindToStoreEpisode(){this.store.select(r.a.title).subscribe(t=>{if(t.seasons){const e=t.seasons.find(t=>t.number===this.data.episode.season_number).episodes.find(t=>t.episode_number===this.data.episode.episode_number);this.episode$.next(Object.assign({},e))}})}loadEpisodeCredits(){this.data.episode.credits||this.store.dispatch(new c.p(this.episode$.value)).toPromise()}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(o.g),b.Qb(C.b),b.Qb(u.h),b.Qb(h.a),b.Qb(T.h),b.Qb(T.a))},t.\u0275cmp=b.Kb({type:t,selectors:[["crupdate-episode-modal"]],features:[b.Cb([h.a])],decls:55,vars:30,consts:[[1,"modal-header"],["class","modal-title","mat-dialog-title","","trans","",4,"ngIf"],["type","button",1,"close-button","no-style","icon-button",3,"click"],["svgIcon","close"],["autocomplete","off","ngNativeValidate","",3,"formGroup","ngSubmit"],["animationDuration","0ms","color","accent",3,"dynamicHeight"],[3,"label"],[1,"many-inputs","primary-facts-panel"],[1,"input-container"],["for","name","trans",""],["type","text","formControlName","name","id","name","minlength","1","maxlength","250","required",""],["for","episode_number","trans",""],["type","number","formControlName","episode_number","id","episode_number","min","1","required",""],["class","error",4,"ngIf"],["for","poster","trans",""],[1,"input-with-action","action-left"],["type","button","mat-flat-button","","color","accent",3,"matTooltip","click"],["svgIcon","file-upload"],["type","text","formControlName","poster","id","poster","minlength","1","maxlength","250"],["for","release_date","trans",""],["type","date","formControlName","release_date","id","release_date","required",""],["for","description","trans",""],["type","text","formControlName","description","id","description","minlength","1","cdkTextareaAutosize","","cdkAutosizeMinRows","6"],["for","popularity","trans",""],["type","number","formControlName","popularity","id","popularity","min","1","max","1000"],[3,"label","disabled"],["type","cast",3,"mediaItem"],["type","crew",3,"mediaItem"],["type","button","mat-button","","trans","",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled"],["mat-dialog-title","","trans","",1,"modal-title"],[1,"error"]],template:function(t,e){1&t&&(b.Wb(0,"div",0),b.Jc(1,gt,2,0,"h2",1),b.Jc(2,mt,2,0,"h2",1),b.Wb(3,"button",2),b.dc("click",(function(){return e.close()})),b.Rb(4,"mat-icon",3),b.Vb(),b.Vb(),b.Wb(5,"form",4),b.dc("ngSubmit",(function(){return e.confirm()})),b.Wb(6,"mat-dialog-content"),b.Wb(7,"mat-tab-group",5),b.Wb(8,"mat-tab",6),b.ic(9,"trans"),b.Wb(10,"div",7),b.Wb(11,"div",8),b.Wb(12,"label",9),b.Lc(13,"Title"),b.Vb(),b.Rb(14,"input",10),b.Vb(),b.Wb(15,"div",8),b.Wb(16,"label",11),b.Lc(17,"Number"),b.Vb(),b.Rb(18,"input",12),b.Jc(19,ft,2,1,"div",13),b.ic(20,"async"),b.Vb(),b.Wb(21,"div",8),b.Wb(22,"label",14),b.Lc(23,"Poster"),b.Vb(),b.Wb(24,"div",15),b.Wb(25,"button",16),b.dc("click",(function(){return e.uploadPoster()})),b.ic(26,"trans"),b.Rb(27,"mat-icon",17),b.Vb(),b.Rb(28,"input",18),b.Vb(),b.Vb(),b.Wb(29,"div",8),b.Wb(30,"label",19),b.Lc(31,"Release Date"),b.Vb(),b.Rb(32,"input",20),b.Vb(),b.Wb(33,"div",8),b.Wb(34,"label",21),b.Lc(35,"Overview"),b.Vb(),b.Rb(36,"textarea",22),b.Vb(),b.Wb(37,"div",8),b.Wb(38,"label",23),b.Lc(39,"Popularity"),b.Vb(),b.Rb(40,"input",24),b.Vb(),b.Vb(),b.Vb(),b.Wb(41,"mat-tab",25),b.ic(42,"trans"),b.Rb(43,"credits-panel",26),b.ic(44,"async"),b.Vb(),b.Wb(45,"mat-tab",25),b.ic(46,"trans"),b.Rb(47,"credits-panel",27),b.ic(48,"async"),b.Vb(),b.Vb(),b.Vb(),b.Wb(49,"mat-dialog-actions"),b.Wb(50,"button",28),b.dc("click",(function(){return e.close()})),b.Lc(51,"Cancel"),b.Vb(),b.Wb(52,"button",29),b.ic(53,"async"),b.Lc(54,"Save"),b.Vb(),b.Vb(),b.Vb()),2&t&&(b.Db(1),b.pc("ngIf",e.data.episode),b.Db(1),b.pc("ngIf",!e.data.episode),b.Db(3),b.pc("formGroup",e.episodeForm),b.Db(2),b.pc("dynamicHeight",!0),b.Db(1),b.pc("label",b.jc(9,14,"Primary Facts")),b.Db(11),b.pc("ngIf",b.jc(20,16,e.errors$).episode_number),b.Db(6),b.pc("matTooltip",b.jc(26,18,"Upload poster")),b.Db(16),b.pc("label",b.jc(42,20,"Cast"))("disabled",!e.data.episode),b.Db(2),b.pc("mediaItem",b.jc(44,22,e.episode$)),b.Db(2),b.pc("label",b.jc(46,24,"Crew"))("disabled",!e.data.episode),b.Db(2),b.pc("mediaItem",b.jc(48,26,e.episode$)),b.Db(5),b.pc("disabled",b.jc(53,28,e.loading$)))},directives:[n.t,I.a,u.v,u.m,T.f,j.c,j.a,d.a,u.d,u.u,u.k,u.q,u.p,u.F,u.A,D.b,O.a,P.b,ht,T.c,T.i],pipes:[k.a,n.b],styles:["[_nghost-%COMP%]{display:block;width:750px;max-width:100%}label[_ngcontent-%COMP%]{text-transform:capitalize}.primary-facts-panel[_ngcontent-%COMP%], credits-panel[_ngcontent-%COMP%]{padding:20px 0}"],changeDetection:0}),Object(s.b)([Object(o.d)(r.a.loading)],t.prototype,"loading$",void 0),t})();var yt=a("iB19");function Vt(t,e){if(1&t){const t=b.Xb();b.Wb(0,"tr"),b.Wb(1,"td"),b.Wb(2,"div",7),b.Rb(3,"media-image",8),b.Wb(4,"span"),b.Lc(5),b.Vb(),b.Vb(),b.Vb(),b.Wb(6,"td"),b.Lc(7),b.Vb(),b.Wb(8,"td"),b.Lc(9),b.ic(10,"formattedDate"),b.Vb(),b.Wb(11,"td",9),b.Wb(12,"button",10),b.dc("click",(function(){b.Ac(t);const a=e.$implicit;return b.hc().openCrupdateEpisodeModal(a)})),b.Rb(13,"mat-icon",11),b.Vb(),b.Wb(14,"button",10),b.dc("click",(function(){b.Ac(t);const a=e.$implicit;return b.hc().deleteEpisode(a)})),b.Rb(15,"mat-icon",12),b.Vb(),b.Vb(),b.Vb()}if(2&t){const t=e.$implicit;b.Db(3),b.pc("src",t.poster)("alt",t.name),b.Db(2),b.Mc(t.name),b.Db(2),b.Mc(t.episode_number),b.Db(2),b.Mc(b.jc(10,5,t.release_date))}}function xt(t,e){1&t&&(b.Wb(0,"no-results-message"),b.Wb(1,"span",13),b.Lc(2,"Nothing to Display."),b.Vb(),b.Wb(3,"span",14),b.Lc(4,"This season does not have any episodes yet."),b.Vb(),b.Vb())}let Wt=(()=>{class t{constructor(t,e,a,n,i){this.store=t,this.dialog=e,this.toast=a,this.route=n,this.datatable=i,this.trackByFn=(t,e)=>e.id}ngOnInit(){this.datatable.init()}ngAfterViewInit(){const t=+this.route.snapshot.params.episodeNumber;if(t){const e=this.season.episodes.find(e=>e.episode_number===t);e&&this.openCrupdateEpisodeModal(e)}}ngOnChanges(t){t.season.currentValue&&t.season.currentValue.episodes&&(this.datatable.data=this.season.episodes)}ngOnDestroy(){this.datatable.destroy()}deleteEpisode(t){this.dialog.open($.a,{title:"Delete Episode",body:"Are you sure you want to delete this episode?",ok:"Delete"}).afterClosed().subscribe(e=>{e&&this.store.dispatch(new c.j(t)).subscribe(()=>{this.toast.open(V.a.EPISODE_DELETE_SUCCESS)})})}openCrupdateEpisodeModal(t){this.dialog.open(vt,{episode:t,season:this.season},{panelClass:"crupdate-episode-modal-container"})}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(o.g),b.Qb(M.a),b.Qb(C.b),b.Qb(i.a),b.Qb(Z.a))},t.\u0275cmp=b.Kb({type:t,selectors:[["episodes-panel"]],inputs:{season:"season"},features:[b.Cb([Z.a]),b.Bb],decls:19,vars:7,consts:[["pluralResourceName","episodes"],["leftContent",""],["mat-raised-button","","color","accent","trans","",3,"click"],[1,"material-table"],["table-sort-header","","trans",""],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"column-with-image"],["size","small",3,"src","alt"],[1,"edit-column"],["type","button","mat-icon-button","",3,"click"],["svgIcon","edit"],["svgIcon","close"],["primary-text","","trans",""],["secondary-text","","trans",""]],template:function(t,e){1&t&&(b.Wb(0,"datatable-header",0),b.Ub(1,1),b.Wb(2,"button",2),b.dc("click",(function(){return e.openCrupdateEpisodeModal()})),b.Lc(3,"Add Episode"),b.Vb(),b.Tb(),b.Vb(),b.Wb(4,"table",3),b.Wb(5,"thead"),b.Wb(6,"tr"),b.Wb(7,"th",4),b.Lc(8,"Name"),b.Vb(),b.Wb(9,"th",4),b.Lc(10,"Number"),b.Vb(),b.Wb(11,"th",4),b.Lc(12,"Release Date"),b.Vb(),b.Rb(13,"th"),b.Vb(),b.Vb(),b.Wb(14,"tbody"),b.Jc(15,Vt,16,7,"tr",5),b.ic(16,"async"),b.Vb(),b.Vb(),b.Jc(17,xt,5,0,"no-results-message",6),b.ic(18,"async")),2&t&&(b.Db(15),b.pc("ngForOf",b.jc(16,3,e.datatable.data$))("ngForTrackBy",e.trackByFn),b.Db(2),b.pc("ngIf",!b.jc(18,5,e.datatable.data$).length))},directives:[tt.a,D.b,d.a,at.a,n.s,n.t,w.a,I.a,nt.a],pipes:[n.b,yt.a],styles:["episodes-panel{display:block}episodes-panel .table-header{display:flex;align-items:center;margin-bottom:15px}episodes-panel .table-header .input-container{max-width:300px;margin-left:auto;position:relative}episodes-panel .table-header .input-container .mat-icon{position:absolute;top:11px;right:8px}episodes-panel no-results-message{margin-top:50px}"],encapsulation:2,changeDetection:0}),t})();function Ct(t,e){if(1&t&&(b.Wb(0,"mat-tab-group",8),b.Wb(1,"mat-tab",9),b.ic(2,"trans"),b.Rb(3,"episodes-panel",10),b.Vb(),b.Wb(4,"mat-tab",9),b.ic(5,"trans"),b.Rb(6,"credits-panel",11),b.Vb(),b.Wb(7,"mat-tab",9),b.ic(8,"trans"),b.Rb(9,"credits-panel",12),b.Vb(),b.Vb()),2&t){const t=b.hc().$implicit;b.Db(1),b.pc("label",b.jc(2,6,"Episodes")),b.Db(2),b.pc("season",t),b.Db(1),b.pc("label",b.jc(5,8,"Regular Cast")),b.Db(2),b.pc("mediaItem",t),b.Db(1),b.pc("label",b.jc(8,10,"Regular Crew")),b.Db(2),b.pc("mediaItem",t)}}function wt(t,e){if(1&t){const t=b.Xb();b.Wb(0,"mat-expansion-panel",4),b.ic(1,"async"),b.Wb(2,"mat-expansion-panel-header"),b.Wb(3,"mat-panel-title"),b.Wb(4,"span",5),b.Lc(5,"Season"),b.Vb(),b.Lc(6," \xa0 "),b.Wb(7,"span"),b.Lc(8),b.Vb(),b.Vb(),b.Vb(),b.Jc(9,Ct,10,12,"ng-template",6),b.Wb(10,"mat-action-row"),b.Wb(11,"button",7),b.dc("click",(function(){b.Ac(t);const a=e.$implicit;return b.hc(2).maybeDeleteSeason(a)})),b.Lc(12,"Delete"),b.Vb(),b.Vb(),b.Vb()}if(2&t){const t=e.$implicit,a=b.hc(2);b.pc("expanded",b.jc(1,3,a.activeSeason$)===t.number)("ngClass","season-"+t.number+"-panel"),b.Db(8),b.Mc(t.number)}}function Dt(t,e){1&t&&(b.Wb(0,"no-results-message"),b.Wb(1,"span",13),b.Lc(2,"Nothing to Display."),b.Vb(),b.Wb(3,"span",14),b.Lc(4,"This series does not have any seasons yet."),b.Vb(),b.Vb())}function Ot(t,e){if(1&t){const t=b.Xb();b.Ub(0),b.Wb(1,"div",1),b.Wb(2,"button",2),b.dc("click",(function(){return b.Ac(t),b.hc().addSeason()})),b.ic(3,"async"),b.Lc(4,"Add Season"),b.Vb(),b.Vb(),b.Wb(5,"mat-accordion"),b.Jc(6,wt,13,5,"mat-expansion-panel",3),b.Vb(),b.Jc(7,Dt,5,0,"no-results-message",0),b.Tb()}if(2&t){const t=e.ngIf,a=b.hc();b.Db(2),b.pc("disabled",b.jc(3,4,a.loading$)),b.Db(4),b.pc("ngForOf",t)("ngForTrackBy",a.trackByFn),b.Db(1),b.pc("ngIf",!t.length)}}let It=(()=>{class t{constructor(t,e,a,n,i){this.store=t,this.modal=e,this.toast=a,this.route=n,this.el=i,this.activeSeason$=new l.a(1)}ngOnInit(){this.activeSeason$.next(+this.route.snapshot.params.seasonNumber||1)}ngAfterViewInit(){setTimeout(()=>{var t;this.activeSeason$.value>1&&(null===(t=this.el.nativeElement.querySelector(`.season-${this.activeSeason$.value}-panel`))||void 0===t||t.scrollIntoView({behavior:"smooth",block:"start",inline:"start"}))})}addSeason(){this.store.dispatch(new c.i).subscribe(()=>{this.toast.open(V.a.SEASON_CREATE_SUCCESS)})}maybeDeleteSeason(t){this.modal.open($.a,{title:"Delete Season",body:"Are you sure you want to delete this season?",bodyBold:"This will also delete all episodes attached to this season.",ok:"Delete"}).afterClosed().subscribe(e=>{e&&this.store.dispatch(new c.l(t)).subscribe(()=>{this.toast.open(V.a.SEASON_DELETE_SUCCESS)})})}trackByFn(t,e){return e.id}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(o.g),b.Qb(M.a),b.Qb(C.b),b.Qb(i.a),b.Qb(b.m))},t.\u0275cmp=b.Kb({type:t,selectors:[["seasons-panel"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"header"],["type","button","mat-raised-button","","color","accent",3,"disabled","click"],["class","mat-elevation-z0",3,"expanded","ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"mat-elevation-z0",3,"expanded","ngClass"],["trans",""],["matExpansionPanelContent",""],["type","button","mat-button","","trans","",3,"click"],["animationDuration","0ms","color","accent"],[3,"label"],[3,"season"],["type","cast",3,"mediaItem"],["type","crew",3,"mediaItem"],["primary-text","","trans",""],["secondary-text","","trans",""]],template:function(t,e){1&t&&(b.Jc(0,Ot,8,6,"ng-container",0),b.ic(1,"async")),2&t&&b.pc("ngIf",b.jc(1,1,e.seasons$))},directives:[n.t,D.b,S.a,n.s,S.c,n.q,S.f,S.g,d.a,S.e,S.d,j.c,j.a,Wt,ht,nt.a],pipes:[n.b,k.a],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     datatable-header{height:auto}.header[_ngcontent-%COMP%]{margin-bottom:20px}.mat-expansion-panel[_ngcontent-%COMP%]{border:1px solid var(--be-divider-default);border-radius:4px;margin-bottom:10px}.mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%]{font-weight:500;font-size:1.5rem}"],changeDetection:0}),Object(s.b)([Object(o.d)(r.a.seasons)],t.prototype,"seasons$",void 0),Object(s.b)([Object(o.d)(r.a.loading)],t.prototype,"loading$",void 0),t})();var Pt=a("35We"),kt=a("vxfF");function Lt(t,e){if(1&t){const t=b.Xb();b.Wb(0,"div",4),b.dc("cdkDropListDropped",(function(){return b.Ac(t),b.hc().dropListDropped()})),b.Wb(1,"media-image",7),b.dc("cdkDragMoved",(function(e){return b.Ac(t),b.hc().dragMoved(e)})),b.Wb(2,"button",8),b.dc("click",(function(){b.Ac(t);const a=e.$implicit;return b.hc().deleteImage(a)})),b.Rb(3,"mat-icon",9),b.Vb(),b.Vb(),b.Vb()}if(2&t){const t=e.$implicit,a=b.hc();b.pc("cdkDropListEnterPredicate",a.dropListEnterPredicate),b.Db(1),b.pc("src",t.url)}}let Rt=(()=>{class t{constructor(t,e,a,n){this.images=t,this.store=e,this.toast=a,this.viewportRuler=n,this.dropListEnterPredicate=(t,e)=>{if(e===this.placeholder)return!0;if(e!==this.activeContainer)return!1;const a=this.placeholder.element.nativeElement,n=t.dropContainer.element.nativeElement,i=e.element.nativeElement,s=_t(i.parentElement.children,this.source?a:n),o=_t(i.parentElement.children,i);return this.source||(this.sourceIndex=s,this.source=t.dropContainer,a.style.width=n.clientWidth+"px",a.style.height=n.clientHeight+"px",n.parentElement.removeChild(n)),this.targetIndex=o,this.target=e,a.style.display="",i.parentElement.insertBefore(a,o>s?i.nextSibling:i),this.placeholder._dropListRef.enter(t._dragRef,t.element.nativeElement.offsetLeft,t.element.nativeElement.offsetTop),!1}}uploadImage(){Object(g.a)({types:[m.a.image]}).then(t=>{const e={modelId:this.store.selectSnapshot(r.a.title).id};this.images.create(t[0],e).subscribe(t=>{this.store.dispatch(new c.b(t.image)).subscribe(()=>{this.toast.open(V.a.IMAGE_CREATE_SUCCESS)})})})}deleteImage(t){this.store.dispatch(new c.k(t)).subscribe(()=>{this.toast.open(V.a.IMAGE_DELETE_SUCCESS)})}dragMoved(t){const e=this.getPointerPositionOnPage(t.event);this.listGroup._items.forEach(t=>{(function(t,e,a){const{top:n,bottom:i,left:s,right:o}=t.element.nativeElement.getBoundingClientRect();return a>=n&&a<=i&&e>=s&&e<=o})(t,e.x,e.y)&&(this.activeContainer=t)})}dropListDropped(){if(!this.target)return;const t=this.placeholder.element.nativeElement,e=t.parentElement;t.style.display="none",e.removeChild(t),e.appendChild(t),e.insertBefore(this.source.element.nativeElement,e.children[this.sourceIndex]),this.target=null,this.source=null,this.sourceIndex!==this.targetIndex&&this.store.dispatch(new c.f(this.sourceIndex,this.targetIndex))}getPointerPositionOnPage(t){const e=function(t){return t.type.startsWith("touch")}(t)?t.touches[0]||t.changedTouches[0]:t,a=this.viewportRuler.getViewportScrollPosition();return{x:e.pageX-a.left,y:e.pageY-a.top}}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(Pt.a),b.Qb(o.g),b.Qb(C.b),b.Qb(kt.e))},t.\u0275cmp=b.Kb({type:t,selectors:[["images-panel"]],viewQuery:function(t,e){var a;1&t&&(b.Sc(et.e,!0),b.Sc(et.d,!0)),2&t&&(b.wc(a=b.ec())&&(e.listGroup=a.first),b.wc(a=b.ec())&&(e.placeholder=a.first))},features:[b.Cb([h.a])],decls:9,vars:4,consts:[["mat-raised-button","","color","accent",3,"click"],["svgIcon","add"],["trans",""],["cdkDropListGroup",""],["cdkDropList","",3,"cdkDropListEnterPredicate","cdkDropListDropped"],[1,"images-grid"],["cdkDropList","",3,"cdkDropListEnterPredicate","cdkDropListDropped",4,"ngFor","ngForOf"],["cdkDrag","","size","medium","mode","landscape",1,"images-panel-media-image",3,"src","cdkDragMoved"],["mat-mini-fab","","color","warn",3,"click"],["svgIcon","delete"]],template:function(t,e){1&t&&(b.Wb(0,"button",0),b.dc("click",(function(){return e.uploadImage()})),b.Rb(1,"mat-icon",1),b.Wb(2,"span",2),b.Lc(3,"Upload Image"),b.Vb(),b.Vb(),b.Wb(4,"div",3),b.Wb(5,"div",4),b.dc("cdkDropListDropped",(function(){return e.dropListDropped()})),b.Vb(),b.Wb(6,"div",5),b.Jc(7,Lt,4,2,"div",6),b.ic(8,"async"),b.Vb(),b.Vb()),2&t&&(b.Db(5),b.pc("cdkDropListEnterPredicate",e.dropListEnterPredicate),b.Db(2),b.pc("ngForOf",b.jc(8,2,e.images$)))},directives:[D.b,I.a,d.a,et.e,et.d,n.s,w.a,et.a],pipes:[n.b],styles:[".mat-raised-button[_ngcontent-%COMP%]{display:block;margin-bottom:25px}.images-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);grid-auto-rows:1fr;grid-gap:15px;overflow:hidden}media-image[_ngcontent-%COMP%]{display:block;box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12);border-radius:4px;overflow:hidden;position:relative;cursor:move;transition:box-shadow .2s cubic-bezier(0,0,.2,1)}media-image[_ngcontent-%COMP%]:active{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12);opacity:.6}.mat-mini-fab[_ngcontent-%COMP%]{position:absolute;bottom:8px;right:8px}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.3}.cdk-drag-preview[_ngcontent-%COMP%]{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}"],changeDetection:0}),Object(s.b)([Object(o.d)(r.a.images)],t.prototype,"images$",void 0),t})();function _t(t,e){return Array.prototype.indexOf.call(t,e)}var $t=a("SRuq"),Mt=a("WAq7"),St=a("CZpq"),jt=a("A5z7");function Tt(t,e){if(1&t){const t=b.Xb();b.Wb(0,"form",9),b.dc("ngSubmit",(function(){b.Ac(t);const e=b.hc();return e.selectTagsFromString(e.formControl.value)})),b.Wb(1,"div",10),b.Rb(2,"input",11),b.Wb(3,"button",12),b.Lc(4,"Add"),b.Vb(),b.Vb(),b.Vb()}if(2&t){const t=b.hc(),e=b.xc(8);b.Db(2),b.pc("matAutocomplete",e)("formControl",t.formControl)}}const Et=function(t){return{tagName:t}};function Nt(t,e){if(1&t&&(b.Wb(0,"p",13),b.Lc(1,"Separate :tagName with comma."),b.Vb()),2&t){const t=b.hc();b.pc("transValues",b.tc(1,Et,t.pluralName))}}function At(t,e){if(1&t){const t=b.Xb();b.Wb(0,"mat-chip",14),b.dc("removed",(function(){b.Ac(t);const a=e.$implicit;return b.hc().deselectTag(a)})),b.Wb(1,"span"),b.Lc(2),b.Vb(),b.Rb(3,"mat-icon",15),b.Vb()}if(2&t){const t=e.$implicit,a=b.hc();b.pc("removable",!a.readonly),b.Db(2),b.Mc(t)}}function Ft(t,e){if(1&t){const t=b.Xb();b.Wb(0,"div",20),b.dc("click",(function(){b.Ac(t);const a=e.$implicit;return b.hc(2).selectTags([a.name])})),b.Lc(1),b.Vb()}if(2&t){const t=e.$implicit;b.Db(1),b.Mc(t.display_name)}}function Qt(t,e){if(1&t&&(b.Wb(0,"div",16),b.Wb(1,"p",17),b.Lc(2,"Choose from existing :tagName:"),b.Vb(),b.Wb(3,"div",18),b.Jc(4,Ft,2,1,"div",19),b.ic(5,"async"),b.Vb(),b.Vb()),2&t){const t=b.hc();b.Db(1),b.pc("transValues",b.tc(4,Et,t.pluralName)),b.Db(3),b.pc("ngForOf",b.jc(5,2,t.existingTags$))}}function Jt(t,e){if(1&t&&(b.Wb(0,"mat-option",21),b.Lc(1),b.Vb()),2&t){const t=e.$implicit;b.pc("value",t.name),b.Db(1),b.Mc(t.display_name)}}let Ut=(()=>{class t{constructor(t){this.tagService=t,this.readonly=!1,this.pluralName="tags",this.formControl=new u.i,this.selectedTags$=new l.a([]),this.existingTags$=new l.a([]),this.suggestedTags$=new l.a([])}ngOnInit(){this.tagService.index({perPage:15,type:this.tagType}).subscribe(t=>{this.existingTags$.next(t.pagination.data.filter(t=>"status"!==t.type))}),this.formControl.valueChanges.subscribe(t=>{const e=t?this.existingTags$.value.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())):[];this.suggestedTags$.next(e)})}writeValue(t){this.selectTags(t,{skipPropagate:!0,override:!0})}registerOnChange(t){this.propagateChange=t}registerOnTouched(){}selectTags(t,e={}){const a=(t||[]).map(t=>t.trim()).filter(t=>!this.selectedTags$.value.includes(t));e.override?this.selectedTags$.next(a):a.length&&this.selectedTags$.next([...this.selectedTags$.value,...a]),this.formControl.reset(),e.skipPropagate||this.propagateChange(this.selectedTags$.value)}deselectTag(t){const e=this.selectedTags$.value.slice();e.splice(e.indexOf(t),1),this.selectedTags$.next(e),this.propagateChange(this.selectedTags$.value)}selectTagsFromString(t){const e=t.split(",").map(t=>Object(Mt.a)(t));this.selectTags(e)}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(St.a))},t.\u0275cmp=b.Kb({type:t,selectors:[["tags-manager"]],inputs:{readonly:"readonly",tagType:"tagType",pluralName:"pluralName"},features:[b.Cb([{provide:u.s,useExisting:t,multi:!0}])],decls:11,vars:10,consts:[["class","input-container","ngNativeValidate","",3,"ngSubmit",4,"ngIf"],["class","main-info","trans","",3,"transValues",4,"ngIf"],[1,"selected-tags"],[3,"selectable"],[3,"removable","removed",4,"ngFor","ngForOf"],["class","existing-tags",4,"ngIf"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["ngNativeValidate","",1,"input-container",3,"ngSubmit"],[1,"input-with-action"],["type","text","required","",1,"tags-string-input",3,"matAutocomplete","formControl"],["type","submit","mat-flat-button","","color","accent","trans","",1,"add-tags-button"],["trans","",1,"main-info",3,"transValues"],[3,"removable","removed"],["svgIcon","cancel","matChipRemove",""],[1,"existing-tags"],["trans","",3,"transValues"],[1,"existing-tags-list"],["class","existing-tag-name",3,"click",4,"ngFor","ngForOf"],[1,"existing-tag-name",3,"click"],[3,"value"]],template:function(t,e){1&t&&(b.Jc(0,Tt,5,2,"form",0),b.Jc(1,Nt,2,3,"p",1),b.Wb(2,"div",2),b.Wb(3,"mat-chip-list",3),b.Jc(4,At,4,2,"mat-chip",4),b.ic(5,"async"),b.Vb(),b.Vb(),b.Jc(6,Qt,6,6,"div",5),b.Wb(7,"mat-autocomplete",6,7),b.dc("optionSelected",(function(t){return e.selectTags([t.option.value])})),b.Jc(9,Jt,2,2,"mat-option",8),b.ic(10,"async"),b.Vb()),2&t&&(b.pc("ngIf",!e.readonly),b.Db(1),b.pc("ngIf",!e.readonly),b.Db(2),b.pc("selectable",!1),b.Db(1),b.pc("ngForOf",b.jc(5,6,e.selectedTags$)),b.Db(2),b.pc("ngIf",!e.readonly),b.Db(3),b.pc("ngForOf",b.jc(10,8,e.suggestedTags$)))},directives:[n.t,jt.c,n.s,J.a,u.v,u.w,J.c,u.d,u.F,u.u,u.j,D.b,d.a,jt.a,I.a,jt.d,U.l],pipes:[n.b],styles:["[_nghost-%COMP%]{display:block}.selected-tag[_ngcontent-%COMP%]{margin:0 10px 10px 0;display:inline-block}.main-info[_ngcontent-%COMP%]{margin-top:5px;font-size:1.3rem}.existing-tags[_ngcontent-%COMP%]{margin-top:25px}.existing-tags[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:5px;font-size:1.3rem;color:var(--be-secondary-text)}.existing-tags-list[_ngcontent-%COMP%]{border:1px solid var(--be-divider-default);padding:8px;height:78px;overflow:auto}.existing-tag-name[_ngcontent-%COMP%]{display:inline-block;margin-right:6px;color:var(--be-link);text-decoration:underline;font-size:1.2rem;cursor:pointer}"],changeDetection:0}),t})();const Xt=function(t){return{tagName:t}};let zt=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.selectedTagsControl=new u.i,this.pluralName=this.data.pluralName||"tags"}close(){this.dialogRef.close()}confirm(){this.dialogRef.close(this.selectedTagsControl.value)}noTagsSelected(){var t;return!(null===(t=this.selectedTagsControl.value)||void 0===t?void 0:t.length)}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(T.h),b.Qb(T.a))},t.\u0275cmp=b.Kb({type:t,selectors:[["tag-manager-modal"]],decls:12,vars:10,consts:[[1,"modal-header"],["mat-dialog-title","","trans","",3,"transValues"],["type","button","mat-icon-button","","tabindex","-1",1,"close-button",3,"click"],["svgIcon","close"],[3,"tagType","pluralName","formControl"],["type","button","mat-button","","trans","",1,"cancel-button",3,"click"],["type","button","mat-raised-button","","color","accent","trans","",1,"submit-button",3,"disabled","transValues","click"]],template:function(t,e){1&t&&(b.Wb(0,"div",0),b.Wb(1,"h2",1),b.Lc(2,"Select :tagName"),b.Vb(),b.Wb(3,"button",2),b.dc("click",(function(){return e.close()})),b.Rb(4,"mat-icon",3),b.Vb(),b.Vb(),b.Wb(5,"mat-dialog-content"),b.Rb(6,"tags-manager",4),b.Vb(),b.Wb(7,"mat-dialog-actions"),b.Wb(8,"button",5),b.dc("click",(function(){return e.close()})),b.Lc(9,"Cancel"),b.Vb(),b.Wb(10,"button",6),b.dc("click",(function(){return e.confirm()})),b.Lc(11,"Merge :tagName"),b.Vb(),b.Vb()),2&t&&(b.Db(1),b.pc("transValues",b.tc(6,Xt,e.pluralName)),b.Db(5),b.pc("tagType",e.data.tagType)("pluralName",e.pluralName)("formControl",e.selectedTagsControl),b.Db(4),b.pc("disabled",e.noTagsSelected())("transValues",b.tc(8,Xt,e.pluralName)))},directives:[T.i,d.a,D.b,I.a,T.f,Ut,u.u,u.j,T.c],styles:["[_nghost-%COMP%]{display:block;width:400px;max-width:100%}.mat-dialog-title[_ngcontent-%COMP%], .submit-button[_ngcontent-%COMP%]{text-transform:capitalize}"],changeDetection:0}),t})();function qt(t,e){if(1&t){const t=b.Xb();b.Wb(0,"tr"),b.Wb(1,"td"),b.Lc(2),b.Vb(),b.Wb(3,"td"),b.Lc(4),b.Vb(),b.Wb(5,"td",5),b.Wb(6,"button",6),b.dc("click",(function(){b.Ac(t);const a=e.$implicit;return b.hc().detachTag(a)})),b.Rb(7,"mat-icon",7),b.Vb(),b.Vb(),b.Vb()}if(2&t){const t=e.$implicit;b.Db(2),b.Mc(t.name),b.Db(2),b.Mc(t.display_name||"-")}}function Kt(t,e){1&t&&(b.Wb(0,"no-results-message",8),b.Wb(1,"span",9),b.Lc(2,"Nothing to display"),b.Vb(),b.Vb())}let Bt=(()=>{class t{constructor(t,e,a,n){this.store=t,this.modal=e,this.toast=a,this.datatable=n}ngOnInit(){this.datatable.init(),this.getTagObservable().subscribe(t=>{this.datatable.data=t||[]})}ngOnDestroy(){this.datatable.destroy()}openTagManagerModal(){this.modal.open(zt,{tagType:this.type,pluralName:"production_country"===this.type?"countries":this.type+"s"}).beforeClosed().subscribe(t=>{t&&t.length&&this.store.dispatch(new c.d(t,this.type))})}detachTag(t){this.store.dispatch(new c.n(t)).subscribe(()=>{this.toast.open(V.a.TAG_DETACH_SUCCESS)})}getTagObservable(){return this.store.select("keyword"===this.type?r.a.keywords:"genre"===this.type?r.a.genres:r.a.countries)}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(o.g),b.Qb(M.a),b.Qb(C.b),b.Qb(Z.a))},t.\u0275cmp=b.Kb({type:t,selectors:[["tags-panel"]],inputs:{type:"type",displayType:"displayType"},features:[b.Cb([Z.a])],decls:18,vars:12,consts:[["mat-raised-button","","color","accent","leftContent","",3,"click"],[1,"material-table"],["table-sort-header","","trans",""],[4,"ngFor","ngForOf"],["svgImage","folder.svg",4,"ngIf"],[1,"edit-column"],["mat-icon-button","",3,"click"],["svgIcon","close"],["svgImage","folder.svg"],["primary-text","","trans",""]],template:function(t,e){1&t&&(b.Wb(0,"datatable-header"),b.Wb(1,"button",0),b.dc("click",(function(){return e.openTagManagerModal()})),b.Lc(2),b.ic(3,"trans"),b.ic(4,"trans"),b.Vb(),b.Vb(),b.Wb(5,"table",1),b.Wb(6,"thead"),b.Wb(7,"tr"),b.Wb(8,"th",2),b.Lc(9,"Name"),b.Vb(),b.Wb(10,"th",2),b.Lc(11,"Display Name"),b.Vb(),b.Rb(12,"th"),b.Vb(),b.Vb(),b.Wb(13,"tbody"),b.Jc(14,qt,8,2,"tr",3),b.ic(15,"async"),b.Vb(),b.Vb(),b.Jc(16,Kt,3,0,"no-results-message",4),b.ic(17,"async")),2&t&&(b.Db(2),b.Oc(" ",b.jc(3,4,"Add")," ",b.jc(4,6,e.displayType||e.type+"s")," "),b.Db(12),b.pc("ngForOf",b.jc(15,8,e.datatable.data$)),b.Db(2),b.pc("ngIf",!b.jc(17,10,e.datatable.data$).length))},directives:[tt.a,D.b,at.a,d.a,n.s,n.t,I.a,nt.a],pipes:[k.a,n.b],styles:["[_nghost-%COMP%]{padding:0}"],changeDetection:0}),t})();var Gt=a("/be1");function Ht(t,e){1&t&&b.Rb(0,"primary-facts-panel",15)}function Yt(t,e){1&t&&b.Rb(0,"seasons-panel",15)}function Zt(t,e){1&t&&b.Rb(0,"images-panel",15)}function te(t,e){if(1&t&&b.Rb(0,"video-index",16),2&t){const t=b.hc(2);b.pc("title",t.title)}}function ee(t,e){if(1&t&&b.Rb(0,"credits-panel",17),2&t){const t=b.hc(2);b.pc("mediaItem",t.title)}}function ae(t,e){if(1&t&&b.Rb(0,"credits-panel",18),2&t){const t=b.hc(2);b.pc("mediaItem",t.title)}}function ne(t,e){1&t&&b.Rb(0,"tags-panel",19)}function ie(t,e){1&t&&b.Rb(0,"tags-panel",20)}function se(t,e){1&t&&b.Rb(0,"tags-panel",21)}function oe(t,e){if(1&t&&b.Rb(0,"reviews-index",16),2&t){const t=b.hc(2);b.pc("title",t.title)}}function ce(t,e){1&t&&(b.Wb(0,"p",22),b.Lc(1,'Save from "Primary Facts" panel in order to enable other menu items.'),b.Vb())}function re(t,e){if(1&t){const t=b.Xb();b.Ub(0),b.Jc(1,Ht,1,0,"primary-facts-panel",1),b.Jc(2,Yt,1,0,"seasons-panel",1),b.Jc(3,Zt,1,0,"images-panel",1),b.Jc(4,te,1,1,"video-index",2),b.Jc(5,ee,1,1,"credits-panel",3),b.Jc(6,ae,1,1,"credits-panel",4),b.Jc(7,ne,1,0,"tags-panel",5),b.Jc(8,ie,1,0,"tags-panel",6),b.Jc(9,se,1,0,"tags-panel",7),b.Jc(10,oe,1,1,"reviews-index",2),b.Wb(11,"aside",8),b.Wb(12,"div",9),b.Lc(13,"Edit"),b.Vb(),b.Wb(14,"div",10),b.Wb(15,"button",11),b.dc("click",(function(){return b.Ac(t),b.hc().openPanel("primaryFacts")})),b.Lc(16,"Primary Facts"),b.Vb(),b.Wb(17,"button",12),b.dc("click",(function(){return b.Ac(t),b.hc().openPanel("seasons")})),b.Lc(18,"Seasons"),b.Vb(),b.Wb(19,"button",12),b.dc("click",(function(){return b.Ac(t),b.hc().openPanel("images")})),b.Lc(20,"Images"),b.Vb(),b.Wb(21,"button",12),b.dc("click",(function(){return b.Ac(t),b.hc().openPanel("videos")})),b.Lc(22,"Videos"),b.Vb(),b.Wb(23,"button",12),b.dc("click",(function(){return b.Ac(t),b.hc().openPanel("cast")})),b.Lc(24,"Cast"),b.Vb(),b.Wb(25,"button",12),b.dc("click",(function(){return b.Ac(t),b.hc().openPanel("crew")})),b.Lc(26,"Crew"),b.Vb(),b.Wb(27,"button",12),b.dc("click",(function(){return b.Ac(t),b.hc().openPanel("genres")})),b.Lc(28,"Genres"),b.Vb(),b.Wb(29,"button",12),b.dc("click",(function(){return b.Ac(t),b.hc().openPanel("keywords")})),b.Lc(30,"Keywords"),b.Vb(),b.Wb(31,"button",12),b.dc("click",(function(){return b.Ac(t),b.hc().openPanel("countries")})),b.Lc(32,"Countries"),b.Vb(),b.Wb(33,"button",12),b.dc("click",(function(){return b.Ac(t),b.hc().openPanel("reviews")})),b.Lc(34,"Reviews"),b.Vb(),b.Vb(),b.Jc(35,ce,2,0,"p",13),b.Vb(),b.Rb(36,"loading-indicator",14),b.ic(37,"async"),b.Tb()}if(2&t){const t=e.ngIf,a=b.hc();b.Db(1),b.pc("ngIf","primaryFacts"===t),b.Db(1),b.pc("ngIf","seasons"===t),b.Db(1),b.pc("ngIf","images"===t),b.Db(1),b.pc("ngIf","videos"===t),b.Db(1),b.pc("ngIf","cast"===t),b.Db(1),b.pc("ngIf","crew"===t),b.Db(1),b.pc("ngIf","keywords"===t),b.Db(1),b.pc("ngIf","genres"===t),b.Db(1),b.pc("ngIf","countries"===t),b.Db(1),b.pc("ngIf","reviews"===t),b.Db(5),b.Hb("active","primaryFacts"===t),b.Db(2),b.Hb("active","seasons"===t),b.pc("disabled",!a.titleCreated()),b.Db(2),b.Hb("active","images"===t),b.pc("disabled",!a.titleCreated()),b.Db(2),b.Hb("active","videos"===t),b.pc("disabled",!a.titleCreated()),b.Db(2),b.Hb("active","cast"===t),b.pc("disabled",!a.titleCreated()),b.Db(2),b.Hb("active","crew"===t),b.pc("disabled",!a.titleCreated()),b.Db(2),b.Hb("active","genres"===t),b.pc("disabled",!a.titleCreated()),b.Db(2),b.Hb("active","keywords"===t),b.pc("disabled",!a.titleCreated()),b.Db(2),b.Hb("active","countries"===t),b.pc("disabled",!a.titleCreated()),b.Db(2),b.Hb("active","reviews"===t),b.pc("disabled",!a.titleCreated()),b.Db(2),b.pc("ngIf",!a.titleCreated()),b.Db(1),b.pc("isVisible",b.jc(37,41,a.loading$))}}let le=(()=>{class t{constructor(t,e,a){this.store=t,this.router=e,this.route=a,this.activePanel$=new l.a("primaryFacts")}ngOnInit(){this.route.data.subscribe(t=>{var e,a;this.store.dispatch(new c.o(null===(e=t.api)||void 0===e?void 0:e.title)),this.title=null===(a=t.api)||void 0===a?void 0:a.title}),this.route.queryParams.subscribe(t=>{this.activePanel$.next(t.active||"primaryFacts")}),this.route.snapshot.params.seasonNumber&&this.activePanel$.next("seasons")}ngOnDestroy(){this.store.dispatch(new c.s)}openPanel(t){this.router.navigate([],{queryParams:{active:t}})}titleCreated(){return!!this.store.selectSnapshot(r.a.title).id}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(o.g),b.Qb(i.d),b.Qb(i.a))},t.\u0275cmp=b.Kb({type:t,selectors:[["crupdate-title"]],decls:2,vars:3,consts:[[4,"ngIf"],["class","material-panel crupdate-title-panel",4,"ngIf"],["class","material-panel crupdate-title-panel",3,"title",4,"ngIf"],["class","material-panel crupdate-title-panel","type","cast",3,"mediaItem",4,"ngIf"],["class","material-panel crupdate-title-panel","type","crew",3,"mediaItem",4,"ngIf"],["class","material-panel crupdate-title-panel","type","keyword",4,"ngIf"],["class","material-panel crupdate-title-panel","type","genre",4,"ngIf"],["class","material-panel crupdate-title-panel","type","production_country","displayType","country",4,"ngIf"],[1,"sidebar","material-panel"],["trans","",1,"header"],[1,"list"],["trans","",1,"list-item","no-style",3,"click"],["trans","",1,"list-item","no-style",3,"disabled","click"],["class","message","trans","",4,"ngIf"],[1,"overlay",3,"isVisible"],[1,"material-panel","crupdate-title-panel"],[1,"material-panel","crupdate-title-panel",3,"title"],["type","cast",1,"material-panel","crupdate-title-panel",3,"mediaItem"],["type","crew",1,"material-panel","crupdate-title-panel",3,"mediaItem"],["type","keyword",1,"material-panel","crupdate-title-panel"],["type","genre",1,"material-panel","crupdate-title-panel"],["type","production_country","displayType","country",1,"material-panel","crupdate-title-panel"],["trans","",1,"message"]],template:function(t,e){1&t&&(b.Jc(0,re,38,43,"ng-container",0),b.ic(1,"async")),2&t&&b.pc("ngIf",b.jc(1,1,e.activePanel$))},directives:[n.t,d.a,p.a,_,It,Rt,$t.a,ht,Bt,Gt.a],pipes:[n.b],styles:[".be-dark-mode crupdate-title .sidebar .header{background-color:transparent;border-bottom:1px solid var(--be-divider-default)}crupdate-title{display:flex;align-items:flex-start;width:100%}crupdate-title .material-panel{flex:1 1 auto;min-height:412px}crupdate-title .material-panel .inline-container,crupdate-title .material-panel form>.input-container{margin-bottom:25px}crupdate-title video-index.material-panel{padding:0}crupdate-title data-table{border:none}crupdate-title .inline-container{display:flex}crupdate-title .inline-container .input-container{flex:1 1 auto}crupdate-title .inline-container .input-container.size-small{flex:1 1 30%}crupdate-title .inline-container .input-container:first-of-type{margin-right:15px}crupdate-title .sidebar{flex:0 0 260px;margin-left:30px;padding:0;overflow:hidden}crupdate-title .sidebar .header{background-color:var(--be-primary-default);color:var(--be-accent-contrast);padding:15px 20px;font-size:1.6rem;font-weight:500}crupdate-title .sidebar .list .list-item{display:block;width:100%;padding:10px 20px;white-space:nowrap;text-transform:capitalize}crupdate-title .sidebar .list .list-item:disabled{color:var(--be-hint-text);cursor:default}crupdate-title .sidebar .list .list-item.active{font-weight:500}crupdate-title .sidebar .list .list-item:not(:disabled):hover{cursor:pointer}crupdate-title .sidebar .message{margin:8px 20px;padding-top:8px;font-size:1.3rem;color:var(--be-secondary-text);border-top:1px solid var(--be-divider-lighter)}@media only screen and (max-width:768px){crupdate-title{display:block}crupdate-title primary-facts-panel.material-panel{border:none}crupdate-title primary-facts-panel.material-panel .poster-container{display:block}crupdate-title primary-facts-panel.material-panel .many-inputs{margin-left:0}crupdate-title primary-facts-panel.material-panel img{margin:0 auto 20px}crupdate-title .sidebar{margin:30px 20px 0}crupdate-title .inline-container{display:block}crupdate-title .inline-container .input-container:first-of-type{margin-bottom:20px}}.crupdate-title-panel .table-header,crupdate-episode-modal .table-header{display:flex;align-items:center;margin-bottom:15px}.crupdate-title-panel .table-header .mat-raised-button,crupdate-episode-modal .table-header .mat-raised-button{text-transform:capitalize}.crupdate-title-panel .table-header .input-container,crupdate-episode-modal .table-header .input-container{max-width:300px;margin-left:auto;position:relative}.crupdate-title-panel .table-header .input-container .mat-icon,crupdate-episode-modal .table-header .input-container .mat-icon{position:absolute;top:11px;right:8px}.crupdate-title-panel no-results-message,crupdate-episode-modal no-results-message{margin-top:50px;margin-bottom:50px}.crupdate-title-panel .mat-column-edit,crupdate-episode-modal .mat-column-edit{max-width:100px;color:var(--be-secondary-text)}"],encapsulation:2,changeDetection:0}),Object(s.b)([Object(o.d)(r.a.loading)],t.prototype,"loading$",void 0),t})();var be=a("JIr8"),de=a("5+tZ"),pe=a("LRne"),ue=a("EY2u");const he=[{path:"",component:le,resolve:{api:(()=>{class t{constructor(t,e,a){this.router=t,this.store=e,this.titles=a}resolve(t,e){return t.params.titleId?this.titles.get(t.params.titleId,{fullCredits:!0,keywords:!0,countries:!0,seasons:!0,skipUpdating:!0,allVideos:!0}).pipe(Object(be.a)(()=>(this.router.navigate(this.fallbackUri(e)),ue.a)),Object(de.a)(t=>t?Object(pe.a)(t):(this.router.navigate(this.fallbackUri(e)),ue.a))):Object(pe.a)(null)}fallbackUri(t){return t.url.includes("admin")?["/admin/titles"]:[t.url.replace("/edit","")]}}return t.\u0275fac=function(e){return new(e||t)(b.ac(i.d),b.ac(o.g),b.ac(W.a))},t.\u0275prov=b.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},data:{permissions:["titles.update"]}}];let ge=(()=>{class t{}return t.\u0275mod=b.Ob({type:t}),t.\u0275inj=b.Nb({factory:function(e){return new(e||t)},imports:[[i.h.forChild(he)],i.h]}),t})();var me=a("6rvT"),fe=a("Iysn"),ve=a("ZFTr"),ye=a("k3xQ"),Ve=a("X3pI"),xe=a("NWPP"),We=a("1ImS"),Ce=a("CHUN"),we=a("99o5");let De=(()=>{class t{}return t.\u0275mod=b.Ob({type:t}),t.\u0275inj=b.Nb({factory:function(e){return new(e||t)},imports:[[n.c,ge,me.a,u.o,u.E,fe.a,ve.a,ye.a,Ve.a,xe.a,We.a,Ce.a,we.a,D.c,I.b,O.b,T.g,j.g,P.c,S.b,et.f,J.b]]}),t})()},"/be1":function(t,e,a){"use strict";a.d(e,"a",(function(){return E}));var n=a("Xmgp"),i=a("HSW/"),s=a("2hX1"),o=a("r2Ys"),c=a("fXoL"),r=a("QGXG"),l=a("twBr"),b=a("kmQS"),d=a("q18H"),p=a("i2dy"),u=a("EAOp"),h=a("ofXK"),g=a("Ivca"),m=a("Um6Z"),f=a("Rd8u"),v=a("rcZy"),y=a("bTqV"),V=a("3Pt+"),x=a("MNfM"),W=a("8ZjS");let C=(()=>{class t{constructor(t,e){this.fb=t,this.datable=e,this.form=this.fb.group({type:null,user:null,title:null,season:null,episode:null})}ngOnInit(){this.form.patchValue(Object.assign({title:this.title},this.datable.filters$.value)),this.title&&this.form.get("title").disable(),this.form.valueChanges.subscribe(t=>{this.datable.filters$.next(t)})}}return t.\u0275fac=function(e){return new(e||t)(c.Qb(V.h),c.Qb(s.a))},t.\u0275cmp=c.Kb({type:t,selectors:[["review-index-filters"]],inputs:{title:"title"},decls:15,vars:3,consts:[[1,"many-inputs",3,"formGroup"],[1,"input-container"],["for","review-type-filter","trans",""],["id","review-type-filter","formControlName","type"],["trans","",3,"ngValue"],["value","review","trans",""],["value","rating","trans",""],["formControlName","user"],[3,"formGroup"]],template:function(t,e){1&t&&(c.Wb(0,"div",0),c.Wb(1,"div",1),c.Wb(2,"label",2),c.Lc(3,"Type"),c.Vb(),c.Wb(4,"select",3),c.Wb(5,"option",4),c.Lc(6,"All"),c.Vb(),c.Wb(7,"option",5),c.Lc(8,"Review"),c.Vb(),c.Wb(9,"option",6),c.Lc(10,"Rating"),c.Vb(),c.Vb(),c.Vb(),c.Wb(11,"div",1),c.Rb(12,"select-user-input",7),c.Vb(),c.Wb(13,"div",1),c.Rb(14,"select-title-input",8),c.Vb(),c.Vb()),2&t&&(c.pc("formGroup",e.form),c.Db(5),c.pc("ngValue",null),c.Db(9),c.pc("formGroup",e.form))},directives:[V.v,V.m,f.a,V.G,V.u,V.k,V.z,V.J,x.a,W.a],styles:[""],changeDetection:0}),t})();var w=a("eKg+"),D=a("NFeN"),O=a("Sn2F"),I=a("Qu3c"),P=a("CH4Q"),k=a("iB19"),L=a("zW5C");function R(t,e){if(1&t){const t=c.Xb();c.Wb(0,"button",15),c.dc("click",(function(){return c.Ac(t),c.hc().openCrupdateReviewModal()})),c.Lc(1,"Add"),c.Vb()}}function _(t,e){if(1&t){const t=c.Xb();c.Wb(0,"button",16),c.dc("click",(function(){return c.Ac(t),c.hc().maybeDeleteSelectedReviews()})),c.Lc(1,"Delete Selected"),c.Vb()}}function $(t,e){if(1&t&&c.Rb(0,"review-index-filters",17),2&t){const t=c.hc();c.pc("title",t.title)}}function M(t,e){if(1&t&&(c.Ub(0),c.Rb(1,"img",30),c.Wb(2,"span"),c.Lc(3),c.Vb(),c.Tb()),2&t){const t=c.hc().$implicit;c.Db(1),c.pc("src",t.reviewable.poster,c.Dc),c.Db(2),c.Mc(t.reviewable.name)}}function S(t,e){if(1&t){const t=c.Xb();c.Wb(0,"button",31),c.dc("click",(function(){c.Ac(t);const e=c.hc().$implicit;return c.hc().openCrupdateReviewModal(e)})),c.ic(1,"trans"),c.Rb(2,"mat-icon",32),c.Vb()}2&t&&c.pc("matTooltip",c.jc(1,1,"Edit review"))}function j(t,e){if(1&t&&(c.Wb(0,"tr"),c.Rb(1,"td",18),c.Wb(2,"td",19),c.Rb(3,"mat-icon",20),c.Wb(4,"span"),c.Lc(5),c.Vb(),c.Vb(),c.Wb(6,"td",21),c.Rb(7,"user-column",22),c.Vb(),c.Wb(8,"td",23),c.Wb(9,"div",24),c.Jc(10,M,4,2,"ng-container",25),c.Vb(),c.Vb(),c.Wb(11,"td",26),c.Lc(12),c.Vb(),c.Wb(13,"td",27),c.Lc(14),c.ic(15,"formattedDate"),c.Vb(),c.Wb(16,"td",28),c.Jc(17,S,3,3,"button",29),c.Vb(),c.Vb()),2&t){const t=e.$implicit,a=c.hc();c.Db(1),c.pc("table-body-checkbox",t.id),c.Db(4),c.Nc("",t.score,"/10"),c.Db(2),c.pc("user",t.user),c.Db(3),c.pc("ngIf",t.reviewable),c.Db(2),c.Mc(t.body?"Review":"Rating"),c.Db(2),c.Mc(c.jc(15,7,t.updated_at)),c.Db(3),c.pc("ngIf",a.currentUser.hasPermission("reviews.update"))}}function T(t,e){1&t&&(c.Wb(0,"no-results-message",33),c.Wb(1,"span",34),c.Lc(2,"No reviews have been created yet"),c.Vb(),c.Vb())}let E=(()=>{class t{constructor(t,e,a,n,i,s,o){this.datatable=t,this.reviews=e,this.modal=a,this.currentUser=n,this.settings=i,this.urls=s,this.toast=o,this.reviews$=this.datatable.data$}ngOnInit(){this.datatable.paginator.dontUpdateQueryParams=!!this.title;const t={uri:n.a.BASE_URI,staticParams:{with:["user","reviewable"]}};this.title&&(t.staticParams={titleId:this.title.id}),this.datatable.init(t)}openCrupdateReviewModal(t){var e,a;this.datatable.openCrupdateResourceModal(i.a,{review:t,mediaId:null===(e=this.title)||void 0===e?void 0:e.id,mediaType:null===(a=this.title)||void 0===a?void 0:a.type}).subscribe()}maybeDeleteSelectedReviews(){this.datatable.confirmResourceDeletion("reviews").subscribe(()=>{this.reviews.delete(this.datatable.selectedRows$.value).subscribe(()=>{this.toast.open(o.a.REVIEW_DELETE_SUCCESS),this.datatable.reset()})})}}return t.\u0275fac=function(e){return new(e||t)(c.Qb(s.a),c.Qb(n.a),c.Qb(r.a),c.Qb(l.a),c.Qb(b.a),c.Qb(d.a),c.Qb(p.b))},t.\u0275cmp=c.Kb({type:t,selectors:[["reviews-index"]],inputs:{title:"title"},features:[c.Cb([s.a])],decls:28,vars:8,consts:[[1,"datatable","responsive-table"],["pluralResourceName","reviews"],["leftContent",""],["mat-raised-button","","color","accent","trans","",3,"click",4,"ngIf"],["rightContent","","mat-raised-button","","color","accent","trans","",3,"click",4,"ngIf"],["tableFilters",""],[1,"material-table"],["table-header-checkbox",""],["table-sort-header","","trans",""],["table-sort-header","user_id","trans",""],["table-sort-header","media_item_id","trans",""],["table-sort-header","body","trans",""],["table-sort-header","updated_at","trans",""],[4,"ngFor","ngForOf"],["svgImage","like-dislike.svg",4,"ngIf"],["mat-raised-button","","color","accent","trans","",3,"click"],["rightContent","","mat-raised-button","","color","accent","trans","",3,"click"],[3,"title"],[3,"table-body-checkbox"],["data-label","Score"],["svgIcon","star-border",1,"star-icon"],["data-label","User"],[3,"user"],["data-label","Reviewable"],[1,"column-with-image"],[4,"ngIf"],["data-label","Type"],["data-label","Last Updated"],[1,"edit-column"],["mat-icon-button","",3,"matTooltip","click",4,"ngIf"],["alt","reviewable image",3,"src"],["mat-icon-button","",3,"matTooltip","click"],["svgIcon","edit"],["svgImage","like-dislike.svg"],["primary-text","","trans",""]],template:function(t,e){1&t&&(c.Wb(0,"div",0),c.Wb(1,"datatable-header",1),c.Ub(2,2),c.Jc(3,R,2,0,"button",3),c.Tb(),c.Jc(4,_,2,0,"button",4),c.Jc(5,$,1,1,"ng-template",null,5,c.Kc),c.Vb(),c.Wb(7,"table",6),c.Wb(8,"thead"),c.Wb(9,"tr"),c.Rb(10,"th",7),c.Wb(11,"th",8),c.Lc(12,"Score"),c.Vb(),c.Wb(13,"th",9),c.Lc(14,"Owner"),c.Vb(),c.Wb(15,"th",10),c.Lc(16,"Reviewable"),c.Vb(),c.Wb(17,"th",11),c.Lc(18,"Type"),c.Vb(),c.Wb(19,"th",12),c.Lc(20,"Last Updated"),c.Vb(),c.Rb(21,"th"),c.Vb(),c.Vb(),c.Wb(22,"tbody"),c.Jc(23,j,18,9,"tr",13),c.ic(24,"async"),c.Vb(),c.Vb(),c.Jc(25,T,3,0,"no-results-message",14),c.ic(26,"async"),c.Rb(27,"datatable-footer"),c.Vb()),2&t&&(c.Db(3),c.pc("ngIf",e.currentUser.hasPermission("reviews.create")),c.Db(1),c.pc("ngIf",e.currentUser.hasPermission("reviews.delete")),c.Db(19),c.pc("ngForOf",c.jc(24,4,e.reviews$)),c.Db(2),c.pc("ngIf",c.jc(26,6,e.datatable.paginator.noResults$)))},directives:[u.a,h.t,g.a,m.a,f.a,h.s,v.a,y.b,C,w.a,D.a,O.a,I.a,P.a],pipes:[h.b,k.a,L.a],styles:[".star-icon[_ngcontent-%COMP%]{vertical-align:middle;margin-right:5px}"],changeDetection:0}),t})()},"1ImS":function(t,e,a){"use strict";a.d(e,"a",(function(){return h}));var n=a("ofXK"),i=a("NFeN"),s=a("6rvT"),o=a("bSwM"),c=a("3Pt+"),r=a("bTqV"),l=a("A5z7"),b=a("bv9b"),d=a("0Gur"),p=a("Iysn"),u=a("fXoL");let h=(()=>{class t{}return t.\u0275mod=u.Ob({type:t}),t.\u0275inj=u.Nb({factory:function(e){return new(e||t)},imports:[[n.c,s.a,c.E,c.o,d.a,p.a,r.c,i.b,o.b,l.e,b.b],o.b]}),t})()},"2hX1":function(t,e,a){"use strict";a.d(e,"a",(function(){return w}));var n=a("2Vo4"),i=a("itXk"),s=a("LRne"),o=a("lJxs"),c=a("eIep"),r=a("vkgz"),l=a("fXoL"),b=a("tyNb"),d=a("LRXf"),p=a("ahrr");let u=(()=>{class t{constructor(t,e,a){this.router=t,this.http=e,this.localStorage=a,this.params$=new n.a({}),this.paginatedOnce$=new n.a(!1),this.loading$=new n.a(!1),this.response$=new n.a(null),this.dontUpdateQueryParams=!1,this.perPageCacheKey=null,this.noResults$=this.response$.pipe(Object(o.a)(t=>this.paginatedOnce$.value&&0===t.pagination.data.length))}get params(){return this.params$.value}get currentPage(){var t,e;return null===(e=null===(t=this.response$.value)||void 0===t?void 0:t.pagination)||void 0===e?void 0:e.current_page}paginate(t={},e,a){const n=this.subscription?{}:this.currentQueryParams();this.params$.next(Object.assign(Object.assign(Object.assign({},this.response$.value?{perPage:this.response$.value.pagination.per_page,page:this.response$.value.pagination.current_page}:{}),n),t)),this.subscription||this.init(e,a)}nextPage(){const t=this.response$.value.pagination.current_page,e=this.response$.value.pagination.total,a=t+1;this.paginate(Object.assign(Object.assign({},this.params$.value),{page:!t||a>e?t:a}))}previousPage(){const t=this.response$.value.pagination.current_page;this.paginate(Object.assign(Object.assign({},this.params$.value),{page:t-1||1}))}changePerPage(t){var e;t!==(null===(e=this.params$.value)||void 0===e?void 0:e.perPage)&&(this.perPageCacheKey&&this.localStorage.set(this.perPageCacheKey,t),this.paginate(Object.assign(Object.assign({},this.params$.value),{perPage:t})))}currentQueryParams(){return this.router.routerState.root.snapshot.queryParams}init(t,e){this.subscription=this.params$.pipe(Object(c.a)(a=>{this.loading$.next(!0);const n=!this.paginatedOnce$.value;return n&&this.perPageCacheKey&&this.localStorage.get(this.perPageCacheKey)&&(a=Object.assign({perPage:this.localStorage.get(this.perPageCacheKey)},a)),(n&&e?Object(s.a)({pagination:e}):this.http.get(t,a)).pipe(Object(r.a)(()=>{this.updateQueryParams(a),this.loading$.next(!1),this.paginatedOnce$.next(!0)},()=>{this.loading$.next(!1),this.paginatedOnce$.next(!0)}))})).subscribe(t=>{this.response$.next(t)})}updateQueryParams(t={}){if(!this.dontUpdateQueryParams){for(const e in t)Array.isArray(t[e])&&(t[e]=t[e].join(","));this.router.navigate([],{queryParams:t,replaceUrl:!0})}}canLoadNextPage(){var t,e;return this.response$.value&&this.currentPage<(null===(e=null===(t=this.response$.value)||void 0===t?void 0:t.pagination)||void 0===e?void 0:e.last_page)}}return t.\u0275fac=function(e){return new(e||t)(l.ac(b.d),l.ac(d.a),l.ac(p.a))},t.\u0275prov=l.Mb({token:t,factory:t.\u0275fac}),t})();var h=a("Kj3r"),g=a("Zy1z"),m=a("pLZG"),f=a("F96W"),v=a("/RwR");const y={title:"Delete :resource",body:"Are you sure you want to delete selected :resource?",ok:"Delete"};var V=a("hLX6"),x=a("8LU1");function W(t,e){const a=V.pick(e,t);if(Object(x.a)(a)){const t=Number(a);return t<9007199254740991?t:a}return a}var C=a("QGXG");let w=(()=>{class t{constructor(t,e,a,i){this.modal=t,this.router=e,this.http=a,this.localStorage=i,this.sort$=new n.a({}),this.filters$=new n.a({}),this.staticParams$=new n.a({}),this.paginator=new u(this.router,this.http,this.localStorage),this.ignoreNextParamChange=!1,this.originalData$=new n.a([]),this.data$=new n.a([]),this.selectedRows$=new n.a([])}get data(){return this.data$.value}set data(t){const e=[...t];this.originalData$.next(e),this.data$.next(e),this.ignoreNextParamChange=!0,this.reset()}init(t={}){return this.config=t,this.staticParams$.next(Object.assign(Object.assign({},this.staticParams$.value),t.staticParams)),t.uri?this.connectToPaginator():t.initialData&&(this.data=t.initialData),this.mainSub=Object(i.a)([this.sort$,this.filters$,this.staticParams$]).pipe(Object(h.a)(0),Object(o.a)(t=>Object.assign({},...t))).subscribe(t=>{if(this.ignoreNextParamChange)return this.ignoreNextParamChange=!1;t=Object(f.a)(t),Object.entries(t).forEach(([e,a])=>{"object"==typeof a&&a.id&&(t[e+"Id"]=a.id,delete t[e])}),this.config.uri?this.paginator.paginate(t,this.config.uri,this.config.initialData):Object.keys(t).length&&this.applyLocalTransforms(t)}),this}connectToPaginator(){this.paginatorSub=this.paginator.response$.pipe(Object(g.a)()).subscribe(([t,e])=>{var a;const n=this.config.infiniteScroll&&(null===(a=null==t?void 0:t.pagination)||void 0===a?void 0:a.current_page)!==e.pagination.current_page?[...this.data$.value,...e.pagination.data]:e.pagination.data;this.data$.next(n)})}applyLocalTransforms(t){let e=[...this.originalData$.value];t.query&&(e=function(t,e){return t.filter(t=>function(t,e){const a=function t(e){return Object.keys(e).reduce((a,n)=>a+(e[n]&&"object"==typeof e[n]?t(e[n]):e[n])+"\u25ec","").toLowerCase()}(t),n=e.trim().toLowerCase();return-1!==a.indexOf(n)}(t,e))}(e,t.query)),t.orderBy&&t.orderDir&&(e=function(t,e,a){return t.sort((t,n)=>{let i=W(t,e),s=W(n,e);const o=typeof i,c=typeof s;o!==c&&("number"===o&&(i+=""),"number"===c&&(s+=""));let r=0;return null!=i&&null!=s?i>s?r=1:i<s&&(r=-1):null!=i?r=1:null!=s&&(r=-1),r*("asc"===a?1:-1)})}(e,t.orderBy,t.orderDir)),this.data$.next(e)}addFilter(t,e){this.filters$.next(Object.assign(Object.assign({},this.filters$.value),{[t]:e}))}removeFilter(t){const e=Object.assign({},this.filters$.value);delete e[t],this.filters$.next(e)}reset(t=null){this.filters$.next({}),this.sort$.next({}),this.selectedRows$.next([]),t&&this.staticParams$.next(t)}openCrupdateResourceModal(t,e,a){return this.modal.open(t,e,a).beforeClosed().pipe(Object(m.a)(t=>!!t),Object(r.a)(()=>this.reset()))}confirmResourceDeletion(t){const e=Object.assign(Object.assign({},y),{replacements:{resource:t}});return this.modal.open(v.a,e).afterClosed().pipe(Object(m.a)(t=>t))}getCurrentParams(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.sort$.value),this.filters$.value),this.staticParams$.value),this.paginator.params)}destroy(){var t,e;null===(t=this.paginatorSub)||void 0===t||t.unsubscribe(),null===(e=this.mainSub)||void 0===e||e.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(l.ac(C.a),l.ac(b.d),l.ac(d.a),l.ac(p.a))},t.\u0275prov=l.Mb({token:t,factory:t.\u0275fac}),t})()},CHUN:function(t,e,a){"use strict";a.d(e,"a",(function(){return d}));var n=a("ofXK"),i=a("bTqV"),s=a("NFeN"),o=a("STbY"),c=a("6rvT"),r=a("3Pt+"),l=a("X3pI"),b=a("fXoL");let d=(()=>{class t{}return t.\u0275mod=b.Ob({type:t}),t.\u0275inj=b.Nb({factory:function(e){return new(e||t)},imports:[[n.c,i.c,o.b,c.a,r.E,s.b,l.a]]}),t})()},CZpq:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var n=a("fXoL"),i=a("LRXf");let s=(()=>{class t{constructor(t){this.http=t}index(e){return this.http.get(t.BASE_URI,e)}create(e){return this.http.post(t.BASE_URI,e)}update(e,a){return this.http.put(`${t.BASE_URI}/${e}`,a)}delete(e){return this.http.delete(`${t.BASE_URI}/${e}`)}}return t.BASE_URI="tags",t.\u0275fac=function(e){return new(e||t)(n.ac(i.a))},t.\u0275prov=n.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},EAOp:function(t,e,a){"use strict";a.d(e,"a",(function(){return E}));var n=a("fXoL");const i=[{originX:"start",originY:"center",overlayX:"end",overlayY:"center",offsetX:5},{originX:"end",originY:"center",overlayX:"start",overlayY:"center",offsetX:5}];var s=a("nPOm"),o=a("0IaG"),c=a("ZfYz"),r=a("NFeN"),l=a("Rd8u"),b=a("3Pt+"),d=a("ofXK"),p=a("bTqV");function u(t,e){1&t&&n.Sb(0)}let h=(()=>{class t{constructor(t,e){this.data=t,this.overlayPanelRef=e}close(){this.overlayPanelRef.close()}}return t.\u0275fac=function(e){return new(e||t)(n.Qb(s.a),n.Qb(c.a))},t.\u0275cmp=n.Kb({type:t,selectors:[["datatable-filters-panel"]],hostVars:1,hostBindings:function(t,e){2&t&&n.Rc("@dialogContainer","enter")},decls:9,vars:1,consts:[["svgIcon","filter-list"],["trans",""],[1,"body",3,"ngSubmit"],[4,"ngTemplateOutlet"],["type","button","mat-button","","color","accent","trans","",3,"click"]],template:function(t,e){1&t&&(n.Wb(0,"header"),n.Rb(1,"mat-icon",0),n.Wb(2,"span",1),n.Lc(3,"Filters"),n.Vb(),n.Vb(),n.Wb(4,"form",2),n.dc("ngSubmit",(function(){return e.close()})),n.Jc(5,u,1,0,"ng-container",3),n.Vb(),n.Wb(6,"footer"),n.Wb(7,"button",4),n.dc("click",(function(){return e.close()})),n.Lc(8,"Close"),n.Vb(),n.Vb()),2&t&&(n.Db(5),n.pc("ngTemplateOutlet",e.data.filters))},directives:[r.a,l.a,b.K,b.v,b.w,d.A,p.b],styles:["[_nghost-%COMP%]{display:block;min-width:250px;margin:auto;background-color:var(--be-background);border-radius:4px;box-shadow:0 8px 9px -5px rgba(0,0,0,.2),0 15px 22px 2px rgba(0,0,0,.14),0 6px 28px 5px rgba(0,0,0,.12)}header[_ngcontent-%COMP%]{border-bottom:1px solid var(--be-divider-default);padding:15px 20px;margin-bottom:20px;font-weight:500}header[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{vertical-align:middle;margin-right:5px}.body[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}footer[_ngcontent-%COMP%]{border-top:1px solid var(--be-divider-default);text-align:right;margin-top:10px;padding:10px 20px}"],data:{animation:[o.j.dialogContainer]},changeDetection:0}),t})();var g=a("lJxs"),m=a("F96W"),f=a("2hX1"),v=a("dz5c"),y=a("bv9b"),V=a("Kj3r"),x=a("/uUt"),W=a("tyNb"),C=a("zW5C");function w(t,e){1&t&&n.Rb(0,"mat-icon",3)}let D=(()=>{class t{constructor(t,e){this.datatable=t,this.route=e,this.searchControl=new b.i(this.route.snapshot.queryParams.query),this.hideIcon=!1}ngOnInit(){this.searchControl.valueChanges.pipe(Object(V.a)(400),Object(x.a)()).subscribe(t=>{this.datatable.addFilter("query",t)})}}return t.\u0275fac=function(e){return new(e||t)(n.Qb(f.a),n.Qb(W.a))},t.\u0275cmp=n.Kb({type:t,selectors:[["datatable-header-search-input"]],inputs:{placeholder:"placeholder",hideIcon:"hideIcon"},decls:4,vars:5,consts:[[1,"input-container","search-input-container"],["type","text",1,"search-input",3,"placeholder","formControl"],["svgIcon","search",4,"ngIf"],["svgIcon","search"]],template:function(t,e){1&t&&(n.Wb(0,"div",0),n.Rb(1,"input",1),n.ic(2,"trans"),n.Jc(3,w,1,0,"mat-icon",2),n.Vb()),2&t&&(n.Db(1),n.pc("placeholder",n.jc(2,3,e.placeholder))("formControl",e.searchControl),n.Db(2),n.pc("ngIf",!e.hideIcon))},directives:[b.d,b.u,b.j,d.t,r.a],pipes:[C.a],styles:[".input-container[_ngcontent-%COMP%]{min-width:250px;position:relative;flex-shrink:0}.input-container[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{position:absolute;top:calc(50% - 12px);right:5px;color:var(--be-secondary-text)}.icon-left[_nghost-%COMP%]   .mat-icon[_ngcontent-%COMP%], .icon-left   [_nghost-%COMP%]   .mat-icon[_ngcontent-%COMP%]{left:10px;right:0}"],changeDetection:0}),t})();var O=a("A5z7");const I=["tableFilters"],P=["filterButton"];function k(t,e){1&t&&n.Rb(0,"mat-progress-bar",7)}function L(t,e){1&t&&(n.Wb(0,"div",8),n.nc(1),n.Vb())}function R(t,e){if(1&t&&(n.Wb(0,"div",9),n.Lc(1),n.ic(2,"trans"),n.Vb()),2&t){const t=n.hc();n.Db(1),n.Pc(" ",t.numberOfRowsSelected," ",t.pluralResourceName," ",n.jc(2,3,"Selected")," ")}}function _(t,e){if(1&t){const t=n.Xb();n.Wb(0,"mat-chip",18),n.dc("removed",(function(){n.Ac(t);const a=e.$implicit;return n.hc(3).datatable.removeFilter(a.key)})),n.Lc(1),n.Rb(2,"mat-icon",19),n.Vb()}if(2&t){const t=e.$implicit,a=n.hc(3);n.pc("removable",!0)("selectable",!1),n.Db(1),n.Oc(" ",t.key,": ",a.isModel(t.value)?t.value.name||t.value.display_name:t.value," ")}}function $(t,e){if(1&t){const t=n.Xb();n.Ub(0),n.Wb(1,"mat-chip-list",13),n.Jc(2,_,3,4,"mat-chip",14),n.ic(3,"keyvalue"),n.ic(4,"async"),n.Vb(),n.Wb(5,"button",15,16),n.dc("click",(function(){return n.Ac(t),n.hc(2).openFiltersPanel()})),n.Rb(7,"mat-icon",17),n.Vb(),n.Tb()}if(2&t){const t=n.hc(2);n.Db(2),n.pc("ngForOf",n.jc(3,3,n.jc(4,5,t.filters$))),n.Db(3),n.Hb("active",t.filterPanelRef)}}function M(t,e){if(1&t&&(n.Wb(0,"div",10),n.Jc(1,$,8,7,"ng-container",11),n.Rb(2,"datatable-header-search-input",12),n.Vb()),2&t){const t=n.hc();n.Db(1),n.pc("ngIf",t.filterPanelTemplate),n.Db(1),n.rc("placeholder","Search ",t.pluralResourceName,"")}}function S(t,e){1&t&&(n.Wb(0,"div",20),n.nc(1,1),n.Vb())}const j=[[["","leftContent",""]],[["","rightContent",""]]],T=["[leftContent]","[rightContent]"];let E=(()=>{class t{constructor(t,e,a){this.datatable=t,this.cd=e,this.overlayPanel=a,this.showSelectedActions=!0,this.subscriptions=[],this.filters$=this.datatable.filters$.pipe(Object(g.a)(t=>{const e=Object(m.a)(t);return delete e.query,e}))}ngOnInit(){const t=this.datatable.filters$.subscribe(()=>{this.filterPanelRef&&this.filterPanelRef.close()}),e=this.datatable.selectedRows$.subscribe(t=>{this.numberOfRowsSelected=t.length,this.cd.markForCheck()});this.subscriptions=[t,e]}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}openFiltersPanel(){if(this.filterPanelRef)this.filterPanelRef.close();else{const t=i.slice();t[0].offsetY=40,t[1].offsetY=40,this.filterPanelRef=this.overlayPanel.open(h,{origin:this.filterButton,position:t,mobilePosition:"center",data:{filters:this.filterPanelTemplate},maxWidth:"90%"}),this.filterButton.nativeElement.classList.add("active"),this.filterPanelRef.afterClosed().subscribe(()=>{this.filterPanelRef=null,this.filterButton.nativeElement.classList.remove("active")})}}isModel(t){return"object"==typeof t&&t.id}}return t.\u0275fac=function(e){return new(e||t)(n.Qb(f.a),n.Qb(n.i),n.Qb(v.a))},t.\u0275cmp=n.Kb({type:t,selectors:[["datatable-header"]],contentQueries:function(t,e,a){var i;1&t&&n.Jb(a,I,!0),2&t&&n.wc(i=n.ec())&&(e.filterPanelTemplate=i.first)},viewQuery:function(t,e){var a;1&t&&n.Sc(P,!0,n.m),2&t&&n.wc(a=n.ec())&&(e.filterButton=a.first)},hostVars:2,hostBindings:function(t,e){2&t&&n.Hb("rows-selected",e.numberOfRowsSelected)},inputs:{pluralResourceName:"pluralResourceName",showSelectedActions:"showSelectedActions"},ngContentSelectors:T,decls:8,vars:7,consts:[["mode","indeterminate","color","accent",4,"ngIf"],[1,"left-column"],["class","default-left-content",4,"ngIf"],["class","selected-left-content capitalize",4,"ngIf"],[1,"right-column"],["class","default-right-content",4,"ngIf"],["class","selected-right-actions",4,"ngIf"],["mode","indeterminate","color","accent"],[1,"default-left-content"],[1,"selected-left-content","capitalize"],[1,"default-right-content"],[4,"ngIf"],[3,"placeholder"],["aria-label","Active Filters",1,"filter-chip-list"],[3,"removable","selectable","removed",4,"ngFor","ngForOf"],["mat-icon-button","",1,"filter-button",3,"click"],["filterButton",""],["svgIcon","filter-list"],[3,"removable","selectable","removed"],["matChipRemove","","svgIcon","cancel"],[1,"selected-right-actions"]],template:function(t,e){1&t&&(n.oc(j),n.Jc(0,k,1,0,"mat-progress-bar",0),n.ic(1,"async"),n.Wb(2,"div",1),n.Jc(3,L,2,0,"div",2),n.Jc(4,R,3,5,"div",3),n.Vb(),n.Wb(5,"div",4),n.Jc(6,M,3,2,"div",5),n.Jc(7,S,2,0,"div",6),n.Vb()),2&t&&(n.pc("ngIf",n.jc(1,5,e.datatable.paginator&&e.datatable.paginator.loading$)),n.Db(3),n.pc("ngIf",!e.showSelectedActions||!e.numberOfRowsSelected),n.Db(1),n.pc("ngIf",e.showSelectedActions&&e.numberOfRowsSelected),n.Db(2),n.pc("ngIf",!e.showSelectedActions||!e.numberOfRowsSelected),n.Db(1),n.pc("ngIf",e.showSelectedActions&&e.numberOfRowsSelected))},directives:[d.t,y.a,D,O.c,d.s,p.b,r.a,O.a,O.d],pipes:[d.b,C.a,d.l],styles:[".rows-selected[_nghost-%COMP%], .rows-selected   [_nghost-%COMP%]{background-color:var(--be-accent-emphasis);color:var(--be-secondary-text);font-size:1.5rem;border-color:var(--be-divider-default)}[_nghost-%COMP%]{display:flex;align-items:center;height:85px;padding:15px;border-bottom:1px solid transparent;position:relative}.mat-progress-bar[_ngcontent-%COMP%]{position:absolute;top:0;left:0}.left-column[_ngcontent-%COMP%]{margin-right:auto}.right-column[_ngcontent-%COMP%]{margin-left:25px}.default-right-content[_ngcontent-%COMP%]{display:flex;align-items:center}.filter-button[_ngcontent-%COMP%]{margin-right:10px}.active[_ngcontent-%COMP%]{color:var(--be-accent-default)}.mat-chip[_ngcontent-%COMP%]{text-transform:capitalize}  datatable-header info-popover{margin-left:10px}"],changeDetection:0}),t})()},F96W:function(t,e,a){"use strict";function n(t){const e=Object.assign({},t);return Object.keys(e).forEach(t=>(null==e[t]||""===e[t])&&delete e[t]),e}a.d(e,"a",(function(){return n}))},Ivca:function(t,e,a){"use strict";a.d(e,"a",(function(){return c}));var n=a("fXoL"),i=a("2hX1"),s=a("bSwM");const o=["table-header-checkbox",""];let c=(()=>{class t{constructor(t,e){this.datatable=t,this.cd=e}ngOnInit(){this.changeRef=this.datatable.selectedRows$.subscribe(()=>{this.cd.markForCheck()})}ngOnDestroy(){this.changeRef.unsubscribe()}anyRowsSelected(){return!!this.datatable.selectedRows$.value.length}allRowsSelected(){var t;return this.datatable.selectedRows$.value.length&&this.datatable.selectedRows$.value.length===(null===(t=this.datatable.data$.value)||void 0===t?void 0:t.length)}toggleAllRows(){this.allRowsSelected()?this.datatable.selectedRows$.next([]):this.datatable.selectedRows$.next(this.datatable.data$.value.map(t=>t.id))}}return t.\u0275fac=function(e){return new(e||t)(n.Qb(i.a),n.Qb(n.i))},t.\u0275cmp=n.Kb({type:t,selectors:[["","table-header-checkbox",""]],hostAttrs:[1,"table-checkbox"],attrs:o,decls:1,vars:2,consts:[[3,"checked","indeterminate","change"]],template:function(t,e){1&t&&(n.Wb(0,"mat-checkbox",0),n.dc("change",(function(t){return t?e.toggleAllRows():null})),n.Vb()),2&t&&n.pc("checked",e.allRowsSelected())("indeterminate",e.anyRowsSelected()&&!e.allRowsSelected())},directives:[s.a],encapsulation:2,changeDetection:0}),t})()},MNfM:function(t,e,a){"use strict";a.d(e,"a",(function(){return D}));var n=a("Kj3r"),i=a("/uUt"),s=a("eIep"),o=a("JIr8"),c=a("nYR2"),r=a("3Pt+"),l=a("2Vo4"),b=a("LRne"),d=a("fXoL"),p=a("mWN8"),u=a("Rd8u"),h=a("STbY"),g=a("ofXK"),m=a("FBzJ"),f=a("bTqV"),v=a("NFeN");const y=["searchInput"];function V(t,e){if(1&t&&(d.Wb(0,"span"),d.Rb(1,"img",20),d.Lc(2),d.Vb()),2&t){const t=e.ngIf;d.Db(1),d.pc("src",t.avatar,d.Dc),d.Db(1),d.Nc("",t.display_name," ")}}function x(t,e){1&t&&(d.Wb(0,"span",21),d.Lc(1,"Any"),d.Vb())}function W(t,e){if(1&t){const t=d.Xb();d.Wb(0,"button",22),d.dc("click",(function(){return d.Ac(t),d.hc().clearSearchInput()})),d.Rb(1,"mat-icon",23),d.Vb()}}function C(t,e){if(1&t){const t=d.Xb();d.Wb(0,"div",14),d.dc("click",(function(){d.Ac(t);const a=e.$implicit;return d.hc().selectUser(a)})),d.Rb(1,"img",24),d.Wb(2,"div",25),d.Wb(3,"div",26),d.Lc(4),d.Vb(),d.Wb(5,"div",27),d.Lc(6),d.Vb(),d.Vb(),d.Vb()}if(2&t){const t=e.$implicit;d.Db(1),d.pc("src",t.avatar,d.Dc),d.Db(3),d.Mc(t.display_name),d.Db(2),d.Mc(t.email)}}function w(t,e){1&t&&(d.Wb(0,"div",28),d.Lc(1,"No users found."),d.Vb())}let D=(()=>{class t{constructor(t){this.users=t,this.searchFormControl=new r.i,this.loading$=new l.a(!1),this.users$=new l.a([]),this.selectedUser$=new l.a(null),this.searchedOnce=!1}ngOnInit(){this.bindToSearchControl()}writeValue(t){"object"==typeof t&&this.selectedUser$.next(t)}registerOnChange(t){this.propagateChange=t}registerOnTouched(){}bindToSearchControl(){this.searchFormControl.valueChanges.pipe(Object(n.a)(150),Object(i.a)(),Object(s.a)(t=>this.searchUsers(t)),Object(o.a)(()=>Object(b.a)([]))).subscribe(t=>{this.searchedOnce=!0,this.users$.next(t)})}searchUsers(t){return this.loading$.next(!0),this.users.getAll({query:t,perPage:7}).pipe(Object(c.a)(()=>this.loading$.next(!1)))}onMenuOpened(){this.searchedOnce||this.clearSearchInput(),setTimeout(()=>{this.searchInput.nativeElement.focus()})}selectUser(t){this.selectedUser$.next(t),this.propagateChange(t)}clearSearchInput(){this.searchFormControl.setValue("")}onMenuClosed(){this.loading$.next(!1),this.clearSearchInput()}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(p.a))},t.\u0275cmp=d.Kb({type:t,selectors:[["select-user-input"]],viewQuery:function(t,e){var a;1&t&&d.Hc(y,!0),2&t&&d.wc(a=d.ec())&&(e.searchInput=a.first)},features:[d.Cb([{provide:r.s,useExisting:t,multi:!0}])],decls:28,vars:16,consts:[[1,"input-container"],["trans","",1,"fake-label"],["tabindex","0",1,"fake-input",3,"matMenuTriggerFor","menuOpened","menuClosed"],[4,"ngIf","ngIfElse"],["anyUser",""],[1,"arrow-container"],[1,"arrow"],["menu","matMenu"],[1,"input-container","search-input-container",3,"click"],[1,"search-input-wrapper"],["type","text","placeholder","Search...","trans-placeholder","",3,"formControl","blur"],["searchInput",""],["class","clear-search-input-button","mat-icon-button","",3,"click",4,"ngIf"],[1,"small",3,"isVisible"],["mat-menu-item","",3,"click"],["src","client/assets/images/anonymous-user.png","alt",""],[1,"info","any-user-info"],["trans","",1,"name"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["class","nothing-found-item","aria-disabled","true","mat-menu-item","","disabled","","trans","",4,"ngIf"],[3,"src"],["trans",""],["mat-icon-button","",1,"clear-search-input-button",3,"click"],["svgIcon","close"],["alt","",3,"src"],[1,"user-info"],[1,"name"],[1,"email"],["aria-disabled","true","mat-menu-item","","disabled","","trans","",1,"nothing-found-item"]],template:function(t,e){if(1&t){const t=d.Xb();d.Wb(0,"div",0),d.Wb(1,"div",1),d.Lc(2,"User"),d.Vb(),d.Wb(3,"div",2),d.dc("menuOpened",(function(){return e.onMenuOpened()}))("menuClosed",(function(){return e.onMenuClosed()})),d.Jc(4,V,3,2,"span",3),d.ic(5,"async"),d.Jc(6,x,2,0,"ng-template",null,4,d.Kc),d.Wb(8,"div",5),d.Rb(9,"div",6),d.Vb(),d.Vb(),d.Vb(),d.Wb(10,"mat-menu",null,7),d.Wb(12,"div",8),d.dc("click",(function(t){return t.stopPropagation()})),d.Wb(13,"div",9),d.Wb(14,"input",10,11),d.dc("blur",(function(){return d.Ac(t),d.xc(15).focus()})),d.Vb(),d.Jc(16,W,2,0,"button",12),d.Rb(17,"loading-indicator",13),d.ic(18,"async"),d.Vb(),d.Vb(),d.Wb(19,"div",14),d.dc("click",(function(){return e.selectUser(null)})),d.Rb(20,"img",15),d.Wb(21,"div",16),d.Wb(22,"div",17),d.Lc(23,"Any User"),d.Vb(),d.Vb(),d.Vb(),d.Jc(24,C,7,3,"div",18),d.ic(25,"async"),d.Jc(26,w,2,0,"div",19),d.ic(27,"async"),d.Vb()}if(2&t){const t=d.xc(7),a=d.xc(11);d.Db(3),d.pc("matMenuTriggerFor",a),d.Db(1),d.pc("ngIf",d.jc(5,8,e.selectedUser$))("ngIfElse",t),d.Db(10),d.pc("formControl",e.searchFormControl),d.Db(2),d.pc("ngIf",e.searchFormControl.value),d.Db(1),d.pc("isVisible",d.jc(18,10,e.loading$)),d.Db(7),d.pc("ngForOf",d.jc(25,12,e.users$)),d.Db(2),d.pc("ngIf",e.searchedOnce&&!d.jc(27,14,e.users$).length)}},directives:[u.a,h.c,g.t,h.d,r.d,r.u,r.j,m.a,h.a,g.s,f.b,v.a],pipes:[g.b],styles:["[_nghost-%COMP%]{display:block;min-width:280px;max-width:100%}.fake-input[_ngcontent-%COMP%]{position:relative}.fake-label[_ngcontent-%COMP%]{text-transform:capitalize}img[_ngcontent-%COMP%]{display:inline-block;margin-right:8px;width:25px;height:25px;-o-object-fit:cover;object-fit:cover;border-radius:4px;vertical-align:middle}.arrow-container[_ngcontent-%COMP%]{height:100%;position:absolute;top:1px;right:1px;width:20px}.arrow[_ngcontent-%COMP%]{position:absolute;border-color:#000 transparent transparent;border-style:solid;border-width:5px 4px 0;height:0;width:0;left:50%;top:50%;margin-left:-4px;margin-top:-2px}.search-input-container[_ngcontent-%COMP%]{padding:0 8px;min-width:280px;max-width:100%;margin-bottom:10px}.search-input-wrapper[_ngcontent-%COMP%]{position:relative}.clear-search-input-button[_ngcontent-%COMP%]{position:absolute;top:4px;right:0;color:var(--be-secondary-text)}.mat-menu-item[_ngcontent-%COMP%]{display:flex;vertical-align:middle;line-height:normal}.mat-menu-item.selected[_ngcontent-%COMP%]{background-color:var(--be-accent-emphasis)}.mat-menu-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:35px;height:35px;align-self:center}.mat-menu-item[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{text-transform:capitalize}.mat-menu-item[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{color:var(--be-secondary-text);font-size:1.3rem}.any-user-info[_ngcontent-%COMP%], .user-info[_ngcontent-%COMP%]{align-self:center}loading-indicator[_ngcontent-%COMP%]{position:absolute;top:12px;right:40px}.nothing-found-item[_ngcontent-%COMP%]{color:var(--be-hint-text);line-height:48px}"],changeDetection:0}),t})()},SRuq:function(t,e,a){"use strict";a.d(e,"a",(function(){return q}));var n=a("Taaj"),i=a("E8hf"),s=a("nYR2"),o=a("2Vo4"),c=a("VfAk"),r=a("2hX1"),l=a("fXoL"),b=a("QGXG"),d=a("twBr"),p=a("kmQS"),u=a("q18H"),h=a("i2dy"),g=a("EAOp"),m=a("ofXK"),f=a("Ivca"),v=a("Um6Z"),y=a("Rd8u"),V=a("rcZy"),x=a("bTqV"),W=a("3Pt+"),C=a("MNfM"),w=a("8ZjS");let D=(()=>{class t{constructor(t,e){this.fb=t,this.datable=e,this.form=this.fb.group({source:null,category:null,approved:null,quality:null,type:null,user:null,title:null,season:null,episode:null})}ngOnInit(){this.form.patchValue(Object.assign({title:this.title},this.datable.filters$.value)),this.title&&this.form.get("title").disable(),this.form.valueChanges.subscribe(t=>{this.datable.filters$.next(t)})}}return t.\u0275fac=function(e){return new(e||t)(l.Qb(W.h),l.Qb(r.a))},t.\u0275cmp=l.Kb({type:t,selectors:[["video-index-filters"]],inputs:{title:"title"},decls:69,vars:9,consts:[[1,"many-inputs",3,"formGroup"],[1,"input-container"],["for","video-source-filter","trans",""],["id","video-source-filter","formControlName","source"],["trans","",3,"ngValue"],["value","local","trans",""],["value","external","trans",""],["for","video-category-filter","trans",""],["id","video-category-filter","formControlName","category"],["value","trailer","trans",""],["value","clip","trans",""],["value","featurette","trans",""],["value","teaser","trans",""],["value","full","trans",""],["for","video-approved-filter","trans",""],["id","video-approved-filter","formControlName","approved"],["for","video-quality-filter","trans",""],["id","video-quality-filter","formControlName","quality"],["value","sd","trans",""],["value","hd","trans",""],["value","4k","trans",""],["value","hdr","trans",""],["for","video-type-filter","trans",""],["id","video-type-filter","formControlName","type"],["value","embed","trans",""],["value","video","trans",""],["value","frame","trans",""],["formControlName","user"],[3,"formGroup"]],template:function(t,e){1&t&&(l.Wb(0,"div",0),l.Wb(1,"div",1),l.Wb(2,"label",2),l.Lc(3,"Source"),l.Vb(),l.Wb(4,"select",3),l.Wb(5,"option",4),l.Lc(6,"All"),l.Vb(),l.Wb(7,"option",5),l.Lc(8,"Local"),l.Vb(),l.Wb(9,"option",6),l.Lc(10,"External"),l.Vb(),l.Vb(),l.Vb(),l.Wb(11,"div",1),l.Wb(12,"label",7),l.Lc(13,"Category"),l.Vb(),l.Wb(14,"select",8),l.Wb(15,"option",4),l.Lc(16,"All"),l.Vb(),l.Wb(17,"option",9),l.Lc(18,"Trailer"),l.Vb(),l.Wb(19,"option",10),l.Lc(20,"Clip"),l.Vb(),l.Wb(21,"option",11),l.Lc(22,"Featurette"),l.Vb(),l.Wb(23,"option",12),l.Lc(24,"Teaser"),l.Vb(),l.Wb(25,"option",13),l.Lc(26,"Full Movie or episode"),l.Vb(),l.Vb(),l.Vb(),l.Wb(27,"div",1),l.Wb(28,"label",14),l.Lc(29,"Approved"),l.Vb(),l.Wb(30,"select",15),l.Wb(31,"option",4),l.Lc(32,"All"),l.Vb(),l.Wb(33,"option",4),l.Lc(34,"Approved only"),l.Vb(),l.Wb(35,"option",4),l.Lc(36,"Not approved only"),l.Vb(),l.Vb(),l.Vb(),l.Wb(37,"div",1),l.Wb(38,"label",16),l.Lc(39,"Quality"),l.Vb(),l.Wb(40,"select",17),l.Wb(41,"option",4),l.Lc(42,"All"),l.Vb(),l.Wb(43,"option",18),l.Lc(44,"SD"),l.Vb(),l.Wb(45,"option",19),l.Lc(46,"HD"),l.Vb(),l.Wb(47,"option",20),l.Lc(48,"4K"),l.Vb(),l.Wb(49,"option",21),l.Lc(50,"HDR"),l.Vb(),l.Vb(),l.Vb(),l.Wb(51,"div",1),l.Wb(52,"label",22),l.Lc(53,"Type"),l.Vb(),l.Wb(54,"select",23),l.Wb(55,"option",4),l.Lc(56,"All"),l.Vb(),l.Wb(57,"option",24),l.Lc(58,"Embed"),l.Vb(),l.Wb(59,"option",25),l.Lc(60,"Direct Video"),l.Vb(),l.Wb(61,"option",26),l.Lc(62,"Frame"),l.Vb(),l.Wb(63,"option",6),l.Lc(64,"Remote Link"),l.Vb(),l.Vb(),l.Vb(),l.Wb(65,"div",1),l.Rb(66,"select-user-input",27),l.Vb(),l.Wb(67,"div",1),l.Rb(68,"select-title-input",28),l.Vb(),l.Vb()),2&t&&(l.pc("formGroup",e.form),l.Db(5),l.pc("ngValue",null),l.Db(10),l.pc("ngValue",null),l.Db(16),l.pc("ngValue",null),l.Db(2),l.pc("ngValue",!0),l.Db(2),l.pc("ngValue",!1),l.Db(6),l.pc("ngValue",null),l.Db(14),l.pc("ngValue",null),l.Db(13),l.pc("formGroup",e.form))},directives:[W.v,W.m,y.a,W.G,W.u,W.k,W.z,W.J,C.a,w.a],styles:[""],changeDetection:0}),t})();var O=a("eKg+"),I=a("NFeN"),P=a("tyNb"),k=a("Qu3c"),L=a("CH4Q"),R=a("zW5C");function _(t,e){if(1&t){const t=l.Xb();l.Ub(0,13),l.Wb(1,"button",14),l.dc("click",(function(){return l.Ac(t),l.hc().openCrupdateVideoModal()})),l.Lc(2,"Add"),l.Vb(),l.Tb()}}function $(t,e){if(1&t){const t=l.Xb();l.Wb(0,"button",15),l.dc("click",(function(){return l.Ac(t),l.hc().maybeDeleteSelectedVideos()})),l.Lc(1,"Delete Selected"),l.Vb()}}function M(t,e){if(1&t&&l.Rb(0,"video-index-filters",16),2&t){const t=l.hc();l.pc("title",t.title)}}function S(t,e){1&t&&(l.Wb(0,"th",17),l.Lc(1,"Title"),l.Vb())}const j=function(t){return["/admin/titles",t,"edit"]},T=function(){return{active:"videos"}};function E(t,e){if(1&t&&(l.Wb(0,"a",44),l.Lc(1),l.Vb()),2&t){const t=l.hc(2).$implicit;l.pc("routerLink",l.tc(3,j,t.title.id))("queryParams",l.sc(5,T)),l.Db(1),l.Mc(t.title.name)}}function N(t,e){if(1&t&&(l.Wb(0,"td",42),l.Jc(1,E,2,6,"a",43),l.Vb()),2&t){const t=l.hc().$implicit;l.Db(1),l.pc("ngIf",t.title)}}function A(t,e){1&t&&l.Rb(0,"mat-icon",45)}function F(t,e){1&t&&l.Rb(0,"mat-icon",46)}function Q(t,e){1&t&&(l.Wb(0,"div"),l.Lc(1,"-"),l.Vb())}function J(t,e){if(1&t&&(l.Wb(0,"div",47),l.Lc(1),l.Vb()),2&t){const t=l.hc().$implicit;l.Db(1),l.Mc(t.quality)}}function U(t,e){if(1&t){const t=l.Xb();l.Wb(0,"button",48),l.dc("click",(function(){l.Ac(t);const e=l.hc().$implicit;return l.hc().openCrupdateVideoModal(e)})),l.ic(1,"trans"),l.Rb(2,"mat-icon",49),l.Vb()}2&t&&l.pc("matTooltip",l.jc(1,1,"Edit video"))}function X(t,e){if(1&t){const t=l.Xb();l.Wb(0,"tr"),l.Rb(1,"td",18),l.Wb(2,"td"),l.Wb(3,"div",19),l.Rb(4,"img",20),l.Wb(5,"a",21),l.Lc(6),l.Vb(),l.Vb(),l.Vb(),l.Jc(7,N,2,1,"td",22),l.Wb(8,"td",23),l.Lc(9),l.Vb(),l.Wb(10,"td",24),l.Lc(11),l.Vb(),l.Wb(12,"td",25),l.Wb(13,"button",26),l.dc("click",(function(){l.Ac(t);const a=e.$implicit;return l.hc().toggleApprovedState(a)})),l.ic(14,"async"),l.Rb(15,"mat-icon",27),l.Rb(16,"mat-icon",28),l.Vb(),l.Vb(),l.Wb(17,"td",29),l.Lc(18),l.Vb(),l.Wb(19,"td",30),l.Wb(20,"div",31),l.Jc(21,A,1,0,"mat-icon",32),l.Jc(22,F,1,0,"mat-icon",33),l.Jc(23,Q,2,0,"div",34),l.Jc(24,J,2,1,"div",35),l.Vb(),l.Vb(),l.Wb(25,"td",36),l.Lc(26),l.Vb(),l.Wb(27,"td",37),l.Lc(28),l.Vb(),l.Wb(29,"td",38),l.Lc(30),l.Vb(),l.Wb(31,"td",39),l.Lc(32),l.Vb(),l.Wb(33,"td",40),l.Jc(34,U,3,3,"button",41),l.Vb(),l.Vb()}if(2&t){const t=e.$implicit,a=l.hc();l.Db(1),l.pc("table-body-checkbox",t.id),l.Db(3),l.pc("src",t.thumbnail||(null==t.title?null:t.title.backdrop),l.Dc)("title",t.name),l.Db(1),l.pc("href",t.url,l.Dc),l.Db(1),l.Mc(t.name),l.Db(1),l.pc("ngIf",!a.title),l.Db(2),l.Mc(t.type),l.Db(2),l.Mc(t.category),l.Db(2),l.Hb("disapproved",!t.approved)("approved",t.approved),l.pc("disabled",l.jc(14,23,a.modifying$)),l.Db(5),l.Mc(t.plays_count),l.Db(2),l.pc("ngSwitch",t.quality),l.Db(1),l.pc("ngSwitchCase","hd"),l.Db(1),l.pc("ngSwitchCase","4k"),l.Db(1),l.pc("ngSwitchCase","regular"),l.Db(3),l.Mc(t.score?t.score+"%":"-"),l.Db(2),l.Mc(t.reports_count?t.reports_count:"-"),l.Db(2),l.Mc(t.season||"-"),l.Db(2),l.Mc(t.episode||"-"),l.Db(2),l.pc("ngIf",a.currentUser.hasPermission("videos.update"))}}function z(t,e){1&t&&(l.Wb(0,"no-results-message",50),l.Wb(1,"span",51),l.Lc(2,"No videos have been created yet"),l.Vb(),l.Vb())}let q=(()=>{class t{constructor(t,e,a,n,i,s,c){this.datatable=t,this.videos=e,this.modal=a,this.currentUser=n,this.settings=i,this.urls=s,this.toast=c,this.videos$=this.datatable.data$,this.modifying$=new o.a(!1)}ngOnInit(){this.datatable.paginator.dontUpdateQueryParams=!!this.title;const t={uri:n.a.BASE_URI,staticParams:{}};this.title&&(t.staticParams={titleId:this.title.id}),this.datatable=this.datatable.init(t)}maybeDeleteSelectedVideos(){this.datatable.confirmResourceDeletion("videos").subscribe(()=>{this.videos.delete(this.datatable.selectedRows$.value).subscribe(()=>{this.datatable.reset()})})}openCrupdateVideoModal(t){this.datatable.openCrupdateResourceModal(i.a,{video:t,title:t?t.title:this.title}).subscribe()}toggleApprovedState(t){this.modifying$.next(!0);const e=t.approved?this.videos.disapprove(t.id):this.videos.approve(t.id);t.approved=!t.approved,e.pipe(Object(s.a)(()=>this.modifying$.next(!1))).subscribe(()=>{},()=>{this.toast.open(c.a.Default),t.approved=!t.approved})}}return t.\u0275fac=function(e){return new(e||t)(l.Qb(r.a),l.Qb(n.a),l.Qb(b.a),l.Qb(d.a),l.Qb(p.a),l.Qb(u.a),l.Qb(h.b))},t.\u0275cmp=l.Kb({type:t,selectors:[["video-index"]],inputs:{title:"title"},features:[l.Cb([r.a])],decls:38,vars:9,consts:[[1,"datatable","responsive-table"],["pluralResourceName","videos"],["leftContent","",4,"ngIf"],["rightContent","","mat-raised-button","","color","accent","trans","",3,"click",4,"ngIf"],["tableFilters",""],[1,"material-table"],["table-header-checkbox",""],["table-sort-header","","trans",""],["table-sort-header","title_id","trans","",4,"ngIf"],["table-sort-header","plays_count","trans",""],["table-sort-header","reports_count","trans",""],[4,"ngFor","ngForOf"],["svgImage","video-files.svg",4,"ngIf"],["leftContent",""],["mat-raised-button","","color","accent","trans","",3,"click"],["rightContent","","mat-raised-button","","color","accent","trans","",3,"click"],[3,"title"],["table-sort-header","title_id","trans",""],[3,"table-body-checkbox"],[1,"column-with-image"],["alt","",3,"src","title"],["target","_blank",1,"video-name","link",3,"href"],["data-label","Title",4,"ngIf"],["data-label","Type",1,"capitalize"],["data-label","Category",1,"capitalize"],["data-label","Approved"],["mat-icon-button","",1,"approve-button",3,"disabled","click"],["svgIcon","check",1,"success-icon"],["svgIcon","close",1,"warn-icon"],["data-label","Plays"],["data-label","Quality"],[3,"ngSwitch"],["class","icon-quality","svgIcon","hd",4,"ngSwitchCase"],["class","icon-quality","svgIcon","4k",4,"ngSwitchCase"],[4,"ngSwitchCase"],["class","text-quality",4,"ngSwitchDefault"],["data-label","Score"],["data-label","Reports"],["data-label","Season"],["data-label","Episode"],[1,"edit-column"],["mat-icon-button","",3,"matTooltip","click",4,"ngIf"],["data-label","Title"],["class","title-name link",3,"routerLink","queryParams",4,"ngIf"],[1,"title-name","link",3,"routerLink","queryParams"],["svgIcon","hd",1,"icon-quality"],["svgIcon","4k",1,"icon-quality"],[1,"text-quality"],["mat-icon-button","",3,"matTooltip","click"],["svgIcon","edit"],["svgImage","video-files.svg"],["primary-text","","trans",""]],template:function(t,e){1&t&&(l.Wb(0,"div",0),l.Wb(1,"datatable-header",1),l.Jc(2,_,3,0,"ng-container",2),l.Jc(3,$,2,0,"button",3),l.Jc(4,M,1,1,"ng-template",null,4,l.Kc),l.Vb(),l.Wb(6,"table",5),l.Wb(7,"thead"),l.Wb(8,"tr"),l.Rb(9,"th",6),l.Wb(10,"th",7),l.Lc(11,"Name"),l.Vb(),l.Jc(12,S,2,0,"th",8),l.Wb(13,"th",7),l.Lc(14,"Type"),l.Vb(),l.Wb(15,"th",7),l.Lc(16,"Category"),l.Vb(),l.Wb(17,"th",7),l.Lc(18,"Approved"),l.Vb(),l.Wb(19,"th",9),l.Lc(20,"Plays"),l.Vb(),l.Wb(21,"th",7),l.Lc(22,"Quality"),l.Vb(),l.Wb(23,"th",7),l.Lc(24,"Score"),l.Vb(),l.Wb(25,"th",10),l.Lc(26,"Reports"),l.Vb(),l.Wb(27,"th",7),l.Lc(28,"Season"),l.Vb(),l.Wb(29,"th",7),l.Lc(30,"Episode"),l.Vb(),l.Rb(31,"th"),l.Vb(),l.Vb(),l.Wb(32,"tbody"),l.Jc(33,X,35,25,"tr",11),l.ic(34,"async"),l.Vb(),l.Vb(),l.Jc(35,z,3,0,"no-results-message",12),l.ic(36,"async"),l.Rb(37,"datatable-footer"),l.Vb()),2&t&&(l.Db(2),l.pc("ngIf",e.currentUser.hasPermission("videos.create")),l.Db(1),l.pc("ngIf",e.currentUser.hasPermission("videos.delete")),l.Db(9),l.pc("ngIf",!e.title),l.Db(21),l.pc("ngForOf",l.jc(34,5,e.videos$)),l.Db(2),l.pc("ngIf",l.jc(36,7,e.datatable.paginator.noResults$)))},directives:[g.a,m.t,f.a,v.a,y.a,m.s,V.a,x.b,D,O.a,I.a,m.x,m.y,m.z,P.g,k.a,L.a],pipes:[m.b,R.a],styles:[".title-name[_ngcontent-%COMP%], .video-name[_ngcontent-%COMP%]{display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:200px}.approved[_ngcontent-%COMP%]:hover   .warn-icon[_ngcontent-%COMP%]{display:inline-block}.approved[_ngcontent-%COMP%]:hover   .success-icon[_ngcontent-%COMP%]{display:none}.approved[_ngcontent-%COMP%]   .success-icon[_ngcontent-%COMP%], .disapproved[_ngcontent-%COMP%]:hover   .success-icon[_ngcontent-%COMP%]{display:inline-block}.disapproved[_ngcontent-%COMP%]:hover   .warn-icon[_ngcontent-%COMP%]{display:none}.disapproved[_ngcontent-%COMP%]   .warn-icon[_ngcontent-%COMP%]{display:inline-block}.success-icon[_ngcontent-%COMP%]{display:none;color:#43a047}.warn-icon[_ngcontent-%COMP%]{display:none;color:#f44336}"],changeDetection:0}),t})()},Sn2F:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var n=a("fXoL"),i=a("ofXK");function s(t,e){if(1&t&&(n.Ub(0),n.Rb(1,"img",1),n.Wb(2,"div",2),n.Wb(3,"div"),n.Lc(4),n.Vb(),n.Wb(5,"div",3),n.Lc(6),n.Vb(),n.Vb(),n.Tb()),2&t){const t=n.hc();n.Db(1),n.pc("src",t.user.avatar,n.Dc),n.Db(3),n.Mc(t.user.display_name),n.Db(2),n.Mc(t.user.email)}}let o=(()=>{class t{constructor(){this.showEmail=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Kb({type:t,selectors:[["user-column"]],hostAttrs:[1,"column-with-image"],inputs:{user:"user",showEmail:"showEmail"},decls:1,vars:1,consts:[[4,"ngIf"],["alt","",3,"src"],[1,"content"],[1,"email","secondary"]],template:function(t,e){1&t&&n.Jc(0,s,7,3,"ng-container",0),2&t&&n.pc("ngIf",e.user)},directives:[i.t],styles:[""],changeDetection:0}),t})()},Um6Z:function(t,e,a){"use strict";a.d(e,"a",(function(){return h}));var n=a("pLZG"),i=a("FtGj"),s=a("WAq7"),o=a("fXoL"),c=a("2hX1"),r=a("u47x"),l=a("ofXK"),b=a("NFeN");const d=["columnName"],p=["table-sort-header",""],u=["*"];let h=(()=>{class t{constructor(t,e,a,n){this.datable=t,this.cd=e,this.focusMonitor=a,this.el=n,this.orderDir=null,this.arrowVisible=!1,this.arrowDirection="down"}get sortDisabled(){var t;return null===(t=this.datable.config)||void 0===t?void 0:t.disableSort}ngOnInit(){this.orderBy||(this.orderBy=Object(s.a)(this.columnName.nativeElement.textContent,"_")),this.sortSub=this.datable.sort$.pipe(Object(n.a)(t=>t.orderBy!==this.orderBy)).subscribe(()=>{this.orderDir=null,this.onMouseLeave(),this.cd.markForCheck()})}ngAfterViewInit(){this.focusMonitor.monitor(this.el).subscribe()}ngOnDestroy(){this.sortSub.unsubscribe(),this.focusMonitor.stopMonitoring(this.el)}changeSort(){this.datable.sort$.next({orderBy:this.orderBy,orderDir:this.getDirection(this.orderDir)})}getDirection(t){switch(t){case"asc":return this.arrowVisible=!1,this.orderDir=null;case"desc":return this.arrowVisible=!0,this.arrowDirection="up",this.orderDir="asc";default:return this.arrowVisible=!0,this.arrowDirection="down",this.orderDir="desc"}}onMouseEnter(){var t;(null===(t=this.datable.config)||void 0===t?void 0:t.disableSort)||(this.arrowVisible=!0)}onMouseLeave(){this.arrowVisible=!1,this.orderDir||(this.arrowDirection="down")}handleClick(){var t;(null===(t=this.datable.config)||void 0===t?void 0:t.disableSort)||this.changeSort()}handleKeydown(t){var e;(null===(e=this.datable.config)||void 0===e?void 0:e.disableSort)||t.keyCode!==i.n&&t.keyCode!==i.f||(t.preventDefault(),this.changeSort())}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(c.a),o.Qb(o.i),o.Qb(r.h),o.Qb(o.m))},t.\u0275cmp=o.Kb({type:t,selectors:[["","table-sort-header",""]],viewQuery:function(t,e){var a;1&t&&o.Hc(d,!0),2&t&&o.wc(a=o.ec())&&(e.columnName=a.first)},hostAttrs:["tabindex","0"],hostVars:4,hostBindings:function(t,e){1&t&&o.dc("click",(function(){return e.handleClick()}))("keydown",(function(t){return e.handleKeydown(t)}))("mouseenter",(function(){return e.onMouseEnter()}))("mouseleave",(function(){return e.onMouseLeave()})),2&t&&o.Hb("active",e.orderDir)("sort-disabled",e.sortDisabled)},inputs:{orderBy:["table-sort-header","orderBy"]},attrs:p,ngContentSelectors:u,decls:5,vars:3,consts:[[1,"text"],["columnName",""],[1,"icon-wrapper",3,"ngClass"],["svgIcon","arrow-downward",1,"sort-icon"]],template:function(t,e){1&t&&(o.oc(),o.Wb(0,"span",0,1),o.nc(2),o.Vb(),o.Wb(3,"span",2),o.Rb(4,"mat-icon",3),o.Vb()),2&t&&(o.Db(3),o.pc("ngClass",e.arrowDirection),o.Db(1),o.Hb("hint-visible",e.arrowVisible))},directives:[l.q,b.a],styles:["[_nghost-%COMP%]{outline:none}[_nghost-%COMP%]:not(.sort-disabled){cursor:pointer}.active[_nghost-%COMP%]   .sort-icon[_ngcontent-%COMP%]{color:var(--be-text);opacity:1;transform:translate(0)}.cdk-keyboard-focused[_nghost-%COMP%]   .text[_ngcontent-%COMP%]{border-bottom:1px solid}.text[_ngcontent-%COMP%]{display:inline-block}.sort-icon[_ngcontent-%COMP%], .text[_ngcontent-%COMP%]{vertical-align:middle}.sort-icon[_ngcontent-%COMP%]{width:15px;height:15px;transition:all 225ms cubic-bezier(.4,0,.2,1);transform:translateY(25%);opacity:0}.icon-wrapper[_ngcontent-%COMP%]{display:inline-block;margin-left:4px;transition:transform 225ms cubic-bezier(.4,0,.2,1)}.icon-wrapper[_ngcontent-%COMP%]:not(.down){transform:rotate(180deg)}.hint-visible[_ngcontent-%COMP%]{opacity:1;transform:translate(0)}"],changeDetection:0}),t})()},"eKg+":function(t,e,a){"use strict";a.d(e,"a",(function(){return c}));var n=a("fXoL"),i=a("2hX1"),s=a("bSwM");const o=["table-body-checkbox",""];let c=(()=>{class t{constructor(t,e){this.datatable=t,this.cd=e}ngOnInit(){this.changeRef=this.datatable.selectedRows$.subscribe(t=>{this.cd.markForCheck()})}ngOnDestroy(){this.changeRef.unsubscribe()}isRowSelected(t){return this.datatable.selectedRows$.value.indexOf(t)>-1}toggleRow(t){if(this.isRowSelected(t)){const e=this.datatable.selectedRows$.value.slice(),a=this.datatable.selectedRows$.value.indexOf(t);e.splice(a,1),this.datatable.selectedRows$.next(e)}else this.datatable.selectedRows$.next([...this.datatable.selectedRows$.value,t])}}return t.\u0275fac=function(e){return new(e||t)(n.Qb(i.a),n.Qb(n.i))},t.\u0275cmp=n.Kb({type:t,selectors:[["","table-body-checkbox",""]],hostAttrs:[1,"table-checkbox"],inputs:{rowId:["table-body-checkbox","rowId"]},attrs:o,decls:1,vars:1,consts:[[3,"checked","click","change"]],template:function(t,e){1&t&&(n.Wb(0,"mat-checkbox",0),n.dc("click",(function(t){return t.stopPropagation()}))("change",(function(t){return t?e.toggleRow(e.rowId):null})),n.Vb()),2&t&&n.pc("checked",e.isRowSelected(e.rowId))},directives:[s.a],encapsulation:2,changeDetection:0}),t})()},rcZy:function(t,e,a){"use strict";a.d(e,"a",(function(){return g}));var n=a("3Pt+"),i=a("pLZG"),s=a("lJxs"),o=a("fXoL"),c=a("2hX1"),r=a("ofXK"),l=a("bTqV"),b=a("NFeN"),d=a("Rd8u"),p=a("zW5C");function u(t,e){if(1&t&&(o.Wb(0,"div",6),o.Wb(1,"div",7),o.Lc(2,"Items per page"),o.Vb(),o.Wb(3,"div",8),o.Wb(4,"select",9),o.Wb(5,"option",10),o.Lc(6,"10"),o.Vb(),o.Wb(7,"option",10),o.Lc(8,"15"),o.Vb(),o.Wb(9,"option",10),o.Lc(10,"20"),o.Vb(),o.Wb(11,"option",10),o.Lc(12,"50"),o.Vb(),o.Wb(13,"option",10),o.Lc(14,"100"),o.Vb(),o.Vb(),o.Vb(),o.Vb()),2&t){const t=o.hc();o.Db(4),o.pc("formControl",t.perPageControl),o.Db(1),o.pc("ngValue",10),o.Db(2),o.pc("ngValue",15),o.Db(2),o.pc("ngValue",20),o.Db(2),o.pc("ngValue",50),o.Db(2),o.pc("ngValue",100)}}function h(t,e){if(1&t&&(o.Wb(0,"div",11),o.Lc(1),o.ic(2,"trans"),o.Vb()),2&t){const t=o.hc();o.Db(1),o.Qc(" ",t.from," - ",t.to," ",o.jc(2,4,"of")," ",t.totalRecords," ")}}let g=(()=>{class t{constructor(t,e){this.datable=t,this.cd=e,this.hidePerPage=!1,this.perPageControl=new n.i(15)}ngOnInit(){this.changeRef=this.datable.paginator.response$.pipe(Object(i.a)(t=>!!(null==t?void 0:t.pagination)),Object(s.a)(t=>t.pagination)).subscribe(t=>{this.to=t.per_page*t.current_page,this.from=this.to-t.per_page||1,this.totalRecords=t.total,this.havePrevious=t.current_page>1,this.haveNext=t.current_page<t.last_page,this.perPageControl.setValue(parseInt(""+t.per_page),{emitEvent:!1}),this.cd.markForCheck()}),this.perPageControl.valueChanges.subscribe(t=>{this.datable.paginator.changePerPage(t)})}ngOnDestroy(){this.changeRef.unsubscribe(),this.datable.destroy()}previousPage(){this.datable.paginator.previousPage()}nextPage(){this.datable.paginator.nextPage()}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(c.a),o.Qb(o.i))},t.\u0275cmp=o.Kb({type:t,selectors:[["datatable-footer"]],inputs:{hidePerPage:"hidePerPage"},decls:9,vars:8,consts:[["class","page-size",4,"ngIf"],[1,"range-actions"],["class","range-label",4,"ngIf"],["type","button","mat-icon-button","",1,"range-button",3,"disabled","click"],["svgIcon","chevron-left"],["svgIcon","chevron-right"],[1,"page-size"],["trans","",1,"page-size-label"],[1,"input-container"],[1,"page-size-input",3,"formControl"],[3,"ngValue"],[1,"range-label"]],template:function(t,e){1&t&&(o.Jc(0,u,15,6,"div",0),o.Wb(1,"div",1),o.Jc(2,h,3,6,"div",2),o.Wb(3,"button",3),o.dc("click",(function(){return e.previousPage()})),o.ic(4,"async"),o.Rb(5,"mat-icon",4),o.Vb(),o.Wb(6,"button",3),o.dc("click",(function(){return e.nextPage()})),o.ic(7,"async"),o.Rb(8,"mat-icon",5),o.Vb(),o.Vb()),2&t&&(o.pc("ngIf",!e.hidePerPage),o.Db(2),o.pc("ngIf",e.from&&e.to&&e.totalRecords),o.Db(1),o.pc("disabled",!e.havePrevious||o.jc(4,4,e.datable.paginator.loading$)),o.Db(3),o.pc("disabled",!e.haveNext||o.jc(7,6,e.datable.paginator.loading$)))},directives:[r.t,l.b,b.a,d.a,n.G,n.u,n.j,n.z,n.J],pipes:[r.b,p.a],styles:["[_nghost-%COMP%]{padding:0 8px;justify-content:flex-end;flex-wrap:wrap-reverse;width:100%;height:56px}.page-size[_ngcontent-%COMP%], [_nghost-%COMP%]{display:flex;align-items:center}.page-size[_ngcontent-%COMP%]{margin-right:8px}.page-size-label[_ngcontent-%COMP%]{font-size:1.2rem;color:var(--be-secondary-text);margin:0 4px}.input-container[_ngcontent-%COMP%]{width:auto}.page-size-input[_ngcontent-%COMP%]{width:60px;height:33px;padding:4px;margin:0 4px}.range-actions[_ngcontent-%COMP%]{display:flex;align-items:center}.range-label[_ngcontent-%COMP%]{margin:0 32px 0 24px;font-size:1.2rem}.range-button[_ngcontent-%COMP%], .range-label[_ngcontent-%COMP%]{color:var(--be-secondary-text)}.range-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:28px;height:28px;line-height:28px}"],changeDetection:0}),t})()}}]);
//# sourceMappingURL=1-es2015.a7ccf09225c9b14afcf0.js.map