(window.webpackJsonp=window.webpackJsonp||[]).push([[11,2],{"1ImS":function(t,e,a){"use strict";a.d(e,"a",(function(){return h}));var n=a("ofXK"),i=a("NFeN"),r=a("6rvT"),o=a("bSwM"),s=a("3Pt+"),c=a("bTqV"),l=a("A5z7"),b=a("bv9b"),p=a("0Gur"),d=a("Iysn"),u=a("fXoL");let h=(()=>{class t{}return t.\u0275mod=u.Ob({type:t}),t.\u0275inj=u.Nb({factory:function(e){return new(e||t)},imports:[[n.c,r.a,s.E,s.o,p.a,d.a,c.c,i.b,o.b,l.e,b.b],o.b]}),t})()},"2hX1":function(t,e,a){"use strict";a.d(e,"a",(function(){return x}));var n=a("2Vo4"),i=a("itXk"),r=a("LRne"),o=a("lJxs"),s=a("eIep"),c=a("vkgz"),l=a("fXoL"),b=a("tyNb"),p=a("LRXf"),d=a("ahrr");let u=(()=>{class t{constructor(t,e,a){this.router=t,this.http=e,this.localStorage=a,this.params$=new n.a({}),this.paginatedOnce$=new n.a(!1),this.loading$=new n.a(!1),this.response$=new n.a(null),this.dontUpdateQueryParams=!1,this.perPageCacheKey=null,this.noResults$=this.response$.pipe(Object(o.a)(t=>this.paginatedOnce$.value&&0===t.pagination.data.length))}get params(){return this.params$.value}get currentPage(){var t,e;return null===(e=null===(t=this.response$.value)||void 0===t?void 0:t.pagination)||void 0===e?void 0:e.current_page}paginate(t={},e,a){const n=this.subscription?{}:this.currentQueryParams();this.params$.next(Object.assign(Object.assign(Object.assign({},this.response$.value?{perPage:this.response$.value.pagination.per_page,page:this.response$.value.pagination.current_page}:{}),n),t)),this.subscription||this.init(e,a)}nextPage(){const t=this.response$.value.pagination.current_page,e=this.response$.value.pagination.total,a=t+1;this.paginate(Object.assign(Object.assign({},this.params$.value),{page:!t||a>e?t:a}))}previousPage(){const t=this.response$.value.pagination.current_page;this.paginate(Object.assign(Object.assign({},this.params$.value),{page:t-1||1}))}changePerPage(t){var e;t!==(null===(e=this.params$.value)||void 0===e?void 0:e.perPage)&&(this.perPageCacheKey&&this.localStorage.set(this.perPageCacheKey,t),this.paginate(Object.assign(Object.assign({},this.params$.value),{perPage:t})))}currentQueryParams(){return this.router.routerState.root.snapshot.queryParams}init(t,e){this.subscription=this.params$.pipe(Object(s.a)(a=>{this.loading$.next(!0);const n=!this.paginatedOnce$.value;return n&&this.perPageCacheKey&&this.localStorage.get(this.perPageCacheKey)&&(a=Object.assign({perPage:this.localStorage.get(this.perPageCacheKey)},a)),(n&&e?Object(r.a)({pagination:e}):this.http.get(t,a)).pipe(Object(c.a)(()=>{this.updateQueryParams(a),this.loading$.next(!1),this.paginatedOnce$.next(!0)},()=>{this.loading$.next(!1),this.paginatedOnce$.next(!0)}))})).subscribe(t=>{this.response$.next(t)})}updateQueryParams(t={}){if(!this.dontUpdateQueryParams){for(const e in t)Array.isArray(t[e])&&(t[e]=t[e].join(","));this.router.navigate([],{queryParams:t,replaceUrl:!0})}}canLoadNextPage(){var t,e;return this.response$.value&&this.currentPage<(null===(e=null===(t=this.response$.value)||void 0===t?void 0:t.pagination)||void 0===e?void 0:e.last_page)}}return t.\u0275fac=function(e){return new(e||t)(l.ac(b.d),l.ac(p.a),l.ac(d.a))},t.\u0275prov=l.Mb({token:t,factory:t.\u0275fac}),t})();var h=a("Kj3r"),g=a("Zy1z"),f=a("pLZG"),m=a("F96W"),v=a("/RwR");const O={title:"Delete :resource",body:"Are you sure you want to delete selected :resource?",ok:"Delete"};var y=a("hLX6"),P=a("8LU1");function C(t,e){const a=y.pick(e,t);if(Object(P.a)(a)){const t=Number(a);return t<9007199254740991?t:a}return a}var w=a("QGXG");let x=(()=>{class t{constructor(t,e,a,i){this.modal=t,this.router=e,this.http=a,this.localStorage=i,this.sort$=new n.a({}),this.filters$=new n.a({}),this.staticParams$=new n.a({}),this.paginator=new u(this.router,this.http,this.localStorage),this.ignoreNextParamChange=!1,this.originalData$=new n.a([]),this.data$=new n.a([]),this.selectedRows$=new n.a([])}get data(){return this.data$.value}set data(t){const e=[...t];this.originalData$.next(e),this.data$.next(e),this.ignoreNextParamChange=!0,this.reset()}init(t={}){return this.config=t,this.staticParams$.next(Object.assign(Object.assign({},this.staticParams$.value),t.staticParams)),t.uri?this.connectToPaginator():t.initialData&&(this.data=t.initialData),this.mainSub=Object(i.a)([this.sort$,this.filters$,this.staticParams$]).pipe(Object(h.a)(0),Object(o.a)(t=>Object.assign({},...t))).subscribe(t=>{if(this.ignoreNextParamChange)return this.ignoreNextParamChange=!1;t=Object(m.a)(t),Object.entries(t).forEach(([e,a])=>{"object"==typeof a&&a.id&&(t[e+"Id"]=a.id,delete t[e])}),this.config.uri?this.paginator.paginate(t,this.config.uri,this.config.initialData):Object.keys(t).length&&this.applyLocalTransforms(t)}),this}connectToPaginator(){this.paginatorSub=this.paginator.response$.pipe(Object(g.a)()).subscribe(([t,e])=>{var a;const n=this.config.infiniteScroll&&(null===(a=null==t?void 0:t.pagination)||void 0===a?void 0:a.current_page)!==e.pagination.current_page?[...this.data$.value,...e.pagination.data]:e.pagination.data;this.data$.next(n)})}applyLocalTransforms(t){let e=[...this.originalData$.value];t.query&&(e=function(t,e){return t.filter(t=>function(t,e){const a=function t(e){return Object.keys(e).reduce((a,n)=>a+(e[n]&&"object"==typeof e[n]?t(e[n]):e[n])+"\u25ec","").toLowerCase()}(t),n=e.trim().toLowerCase();return-1!==a.indexOf(n)}(t,e))}(e,t.query)),t.orderBy&&t.orderDir&&(e=function(t,e,a){return t.sort((t,n)=>{let i=C(t,e),r=C(n,e);const o=typeof i,s=typeof r;o!==s&&("number"===o&&(i+=""),"number"===s&&(r+=""));let c=0;return null!=i&&null!=r?i>r?c=1:i<r&&(c=-1):null!=i?c=1:null!=r&&(c=-1),c*("asc"===a?1:-1)})}(e,t.orderBy,t.orderDir)),this.data$.next(e)}addFilter(t,e){this.filters$.next(Object.assign(Object.assign({},this.filters$.value),{[t]:e}))}removeFilter(t){const e=Object.assign({},this.filters$.value);delete e[t],this.filters$.next(e)}reset(t=null){this.filters$.next({}),this.sort$.next({}),this.selectedRows$.next([]),t&&this.staticParams$.next(t)}openCrupdateResourceModal(t,e,a){return this.modal.open(t,e,a).beforeClosed().pipe(Object(f.a)(t=>!!t),Object(c.a)(()=>this.reset()))}confirmResourceDeletion(t){const e=Object.assign(Object.assign({},O),{replacements:{resource:t}});return this.modal.open(v.a,e).afterClosed().pipe(Object(f.a)(t=>t))}getCurrentParams(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.sort$.value),this.filters$.value),this.staticParams$.value),this.paginator.params)}destroy(){var t,e;null===(t=this.paginatorSub)||void 0===t||t.unsubscribe(),null===(e=this.mainSub)||void 0===e||e.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(l.ac(w.a),l.ac(b.d),l.ac(p.a),l.ac(d.a))},t.\u0275prov=l.Mb({token:t,factory:t.\u0275fac}),t})()},EAOp:function(t,e,a){"use strict";a.d(e,"a",(function(){return F}));var n=a("fXoL");const i=[{originX:"start",originY:"center",overlayX:"end",overlayY:"center",offsetX:5},{originX:"end",originY:"center",overlayX:"start",overlayY:"center",offsetX:5}];var r=a("nPOm"),o=a("0IaG"),s=a("ZfYz"),c=a("NFeN"),l=a("Rd8u"),b=a("3Pt+"),p=a("ofXK"),d=a("bTqV");function u(t,e){1&t&&n.Sb(0)}let h=(()=>{class t{constructor(t,e){this.data=t,this.overlayPanelRef=e}close(){this.overlayPanelRef.close()}}return t.\u0275fac=function(e){return new(e||t)(n.Qb(r.a),n.Qb(s.a))},t.\u0275cmp=n.Kb({type:t,selectors:[["datatable-filters-panel"]],hostVars:1,hostBindings:function(t,e){2&t&&n.Rc("@dialogContainer","enter")},decls:9,vars:1,consts:[["svgIcon","filter-list"],["trans",""],[1,"body",3,"ngSubmit"],[4,"ngTemplateOutlet"],["type","button","mat-button","","color","accent","trans","",3,"click"]],template:function(t,e){1&t&&(n.Wb(0,"header"),n.Rb(1,"mat-icon",0),n.Wb(2,"span",1),n.Lc(3,"Filters"),n.Vb(),n.Vb(),n.Wb(4,"form",2),n.dc("ngSubmit",(function(){return e.close()})),n.Jc(5,u,1,0,"ng-container",3),n.Vb(),n.Wb(6,"footer"),n.Wb(7,"button",4),n.dc("click",(function(){return e.close()})),n.Lc(8,"Close"),n.Vb(),n.Vb()),2&t&&(n.Db(5),n.pc("ngTemplateOutlet",e.data.filters))},directives:[c.a,l.a,b.K,b.v,b.w,p.A,d.b],styles:["[_nghost-%COMP%]{display:block;min-width:250px;margin:auto;background-color:var(--be-background);border-radius:4px;box-shadow:0 8px 9px -5px rgba(0,0,0,.2),0 15px 22px 2px rgba(0,0,0,.14),0 6px 28px 5px rgba(0,0,0,.12)}header[_ngcontent-%COMP%]{border-bottom:1px solid var(--be-divider-default);padding:15px 20px;margin-bottom:20px;font-weight:500}header[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{vertical-align:middle;margin-right:5px}.body[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}footer[_ngcontent-%COMP%]{border-top:1px solid var(--be-divider-default);text-align:right;margin-top:10px;padding:10px 20px}"],data:{animation:[o.j.dialogContainer]},changeDetection:0}),t})();var g=a("lJxs"),f=a("F96W"),m=a("2hX1"),v=a("dz5c"),O=a("bv9b"),y=a("Kj3r"),P=a("/uUt"),C=a("tyNb"),w=a("zW5C");function x(t,e){1&t&&n.Rb(0,"mat-icon",3)}let j=(()=>{class t{constructor(t,e){this.datatable=t,this.route=e,this.searchControl=new b.i(this.route.snapshot.queryParams.query),this.hideIcon=!1}ngOnInit(){this.searchControl.valueChanges.pipe(Object(y.a)(400),Object(P.a)()).subscribe(t=>{this.datatable.addFilter("query",t)})}}return t.\u0275fac=function(e){return new(e||t)(n.Qb(m.a),n.Qb(C.a))},t.\u0275cmp=n.Kb({type:t,selectors:[["datatable-header-search-input"]],inputs:{placeholder:"placeholder",hideIcon:"hideIcon"},decls:4,vars:5,consts:[[1,"input-container","search-input-container"],["type","text",1,"search-input",3,"placeholder","formControl"],["svgIcon","search",4,"ngIf"],["svgIcon","search"]],template:function(t,e){1&t&&(n.Wb(0,"div",0),n.Rb(1,"input",1),n.ic(2,"trans"),n.Jc(3,x,1,0,"mat-icon",2),n.Vb()),2&t&&(n.Db(1),n.pc("placeholder",n.jc(2,3,e.placeholder))("formControl",e.searchControl),n.Db(2),n.pc("ngIf",!e.hideIcon))},directives:[b.d,b.u,b.j,p.t,c.a],pipes:[w.a],styles:[".input-container[_ngcontent-%COMP%]{min-width:250px;position:relative;flex-shrink:0}.input-container[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{position:absolute;top:calc(50% - 12px);right:5px;color:var(--be-secondary-text)}.icon-left[_nghost-%COMP%]   .mat-icon[_ngcontent-%COMP%], .icon-left   [_nghost-%COMP%]   .mat-icon[_ngcontent-%COMP%]{left:10px;right:0}"],changeDetection:0}),t})();var V=a("A5z7");const _=["tableFilters"],M=["filterButton"];function W(t,e){1&t&&n.Rb(0,"mat-progress-bar",7)}function $(t,e){1&t&&(n.Wb(0,"div",8),n.nc(1),n.Vb())}function S(t,e){if(1&t&&(n.Wb(0,"div",9),n.Lc(1),n.ic(2,"trans"),n.Vb()),2&t){const t=n.hc();n.Db(1),n.Pc(" ",t.numberOfRowsSelected," ",t.pluralResourceName," ",n.jc(2,3,"Selected")," ")}}function D(t,e){if(1&t){const t=n.Xb();n.Wb(0,"mat-chip",18),n.dc("removed",(function(){n.Ac(t);const a=e.$implicit;return n.hc(3).datatable.removeFilter(a.key)})),n.Lc(1),n.Rb(2,"mat-icon",19),n.Vb()}if(2&t){const t=e.$implicit,a=n.hc(3);n.pc("removable",!0)("selectable",!1),n.Db(1),n.Oc(" ",t.key,": ",a.isModel(t.value)?t.value.name||t.value.display_name:t.value," ")}}function R(t,e){if(1&t){const t=n.Xb();n.Ub(0),n.Wb(1,"mat-chip-list",13),n.Jc(2,D,3,4,"mat-chip",14),n.ic(3,"keyvalue"),n.ic(4,"async"),n.Vb(),n.Wb(5,"button",15,16),n.dc("click",(function(){return n.Ac(t),n.hc(2).openFiltersPanel()})),n.Rb(7,"mat-icon",17),n.Vb(),n.Tb()}if(2&t){const t=n.hc(2);n.Db(2),n.pc("ngForOf",n.jc(3,3,n.jc(4,5,t.filters$))),n.Db(3),n.Hb("active",t.filterPanelRef)}}function k(t,e){if(1&t&&(n.Wb(0,"div",10),n.Jc(1,R,8,7,"ng-container",11),n.Rb(2,"datatable-header-search-input",12),n.Vb()),2&t){const t=n.hc();n.Db(1),n.pc("ngIf",t.filterPanelTemplate),n.Db(1),n.rc("placeholder","Search ",t.pluralResourceName,"")}}function L(t,e){1&t&&(n.Wb(0,"div",20),n.nc(1,1),n.Vb())}const I=[[["","leftContent",""]],[["","rightContent",""]]],N=["[leftContent]","[rightContent]"];let F=(()=>{class t{constructor(t,e,a){this.datatable=t,this.cd=e,this.overlayPanel=a,this.showSelectedActions=!0,this.subscriptions=[],this.filters$=this.datatable.filters$.pipe(Object(g.a)(t=>{const e=Object(f.a)(t);return delete e.query,e}))}ngOnInit(){const t=this.datatable.filters$.subscribe(()=>{this.filterPanelRef&&this.filterPanelRef.close()}),e=this.datatable.selectedRows$.subscribe(t=>{this.numberOfRowsSelected=t.length,this.cd.markForCheck()});this.subscriptions=[t,e]}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}openFiltersPanel(){if(this.filterPanelRef)this.filterPanelRef.close();else{const t=i.slice();t[0].offsetY=40,t[1].offsetY=40,this.filterPanelRef=this.overlayPanel.open(h,{origin:this.filterButton,position:t,mobilePosition:"center",data:{filters:this.filterPanelTemplate},maxWidth:"90%"}),this.filterButton.nativeElement.classList.add("active"),this.filterPanelRef.afterClosed().subscribe(()=>{this.filterPanelRef=null,this.filterButton.nativeElement.classList.remove("active")})}}isModel(t){return"object"==typeof t&&t.id}}return t.\u0275fac=function(e){return new(e||t)(n.Qb(m.a),n.Qb(n.i),n.Qb(v.a))},t.\u0275cmp=n.Kb({type:t,selectors:[["datatable-header"]],contentQueries:function(t,e,a){var i;1&t&&n.Jb(a,_,!0),2&t&&n.wc(i=n.ec())&&(e.filterPanelTemplate=i.first)},viewQuery:function(t,e){var a;1&t&&n.Sc(M,!0,n.m),2&t&&n.wc(a=n.ec())&&(e.filterButton=a.first)},hostVars:2,hostBindings:function(t,e){2&t&&n.Hb("rows-selected",e.numberOfRowsSelected)},inputs:{pluralResourceName:"pluralResourceName",showSelectedActions:"showSelectedActions"},ngContentSelectors:N,decls:8,vars:7,consts:[["mode","indeterminate","color","accent",4,"ngIf"],[1,"left-column"],["class","default-left-content",4,"ngIf"],["class","selected-left-content capitalize",4,"ngIf"],[1,"right-column"],["class","default-right-content",4,"ngIf"],["class","selected-right-actions",4,"ngIf"],["mode","indeterminate","color","accent"],[1,"default-left-content"],[1,"selected-left-content","capitalize"],[1,"default-right-content"],[4,"ngIf"],[3,"placeholder"],["aria-label","Active Filters",1,"filter-chip-list"],[3,"removable","selectable","removed",4,"ngFor","ngForOf"],["mat-icon-button","",1,"filter-button",3,"click"],["filterButton",""],["svgIcon","filter-list"],[3,"removable","selectable","removed"],["matChipRemove","","svgIcon","cancel"],[1,"selected-right-actions"]],template:function(t,e){1&t&&(n.oc(I),n.Jc(0,W,1,0,"mat-progress-bar",0),n.ic(1,"async"),n.Wb(2,"div",1),n.Jc(3,$,2,0,"div",2),n.Jc(4,S,3,5,"div",3),n.Vb(),n.Wb(5,"div",4),n.Jc(6,k,3,2,"div",5),n.Jc(7,L,2,0,"div",6),n.Vb()),2&t&&(n.pc("ngIf",n.jc(1,5,e.datatable.paginator&&e.datatable.paginator.loading$)),n.Db(3),n.pc("ngIf",!e.showSelectedActions||!e.numberOfRowsSelected),n.Db(1),n.pc("ngIf",e.showSelectedActions&&e.numberOfRowsSelected),n.Db(2),n.pc("ngIf",!e.showSelectedActions||!e.numberOfRowsSelected),n.Db(1),n.pc("ngIf",e.showSelectedActions&&e.numberOfRowsSelected))},directives:[p.t,O.a,j,V.c,p.s,d.b,c.a,V.a,V.d],pipes:[p.b,w.a,p.l],styles:[".rows-selected[_nghost-%COMP%], .rows-selected   [_nghost-%COMP%]{background-color:var(--be-accent-emphasis);color:var(--be-secondary-text);font-size:1.5rem;border-color:var(--be-divider-default)}[_nghost-%COMP%]{display:flex;align-items:center;height:85px;padding:15px;border-bottom:1px solid transparent;position:relative}.mat-progress-bar[_ngcontent-%COMP%]{position:absolute;top:0;left:0}.left-column[_ngcontent-%COMP%]{margin-right:auto}.right-column[_ngcontent-%COMP%]{margin-left:25px}.default-right-content[_ngcontent-%COMP%]{display:flex;align-items:center}.filter-button[_ngcontent-%COMP%]{margin-right:10px}.active[_ngcontent-%COMP%]{color:var(--be-accent-default)}.mat-chip[_ngcontent-%COMP%]{text-transform:capitalize}  datatable-header info-popover{margin-left:10px}"],changeDetection:0}),t})()},F96W:function(t,e,a){"use strict";function n(t){const e=Object.assign({},t);return Object.keys(e).forEach(t=>(null==e[t]||""===e[t])&&delete e[t]),e}a.d(e,"a",(function(){return n}))},Um6Z:function(t,e,a){"use strict";a.d(e,"a",(function(){return h}));var n=a("pLZG"),i=a("FtGj"),r=a("WAq7"),o=a("fXoL"),s=a("2hX1"),c=a("u47x"),l=a("ofXK"),b=a("NFeN");const p=["columnName"],d=["table-sort-header",""],u=["*"];let h=(()=>{class t{constructor(t,e,a,n){this.datable=t,this.cd=e,this.focusMonitor=a,this.el=n,this.orderDir=null,this.arrowVisible=!1,this.arrowDirection="down"}get sortDisabled(){var t;return null===(t=this.datable.config)||void 0===t?void 0:t.disableSort}ngOnInit(){this.orderBy||(this.orderBy=Object(r.a)(this.columnName.nativeElement.textContent,"_")),this.sortSub=this.datable.sort$.pipe(Object(n.a)(t=>t.orderBy!==this.orderBy)).subscribe(()=>{this.orderDir=null,this.onMouseLeave(),this.cd.markForCheck()})}ngAfterViewInit(){this.focusMonitor.monitor(this.el).subscribe()}ngOnDestroy(){this.sortSub.unsubscribe(),this.focusMonitor.stopMonitoring(this.el)}changeSort(){this.datable.sort$.next({orderBy:this.orderBy,orderDir:this.getDirection(this.orderDir)})}getDirection(t){switch(t){case"asc":return this.arrowVisible=!1,this.orderDir=null;case"desc":return this.arrowVisible=!0,this.arrowDirection="up",this.orderDir="asc";default:return this.arrowVisible=!0,this.arrowDirection="down",this.orderDir="desc"}}onMouseEnter(){var t;(null===(t=this.datable.config)||void 0===t?void 0:t.disableSort)||(this.arrowVisible=!0)}onMouseLeave(){this.arrowVisible=!1,this.orderDir||(this.arrowDirection="down")}handleClick(){var t;(null===(t=this.datable.config)||void 0===t?void 0:t.disableSort)||this.changeSort()}handleKeydown(t){var e;(null===(e=this.datable.config)||void 0===e?void 0:e.disableSort)||t.keyCode!==i.n&&t.keyCode!==i.f||(t.preventDefault(),this.changeSort())}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(s.a),o.Qb(o.i),o.Qb(c.h),o.Qb(o.m))},t.\u0275cmp=o.Kb({type:t,selectors:[["","table-sort-header",""]],viewQuery:function(t,e){var a;1&t&&o.Hc(p,!0),2&t&&o.wc(a=o.ec())&&(e.columnName=a.first)},hostAttrs:["tabindex","0"],hostVars:4,hostBindings:function(t,e){1&t&&o.dc("click",(function(){return e.handleClick()}))("keydown",(function(t){return e.handleKeydown(t)}))("mouseenter",(function(){return e.onMouseEnter()}))("mouseleave",(function(){return e.onMouseLeave()})),2&t&&o.Hb("active",e.orderDir)("sort-disabled",e.sortDisabled)},inputs:{orderBy:["table-sort-header","orderBy"]},attrs:d,ngContentSelectors:u,decls:5,vars:3,consts:[[1,"text"],["columnName",""],[1,"icon-wrapper",3,"ngClass"],["svgIcon","arrow-downward",1,"sort-icon"]],template:function(t,e){1&t&&(o.oc(),o.Wb(0,"span",0,1),o.nc(2),o.Vb(),o.Wb(3,"span",2),o.Rb(4,"mat-icon",3),o.Vb()),2&t&&(o.Db(3),o.pc("ngClass",e.arrowDirection),o.Db(1),o.Hb("hint-visible",e.arrowVisible))},directives:[l.q,b.a],styles:["[_nghost-%COMP%]{outline:none}[_nghost-%COMP%]:not(.sort-disabled){cursor:pointer}.active[_nghost-%COMP%]   .sort-icon[_ngcontent-%COMP%]{color:var(--be-text);opacity:1;transform:translate(0)}.cdk-keyboard-focused[_nghost-%COMP%]   .text[_ngcontent-%COMP%]{border-bottom:1px solid}.text[_ngcontent-%COMP%]{display:inline-block}.sort-icon[_ngcontent-%COMP%], .text[_ngcontent-%COMP%]{vertical-align:middle}.sort-icon[_ngcontent-%COMP%]{width:15px;height:15px;transition:all 225ms cubic-bezier(.4,0,.2,1);transform:translateY(25%);opacity:0}.icon-wrapper[_ngcontent-%COMP%]{display:inline-block;margin-left:4px;transition:transform 225ms cubic-bezier(.4,0,.2,1)}.icon-wrapper[_ngcontent-%COMP%]:not(.down){transform:rotate(180deg)}.hint-visible[_ngcontent-%COMP%]{opacity:1;transform:translate(0)}"],changeDetection:0}),t})()},WMcg:function(t,e,a){"use strict";a.r(e),a.d(e,"CrupdatePersonModule",(function(){return q}));var n=a("ofXK"),i=a("tyNb"),r=a("mrSG"),o=a("AcyG");let s=(()=>{class t{constructor(t){this.id=t}}return t.type="[CrupdatePerson] Load Person",t})(),c=(()=>{class t{constructor(t){this.id=t}}return t.type="[CrupdatePerson] Detach Credit",t})(),l=(()=>{class t{constructor(t){this.payload=t}}return t.type="[CrupdatePerson] Create Person",t})(),b=(()=>{class t{constructor(t){this.payload=t}}return t.type="[CrupdatePerson] Update Person",t})(),p=(()=>{class t{}return t.type="[CrupdatePerson] Reset State",t})();class d{constructor(t={}){for(const e in t)this[e]=t[e]}}var u=a("vkgz"),h=a("nYR2"),g=a("fXoL"),f=a("ZQmV"),m=a("7tLl");let v=(()=>{let t=class{constructor(t,e){this.people=t,this.titles=e}static person(t){return t.person}static loading(t){return t.loading}static credits(t){return t.credits}loadPerson(t,e){return t.patchState({loading:!0}),this.people.get(e.id).pipe(Object(u.a)(e=>{t.patchState({person:e.person,credits:this.flattenCredits(e.credits),loading:!1})}))}createPerson(t,e){return t.patchState({loading:!0}),this.people.create(e.payload).pipe(Object(h.a)(()=>t.patchState({loading:!1})),Object(u.a)(e=>t.patchState({person:e.person})))}updatePerson(t,e){return t.patchState({loading:!0}),this.people.update(t.getState().person.id,e.payload).pipe(Object(h.a)(()=>t.patchState({loading:!1})),Object(u.a)(e=>t.patchState({person:e.person})))}removeCredit(t,e){return t.patchState({loading:!0}),this.titles.removeCredit(e.id).pipe(Object(u.a)(()=>{const a=t.getState().credits.filter(t=>t.pivot.id!==e.id);t.patchState({credits:a})}),Object(h.a)(()=>t.patchState({loading:!1})))}resetState(t){t.patchState({person:new d,credits:[],loading:!1})}flattenCredits(t){const e=[];return Object.keys(t).forEach(a=>{e.push(...t[a])}),e}};return t.\u0275fac=function(e){return new(e||t)(g.ac(f.a),g.ac(m.a))},t.\u0275prov=g.Mb({token:t,factory:t.\u0275fac}),Object(r.b)([Object(o.a)(s)],t.prototype,"loadPerson",null),Object(r.b)([Object(o.a)(l)],t.prototype,"createPerson",null),Object(r.b)([Object(o.a)(b)],t.prototype,"updatePerson",null),Object(r.b)([Object(o.a)(c)],t.prototype,"removeCredit",null),Object(r.b)([Object(o.a)(p)],t.prototype,"resetState",null),Object(r.b)([Object(o.e)()],t,"person",null),Object(r.b)([Object(o.e)()],t,"loading",null),Object(r.b)([Object(o.e)()],t,"credits",null),t=Object(r.b)([Object(o.f)({name:"crupdatePerson",defaults:{person:new d,credits:[],loading:!1}})],t),t})();var O=a("2Vo4"),y=a("r2Ys"),P=a("h586"),C=a("Lm4C"),w=a("QeDF"),x=a("2hX1"),j=a("i2dy"),V=a("3Pt+"),_=a("wZkO"),M=a("l9qf"),W=a("bTqV"),$=a("Rd8u"),S=a("Qu3c"),D=a("NFeN"),R=a("ihCf"),k=a("EAOp"),L=a("Um6Z"),I=a("FBzJ"),N=a("CH4Q"),F=a("zW5C");function Q(t,e){if(1&t){const t=g.Xb();g.Wb(0,"tr"),g.Wb(1,"td"),g.Wb(2,"div",45),g.Rb(3,"media-image",46),g.Wb(4,"span"),g.Lc(5),g.Vb(),g.Vb(),g.Vb(),g.Wb(6,"td",47),g.Lc(7),g.Vb(),g.Wb(8,"td",48),g.Lc(9),g.Vb(),g.Wb(10,"td",49),g.Lc(11),g.Vb(),g.Wb(12,"td",50),g.Wb(13,"button",51),g.dc("click",(function(){g.Ac(t);const a=e.$implicit;return g.hc().detachCredit(a)})),g.Rb(14,"mat-icon",52),g.Vb(),g.Vb(),g.Vb()}if(2&t){const t=e.$implicit;g.Db(3),g.pc("src",t.poster),g.Db(2),g.Mc(t.name),g.Db(2),g.Mc(null!=t.pivot&&t.pivot.character?t.pivot.character:"-"),g.Db(2),g.Nc("",null!=t.pivot&&t.pivot.department?t.pivot.department:"-"," "),g.Db(2),g.Mc(null!=t.pivot&&t.pivot.job?t.pivot.job:"-")}}function A(t,e){1&t&&(g.Wb(0,"no-results-message",53),g.Wb(1,"span",54),g.Lc(2,"Nothing to display."),g.Vb(),g.Vb())}const z=[{path:"",component:(()=>{class t{constructor(t,e,a,n,i,r,o){this.store=t,this.toast=e,this.router=a,this.fb=n,this.route=i,this.uploadQueue=r,this.datatable=o,this.poster$=new O.a(null),this.personForm=this.fb.group({name:[""],poster:[""],popularity:[""],description:[""],known_for:[""],birth_place:[""],birth_date:[""],death_date:[""],gender:[null],allow_update:[!0]})}ngOnInit(){this.datatable.init(),this.route.params.subscribe(t=>{this.loadPerson(t)}),this.store.select(v.credits).subscribe(t=>{this.datatable.data=t}),this.personForm.get("poster").valueChanges.subscribe(t=>{this.poster$.next(t)})}ngOnDestroy(){this.store.dispatch(new p),this.datatable.destroy()}uploadPoster(){Object(C.a)({types:[w.a.image]}).then(t=>{this.uploadQueue.start(t,{uri:"uploads/images",httpParams:{diskPrefix:"media-images/posters"}}).subscribe(t=>{this.personForm.patchValue({poster:t.fileEntry.url})})})}loadPerson(t){t.id&&this.store.dispatch(new s(+t.id)).subscribe(()=>{const t=this.store.selectSnapshot(v.person);this.personForm.patchValue(t),this.poster$.next(t.poster)})}submit(){const t=this.store.selectSnapshot(v.person);this.store.dispatch(t.id?new b(this.personForm.value):new l(this.personForm.value)).subscribe(()=>{this.router.navigate([this.router.url.includes("admin")?"admin/people":this.router.url.split("?")[0].replace("/edit","")]),this.toast.open(t.id?y.a.PERSON_UPDATE_SUCCESS:y.a.PERSON_CREATE_SUCCESS)})}detachCredit(t){t.pivot&&this.store.dispatch(new c(t.pivot.id)).subscribe(()=>{this.toast.open(y.a.CREDIT_REMOVE_SUCCESS)})}}return t.\u0275fac=function(e){return new(e||t)(g.Qb(o.g),g.Qb(j.b),g.Qb(i.d),g.Qb(V.h),g.Qb(i.a),g.Qb(P.a),g.Qb(x.a))},t.\u0275cmp=g.Kb({type:t,selectors:[["crupdate-person-page"]],features:[g.Cb([P.a,x.a])],decls:90,vars:25,consts:[["animationDuration","0ms","color","accent",1,"material-panel"],[3,"label"],["ngNativeValidate","",1,"primary-facts-panel",3,"formGroup","ngSubmit"],[1,"left-col"],["size","medium",3,"src"],["type","submit","mat-raised-button","","color","accent","trans","",1,"submit-button"],[1,"right-col","many-inputs"],[1,"inline-container","many-inputs"],[1,"input-container"],["for","name","trans",""],["type","text","formControlName","name","id","name","required",""],["for","known_for","trans",""],["type","text","formControlName","known_for","id","known_for"],["for","poster","trans",""],[1,"input-with-action","action-left"],["type","button","mat-flat-button","","color","accent",3,"matTooltip","click"],["svgIcon","file-upload"],["type","text","formControlName","poster","id","poster","minlength","1","maxlength","250"],["for","description","trans",""],["id","description","formControlName","description","cdkTextareaAutosize","","cdkAutosizeMinRows","10","cdkAutosizeMaxRows","100"],["for","gender","trans",""],["id","gender","formControlName","gender"],[3,"ngValue"],["value","male","trans",""],["value","female","trans",""],["for","birth_date","trans",""],["type","date","id","birth_date","formControlName","birth_date"],["for","death_date","trans",""],["type","date","id","death_date","formControlName","death_date"],["for","popularity","trans",""],["type","number","formControlName","popularity","id","popularity","min","1","max","1000","step","0.1"],["for","birth_place","trans",""],["type","text","id","birth_place","formControlName","birth_place"],["for","allow_update","trans",""],["formControlName","allow_update","id","allow_update","required",""],["trans","",3,"ngValue"],[1,"responsive-table"],[1,"material-table"],["table-sort-header","name","trans",""],["table-sort-header","pivot.character","trans",""],["table-sort-header","pivot.department","trans",""],["table-sort-header","pivot.job","trans",""],[4,"ngFor","ngForOf"],["svgImage","awards.svg",4,"ngIf"],[1,"overlay",3,"isVisible"],[1,"column-with-image"],["size","small",3,"src"],["data-label","Character",1,"capitalize"],["data-label","Department",1,"capitalize"],["data-label","Job",1,"capitalize"],[1,"edit-column"],["type","button","mat-icon-button","",3,"click"],["svgIcon","close"],["svgImage","awards.svg"],["primary-text","","trans",""]],template:function(t,e){1&t&&(g.Wb(0,"mat-tab-group",0),g.Wb(1,"mat-tab",1),g.ic(2,"trans"),g.Wb(3,"form",2),g.dc("ngSubmit",(function(){return e.submit()})),g.Wb(4,"div",3),g.Rb(5,"media-image",4),g.ic(6,"async"),g.Wb(7,"button",5),g.Lc(8,"Save"),g.Vb(),g.Vb(),g.Wb(9,"div",6),g.Wb(10,"div",7),g.Wb(11,"div",8),g.Wb(12,"label",9),g.Lc(13,"Name"),g.Vb(),g.Rb(14,"input",10),g.Vb(),g.Wb(15,"div",8),g.Wb(16,"label",11),g.Lc(17,"Known For"),g.Vb(),g.Rb(18,"input",12),g.Vb(),g.Vb(),g.Wb(19,"div",8),g.Wb(20,"label",13),g.Lc(21,"Image"),g.Vb(),g.Wb(22,"div",14),g.Wb(23,"button",15),g.dc("click",(function(){return e.uploadPoster()})),g.ic(24,"trans"),g.Rb(25,"mat-icon",16),g.Vb(),g.Rb(26,"input",17),g.Vb(),g.Vb(),g.Wb(27,"div",8),g.Wb(28,"label",18),g.Lc(29,"Biography"),g.Vb(),g.Rb(30,"textarea",19),g.Vb(),g.Wb(31,"div",7),g.Wb(32,"div",8),g.Wb(33,"label",20),g.Lc(34,"Gender"),g.Vb(),g.Wb(35,"select",21),g.Wb(36,"option",22),g.Lc(37,"-"),g.Vb(),g.Wb(38,"option",23),g.Lc(39,"Male"),g.Vb(),g.Wb(40,"option",24),g.Lc(41,"Female"),g.Vb(),g.Vb(),g.Vb(),g.Wb(42,"div",8),g.Wb(43,"label",25),g.Lc(44,"Birth Date"),g.Vb(),g.Rb(45,"input",26),g.Vb(),g.Wb(46,"div",8),g.Wb(47,"label",27),g.Lc(48,"Death Date"),g.Vb(),g.Rb(49,"input",28),g.Vb(),g.Vb(),g.Wb(50,"div",7),g.Wb(51,"div",8),g.Wb(52,"label",29),g.Lc(53,"Popularity"),g.Vb(),g.Rb(54,"input",30),g.Vb(),g.Wb(55,"div",8),g.Wb(56,"label",31),g.Lc(57,"Birth Place"),g.Vb(),g.Rb(58,"input",32),g.Vb(),g.Wb(59,"div",8),g.Wb(60,"label",33),g.Lc(61,"Allow Auto Update"),g.Vb(),g.Wb(62,"select",34),g.Wb(63,"option",35),g.Lc(64,"Yes"),g.Vb(),g.Wb(65,"option",35),g.Lc(66,"No"),g.Vb(),g.Vb(),g.Vb(),g.Vb(),g.Vb(),g.Vb(),g.Vb(),g.Wb(67,"mat-tab",1),g.ic(68,"trans"),g.Wb(69,"div",36),g.Rb(70,"datatable-header"),g.Wb(71,"table",37),g.Wb(72,"thead"),g.Wb(73,"tr"),g.Wb(74,"th",38),g.Lc(75,"Credit"),g.Vb(),g.Wb(76,"th",39),g.Lc(77,"Character"),g.Vb(),g.Wb(78,"th",40),g.Lc(79,"Department"),g.Vb(),g.Wb(80,"th",41),g.Lc(81,"Job"),g.Vb(),g.Rb(82,"th"),g.Vb(),g.Vb(),g.Wb(83,"tbody"),g.Jc(84,Q,15,5,"tr",42),g.ic(85,"async"),g.Vb(),g.Vb(),g.Jc(86,A,3,0,"no-results-message",43),g.ic(87,"async"),g.Vb(),g.Vb(),g.Vb(),g.Rb(88,"loading-indicator",44),g.ic(89,"async")),2&t&&(g.Db(1),g.pc("label",g.jc(2,11,"Primary Facts")),g.Db(2),g.pc("formGroup",e.personForm),g.Db(2),g.pc("src",g.jc(6,13,e.poster$)),g.Db(18),g.pc("matTooltip",g.jc(24,15,"Upload poster")),g.Db(13),g.pc("ngValue",null),g.Db(27),g.pc("ngValue",!0),g.Db(2),g.pc("ngValue",!1),g.Db(2),g.pc("label",g.jc(68,17,"Credits")),g.Db(17),g.pc("ngForOf",g.jc(85,19,e.datatable.data$)),g.Db(2),g.pc("ngIf",!g.jc(87,21,e.datatable.data$).length),g.Db(2),g.pc("isVisible",g.jc(89,23,e.loading$)))},directives:[_.c,_.a,V.v,V.m,M.a,W.b,$.a,V.d,V.u,V.k,V.F,S.a,D.a,V.q,V.p,R.b,V.G,V.z,V.J,V.A,k.a,L.a,n.s,n.t,I.a,N.a],pipes:[F.a,n.b],styles:["[_nghost-%COMP%]{display:block;width:100%}[_nghost-%COMP%]     .mat-tab-body-wrapper{padding:20px 0}[_nghost-%COMP%]     .mat-tab-label-content{text-transform:capitalize}[_nghost-%COMP%]     datatable-header .left-column{display:none}[_nghost-%COMP%]     datatable-header .right-column{margin:0}[_nghost-%COMP%]     datatable-header .input-container{width:400px}.inline-container[_ngcontent-%COMP%]{display:flex}.inline-container[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]{flex:1 1 auto}.inline-container[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]:not(:last-of-type){margin-right:15px}.inline-container[_ngcontent-%COMP%]   .input-container.size-small[_ngcontent-%COMP%]{flex:1 1 30%}.mat-tab-group[_ngcontent-%COMP%]{margin-bottom:25px}.primary-facts-panel[_ngcontent-%COMP%]{display:flex}.primary-facts-panel[_ngcontent-%COMP%]   .left-col[_ngcontent-%COMP%]{flex:0 0 200px;width:200px;margin-right:25px}.primary-facts-panel[_ngcontent-%COMP%]   .right-col[_ngcontent-%COMP%]{flex:1 1 auto}.primary-facts-panel[_ngcontent-%COMP%]   media-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12);border-radius:4px}.primary-facts-panel[_ngcontent-%COMP%]   .submit-button[_ngcontent-%COMP%]{width:100%;margin-top:15px;min-height:45px}no-results-message[_ngcontent-%COMP%]{margin:50px 0 40px}"],changeDetection:0}),Object(r.b)([Object(o.d)(v.loading)],t.prototype,"loading$",void 0),Object(r.b)([Object(o.d)(v.credits)],t.prototype,"credits$",void 0),t})(),data:{permissions:["people.update"]}}];let X=(()=>{class t{}return t.\u0275mod=g.Ob({type:t}),t.\u0275inj=g.Nb({factory:function(e){return new(e||t)},imports:[[i.h.forChild(z)],i.h]}),t})();var E=a("6rvT"),B=a("ZFTr"),T=a("Iysn"),K=a("X3pI"),J=a("1ImS");let q=(()=>{class t{}return t.\u0275mod=g.Ob({type:t}),t.\u0275inj=g.Nb({factory:function(e){return new(e||t)},imports:[[n.c,X,E.a,V.o,V.E,B.a,T.a,K.a,J.a,o.c.forFeature([v]),_.g,W.c,D.b,S.b,R.c]]}),t})()}}]);
//# sourceMappingURL=11-es2015.f9c92d4312724484387a.js.map