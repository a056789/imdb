(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"/5ox":function(t,e,a){"use strict";a.r(e),a.d(e,"CrupdateTitleModule",(function(){return Ie}));var i=a("ofXK"),n=a("tyNb"),s=a("mrSG"),o=a("AcyG"),c=a("cIkh"),r=a("M/Pu"),l=a("2Vo4"),b=a("fXoL"),d=a("Rd8u"),p=a("FBzJ"),u=a("3Pt+"),m=a("h586"),g=a("Lm4C"),h=a("QeDF"),f=a("pLZG"),y=a("IzEk"),v=a("nYR2"),V=a("r2Ys"),x=a("kmQS"),W=a("7tLl"),C=a("i2dy"),D=a("l9qf"),I=a("bTqV"),k=a("Qu3c"),w=a("NFeN"),L=a("ihCf"),O=a("zW5C");function S(t,e){if(1&t&&(b.Wb(0,"option",42),b.Lc(1),b.Vb()),2&t){const t=e.$implicit;b.pc("ngValue",t),b.Db(1),b.Mc(t)}}function P(t,e){if(1&t&&(b.Wb(0,"option",43),b.Lc(1),b.Vb()),2&t){const t=e.$implicit;b.pc("value",t.code),b.Db(1),b.Mc(t.name)}}let E=(()=>{class t{constructor(t,e,a,i,n,s,o,c){this.store=t,this.fb=e,this.route=a,this.uploadQueue=i,this.settings=n,this.router=s,this.titles=o,this.toast=c,this.poster$=new l.a(null),this.form=this.fb.group({name:["",[u.I.required,u.I.minLength(1)]],is_series:[!1,[u.I.required]],language:[""],tagline:["",[u.I.minLength(1),u.I.maxLength(250)]],poster:["",[u.I.minLength(1),u.I.maxLength(250)]],backdrop:["",[u.I.minLength(1),u.I.maxLength(250)]],description:["",[u.I.minLength(1)]],budget:["",u.I.min(1)],revenue:["",u.I.min(1)],runtime:["",[u.I.min(1),u.I.max(300)]],country:["",[u.I.minLength(1),u.I.maxLength(50)]],popularity:[1,[u.I.min(1),u.I.max(100)]],certification:["pg"],release_date:[""],allow_update:[!0]}),this.certificationOptions=this.settings.getJson("browse.ageRatings")}ngOnInit(){this.store.dispatch(new c.q),this.store.select(r.a.title).pipe(Object(f.a)(t=>!!t.id),Object(y.a)(1)).subscribe(t=>{this.form.patchValue(Object.assign(Object.assign({},t),{release_date:t.release_date?t.release_date.split("T")[0]:null})),this.poster$.next(t.poster)}),this.form.get("poster").valueChanges.subscribe(t=>{this.poster$.next(t)})}uploadImage(t){Object(g.a)({types:[h.a.image]}).then(e=>{this.uploadQueue.start(e,{uri:"uploads/images",httpParams:{diskPrefix:`media-images/${t}s`}}).subscribe(e=>{this.form.patchValue({[t]:e.fileEntry.url})})})}submit(){this.store.dispatch(new c.t(!0));const t=this.store.selectSnapshot(r.a.title).id;(t?this.titles.update(t,this.form.value):this.titles.create(this.form.value)).pipe(Object(v.a)(()=>this.store.dispatch(new c.t(!1)))).subscribe(e=>{this.toast.open(t?V.a.TITLE_UPDATE_SUCCESS:V.a.TITLE_CREATE_SUCCESS),this.router.navigate(t?[this.router.url.includes("admin")?"/admin/titles":this.router.url.split("?")[0].replace("/edit","")]:[this.router.url.replace("new",""+e.title.id),"edit"])})}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(o.g),b.Qb(u.h),b.Qb(n.a),b.Qb(m.a),b.Qb(x.a),b.Qb(n.d),b.Qb(W.a),b.Qb(C.b))},t.\u0275cmp=b.Kb({type:t,selectors:[["primary-facts-panel"]],features:[b.Cb([m.a])],decls:88,vars:21,consts:[[3,"formGroup","ngSubmit"],[1,"poster-container"],[3,"src"],[1,"many-inputs"],[1,"input-container"],["for","name","trans",""],["type","text","formControlName","name","id","name","minlength","1","maxlength","250","required",""],[1,"inline-container"],["for","type","trans",""],["formControlName","is_series","id","type","required",""],["trans","",3,"ngValue"],["for","allow_update","trans",""],["formControlName","allow_update","id","allow_update","required",""],["for","poster","trans",""],[1,"input-with-action","action-left"],["type","button","mat-flat-button","","color","accent",3,"matTooltip","click"],["svgIcon","file-upload"],["type","text","formControlName","poster","id","poster","minlength","1","maxlength","250"],["for","backdrop","trans",""],["type","text","formControlName","backdrop","id","backdrop","minlength","1","maxlength","250"],["for","release_date","trans",""],["type","date","formControlName","release_date","id","release_date","placeholder","YYYY-MM-DD","required",""],["for","tagline","trans",""],["type","text","formControlName","tagline","id","tagline","minlength","1","maxlength","250"],["for","description","trans",""],["type","text","formControlName","description","id","description","minlength","1","cdkTextareaAutosize","","cdkAutosizeMinRows","6"],["for","runtime","trans",""],["type","number","formControlName","runtime","id","runtime","min","1","max","500"],[1,"input-container","certification-input-container"],["for","certification","trans",""],["formControlName","certification","id","certification"],[3,"ngValue",4,"ngFor","ngForOf"],["for","budget","trans",""],["type","number","formControlName","budget","id","budget","min","1"],["for","revenue","trans",""],["type","number","formControlName","revenue","id","revenue","min","1"],["for","popularity","trans",""],["type","number","formControlName","popularity","id","popularity","min","1","max","1000"],["for","language","trans",""],["formControlName","language","id","language","required",""],[3,"value",4,"ngFor","ngForOf"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled"],[3,"ngValue"],[3,"value"]],template:function(t,e){1&t&&(b.Wb(0,"form",0),b.dc("ngSubmit",(function(){return e.submit()})),b.Wb(1,"div",1),b.Rb(2,"media-image",2),b.ic(3,"async"),b.Wb(4,"div",3),b.Wb(5,"div",4),b.Wb(6,"label",5),b.Lc(7,"Title"),b.Vb(),b.Rb(8,"input",6),b.Vb(),b.Wb(9,"div",7),b.Wb(10,"div",4),b.Wb(11,"label",8),b.Lc(12,"Type"),b.Vb(),b.Wb(13,"select",9),b.Wb(14,"option",10),b.Lc(15,"Movie"),b.Vb(),b.Wb(16,"option",10),b.Lc(17,"TV Series"),b.Vb(),b.Vb(),b.Vb(),b.Wb(18,"div",4),b.Wb(19,"label",11),b.Lc(20,"Allow Auto Update"),b.Vb(),b.Wb(21,"select",12),b.Wb(22,"option",10),b.Lc(23,"Yes"),b.Vb(),b.Wb(24,"option",10),b.Lc(25,"No"),b.Vb(),b.Vb(),b.Vb(),b.Vb(),b.Wb(26,"div",4),b.Wb(27,"label",13),b.Lc(28,"Poster"),b.Vb(),b.Wb(29,"div",14),b.Wb(30,"button",15),b.dc("click",(function(){return e.uploadImage("poster")})),b.ic(31,"trans"),b.Rb(32,"mat-icon",16),b.Vb(),b.Rb(33,"input",17),b.Vb(),b.Vb(),b.Wb(34,"div",4),b.Wb(35,"label",18),b.Lc(36,"Backdrop"),b.Vb(),b.Wb(37,"div",14),b.Wb(38,"button",15),b.dc("click",(function(){return e.uploadImage("backdrop")})),b.ic(39,"trans"),b.Rb(40,"mat-icon",16),b.Vb(),b.Rb(41,"input",19),b.Vb(),b.Vb(),b.Vb(),b.Vb(),b.Wb(42,"div",7),b.Wb(43,"div",4),b.Wb(44,"label",20),b.Lc(45,"Release Date"),b.Vb(),b.Rb(46,"input",21),b.Vb(),b.Wb(47,"div",4),b.Wb(48,"label",22),b.Lc(49,"Tagline"),b.Vb(),b.Rb(50,"input",23),b.Vb(),b.Vb(),b.Wb(51,"div",4),b.Wb(52,"label",24),b.Lc(53,"Overview"),b.Vb(),b.Rb(54,"textarea",25),b.Vb(),b.Wb(55,"div",7),b.Wb(56,"div",4),b.Wb(57,"label",26),b.Lc(58,"Runtime"),b.Vb(),b.Rb(59,"input",27),b.Vb(),b.Wb(60,"div",28),b.Wb(61,"label",29),b.Lc(62,"Certification"),b.Vb(),b.Wb(63,"select",30),b.Jc(64,S,2,2,"option",31),b.Vb(),b.Vb(),b.Vb(),b.Wb(65,"div",7),b.Wb(66,"div",4),b.Wb(67,"label",32),b.Lc(68,"Budget"),b.Vb(),b.Rb(69,"input",33),b.Vb(),b.Wb(70,"div",4),b.Wb(71,"label",34),b.Lc(72,"Revenue"),b.Vb(),b.Rb(73,"input",35),b.Vb(),b.Vb(),b.Wb(74,"div",7),b.Wb(75,"div",4),b.Wb(76,"label",36),b.Lc(77,"Popularity"),b.Vb(),b.Rb(78,"input",37),b.Vb(),b.Wb(79,"div",4),b.Wb(80,"label",38),b.Lc(81,"Language"),b.Vb(),b.Wb(82,"select",39),b.Jc(83,P,2,2,"option",40),b.ic(84,"async"),b.Vb(),b.Vb(),b.Vb(),b.Wb(85,"button",41),b.ic(86,"async"),b.Lc(87,"Save"),b.Vb(),b.Vb()),2&t&&(b.pc("formGroup",e.form),b.Db(2),b.pc("src",b.jc(3,11,e.poster$)),b.Db(12),b.pc("ngValue",!1),b.Db(2),b.pc("ngValue",!0),b.Db(6),b.pc("ngValue",!0),b.Db(2),b.pc("ngValue",!1),b.Db(6),b.pc("matTooltip",b.jc(31,13,"Upload poster")),b.Db(8),b.pc("matTooltip",b.jc(39,15,"Upload backdrop")),b.Db(26),b.pc("ngForOf",e.certificationOptions),b.Db(19),b.pc("ngForOf",b.jc(84,17,e.languageOptions$)),b.Db(2),b.pc("disabled",b.jc(86,19,e.loading$)))},directives:[u.K,u.v,u.m,D.a,d.a,u.d,u.u,u.k,u.q,u.p,u.F,u.G,u.z,u.J,I.b,k.a,w.a,L.b,u.A,i.s],pipes:[i.b,O.a],styles:["primary-facts-panel{display:block}primary-facts-panel .poster-container{display:flex;margin-bottom:20px}primary-facts-panel .poster-container media-image img{height:350px;width:auto;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12);border-radius:4px}primary-facts-panel .poster-container .many-inputs{margin-left:20px;flex:1 1 auto}primary-facts-panel .poster-container .many-inputs .input-container:last-of-type{margin-bottom:0}primary-facts-panel .certification-input-container option,primary-facts-panel .certification-input-container select{text-transform:uppercase}"],encapsulation:2,changeDetection:0}),Object(s.b)([Object(o.d)(r.a.title)],t.prototype,"title$",void 0),Object(s.b)([Object(o.d)(r.a.loading)],t.prototype,"loading$",void 0),Object(s.b)([Object(o.d)(r.a.languageOptions)],t.prototype,"languageOptions$",void 0),t})();var T=a("/RwR"),_=a("QGXG"),R=a("7EHt"),j=a("wZkO"),$=a("0IaG"),M=a("Sx+n"),N=a("JX91"),J=a("lJxs"),A=a("0Ej5"),F=a("VaGr"),Q=a("/1cH"),U=a("FKr1");function z(t,e){1&t&&(b.Wb(0,"h2",11),b.Lc(1,"Edit"),b.Vb())}function q(t,e){1&t&&(b.Wb(0,"h2",11),b.Lc(1,"Create"),b.Vb())}function G(t,e){if(1&t&&(b.Wb(0,"div",12),b.Wb(1,"label",13),b.Lc(2,"Person"),b.Vb(),b.Rb(3,"input",14),b.Vb()),2&t){const t=b.hc();b.Db(3),b.pc("value",null==t.credit?null:t.credit.name)}}function H(t,e){if(1&t){const t=b.Xb();b.Wb(0,"search-input",15),b.dc("resultSelected",(function(e){return b.Ac(t),b.hc().setCredit(e)})),b.Vb()}if(2&t){const t=b.hc();b.pc("type",t.getPersonType())("resetInputOnSelect",!1)}}function X(t,e){1&t&&(b.Wb(0,"div",12),b.Wb(1,"label",16),b.Lc(2,"Character"),b.Vb(),b.Rb(3,"input",17),b.Vb())}function B(t,e){if(1&t&&(b.Wb(0,"mat-option",25),b.Wb(1,"div",26),b.Wb(2,"span",27),b.Lc(3,"Job"),b.Vb(),b.Lc(4),b.Vb(),b.Wb(5,"div",28),b.Wb(6,"span",27),b.Lc(7,"Department"),b.Vb(),b.Lc(8),b.Vb(),b.Vb()),2&t){const t=e.$implicit;b.pc("value",t.job),b.Db(4),b.Nc(": ",t.job,""),b.Db(4),b.Nc(": ",t.department,"")}}function K(t,e){if(1&t){const t=b.Xb();b.Ub(0),b.Wb(1,"div",12),b.Wb(2,"label",18),b.Lc(3,"Job"),b.Vb(),b.Rb(4,"input",19),b.Vb(),b.Wb(5,"mat-autocomplete",20,21),b.dc("optionSelected",(function(e){return b.Ac(t),b.hc().jobSelected(e)})),b.Jc(7,B,9,3,"mat-option",22),b.ic(8,"async"),b.Vb(),b.Wb(9,"div",12),b.Wb(10,"label",23),b.Lc(11,"Department"),b.Vb(),b.Rb(12,"input",24),b.Vb(),b.Tb()}if(2&t){const t=b.xc(6),e=b.hc();b.Db(4),b.pc("matAutocomplete",t),b.Db(3),b.pc("ngForOf",b.jc(8,2,e.filteredJobs))}}let Y=(()=>{class t{constructor(t,e,a,i,n,s,o){this.store=t,this.toast=e,this.fb=a,this.actions$=i,this.dialogRef=n,this.valueLists=s,this.data=o,this.form=this.fb.group({character:[""],department:[""],job:[""]}),this.availableJobs=[],this.data.credit&&(this.credit=this.data.credit,this.form.patchValue(this.data.credit.pivot))}ngOnInit(){this.valueLists.get(["tmdbJobs"]).subscribe(t=>{this.availableJobs=[],t.tmdbJobs.forEach(t=>{const e=t.jobs.map(e=>({job:e,department:t.department}));this.availableJobs=[...this.availableJobs,...e]}),this.filteredJobs=this.form.get("job").valueChanges.pipe(Object(N.a)(""),Object(J.a)(t=>this.availableJobs.filter(e=>!(t=t.toLowerCase())||e.job.toLowerCase().includes(t)||e.department.toLowerCase().includes(t)).slice(0,10)))})}confirm(){var t;const e=this.data.credit?new c.u(this.credit.pivot.id,this.getPayload()):new c.a(null===(t=this.credit)||void 0===t?void 0:t.id,this.data.mediaItem,this.getPayload());this.store.dispatch(e).subscribe(()=>{this.close(),this.toast.open(this.data.credit?V.a.CREDIT_UPDATE_SUCCESS:V.a.CREDIT_ADD_SUCCESS)},t=>{this.toast.open(t.message)})}close(){this.dialogRef.close()}setCredit(t){this.credit=t}getPayload(){const t=this.form.value;return"cast"===this.data.type&&(t.department="cast",t.job="cast"),t}getPersonType(){return M.a.PERSON}jobSelected(t){const e=this.availableJobs.find(e=>e.job===t.option.value);this.form.patchValue({job:e.job,department:e.department})}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(o.g),b.Qb(C.b),b.Qb(u.h),b.Qb(o.b),b.Qb($.h),b.Qb(A.a),b.Qb($.a))},t.\u0275cmp=b.Kb({type:t,selectors:[["crupdate-credit-modal"]],decls:17,vars:10,consts:[[1,"modal-header"],["class","modal-title","mat-dialog-title","","trans","",4,"ngIf"],["type","button",1,"close-button","no-style","icon-button",3,"click"],["svgIcon","close"],["autocomplete","off","ngNativeValidate","",3,"formGroup","ngSubmit"],[1,"many-inputs"],["class","input-container",4,"ngIf"],["placeholder","Search for a person...","label","Person","searchProvider","local",3,"type","resetInputOnSelect","resultSelected",4,"ngIf"],[4,"ngIf"],["type","button","mat-button","","trans","",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled"],["mat-dialog-title","","trans","",1,"modal-title"],[1,"input-container"],["for","name","trans",""],["type","text","id","name","disabled","",3,"value"],["placeholder","Search for a person...","label","Person","searchProvider","local",3,"type","resetInputOnSelect","resultSelected"],["for","character","trans",""],["type","text","id","character","formControlName","character","required",""],["for","job","trans",""],["type","text","id","job","formControlName","job","required","",3,"matAutocomplete"],[3,"optionSelected"],["auto","matAutocomplete"],["class","multiline-mat-menu-item",3,"value",4,"ngFor","ngForOf"],["for","department","trans",""],["type","text","id","department","formControlName","department","required",""],[1,"multiline-mat-menu-item",3,"value"],[1,"title"],["trans",""],[1,"description"]],template:function(t,e){1&t&&(b.Wb(0,"div",0),b.Jc(1,z,2,0,"h2",1),b.Jc(2,q,2,0,"h2",1),b.Wb(3,"button",2),b.dc("click",(function(){return e.close()})),b.Rb(4,"mat-icon",3),b.Vb(),b.Vb(),b.Wb(5,"form",4),b.dc("ngSubmit",(function(){return e.confirm()})),b.Wb(6,"mat-dialog-content",5),b.Jc(7,G,4,1,"div",6),b.Jc(8,H,1,2,"search-input",7),b.Jc(9,X,4,0,"div",6),b.Jc(10,K,13,4,"ng-container",8),b.Vb(),b.Wb(11,"mat-dialog-actions"),b.Wb(12,"button",9),b.dc("click",(function(){return e.close()})),b.Lc(13,"Cancel"),b.Vb(),b.Wb(14,"button",10),b.ic(15,"async"),b.Lc(16,"Save"),b.Vb(),b.Vb(),b.Vb()),2&t&&(b.Db(1),b.pc("ngIf",e.data.credit),b.Db(1),b.pc("ngIf",!e.data.credit),b.Db(3),b.pc("formGroup",e.form),b.Db(2),b.pc("ngIf",e.data.credit),b.Db(1),b.pc("ngIf",!e.data.credit),b.Db(1),b.pc("ngIf","cast"===e.data.type),b.Db(1),b.pc("ngIf","crew"===e.data.type),b.Db(4),b.pc("disabled",b.jc(15,8,e.loading$)))},directives:[i.t,w.a,u.v,u.m,$.f,$.c,I.b,d.a,$.i,F.a,u.d,u.u,u.k,u.F,Q.c,Q.a,i.s,U.l],pipes:[i.b],styles:["crupdate-credit-modal{display:block;width:400px;max-width:100%}crupdate-credit-modal search-input input{border-color:var(--be-divider-default);margin-bottom:20px}"],encapsulation:2,changeDetection:0}),Object(s.b)([Object(o.d)(r.a.loading)],t.prototype,"loading$",void 0),t})();var Z=a("2hX1"),tt=a("EAOp"),et=a("5+WD"),at=a("Um6Z"),it=a("CH4Q");function nt(t,e){1&t&&(b.Wb(0,"th",8),b.Lc(1,"Character"),b.Vb())}function st(t,e){1&t&&(b.Wb(0,"th",9),b.Lc(1,"Department"),b.Vb())}function ot(t,e){1&t&&(b.Wb(0,"th",10),b.Lc(1,"Job"),b.Vb())}function ct(t,e){1&t&&(b.Wb(0,"button",21),b.Rb(1,"mat-icon",22),b.Vb())}function rt(t,e){if(1&t&&(b.Wb(0,"div"),b.Lc(1),b.Vb()),2&t){const t=b.hc().$implicit;b.Db(1),b.Mc(t.name)}}function lt(t,e){if(1&t&&(b.Wb(0,"td"),b.Lc(1),b.Vb()),2&t){const t=b.hc().$implicit;b.Db(1),b.Mc(t.pivot.character)}}function bt(t,e){if(1&t&&(b.Wb(0,"td"),b.Lc(1),b.Vb()),2&t){const t=b.hc().$implicit;b.Db(1),b.Mc(t.pivot.department)}}function dt(t,e){if(1&t&&(b.Wb(0,"td"),b.Lc(1),b.Vb()),2&t){const t=b.hc().$implicit;b.Db(1),b.Mc(t.pivot.job)}}function pt(t,e){if(1&t){const t=b.Xb();b.Wb(0,"tr",11),b.Wb(1,"td"),b.Wb(2,"div",12),b.Jc(3,ct,2,0,"button",13),b.Rb(4,"media-image",14),b.Wb(5,"span"),b.Lc(6),b.Vb(),b.Vb(),b.Jc(7,rt,2,1,"div",15),b.Vb(),b.Jc(8,lt,2,1,"td",16),b.Jc(9,bt,2,1,"td",16),b.Jc(10,dt,2,1,"td",16),b.Wb(11,"td",17),b.Wb(12,"button",18),b.dc("click",(function(){b.Ac(t);const a=e.$implicit;return b.hc().openCrupdateCreditModal(a)})),b.Rb(13,"mat-icon",19),b.Vb(),b.Wb(14,"button",18),b.dc("click",(function(){b.Ac(t);const a=e.$implicit;return b.hc().detachCredit(a)})),b.Rb(15,"mat-icon",20),b.Vb(),b.Vb(),b.Vb()}if(2&t){const t=e.$implicit,a=b.hc();b.Db(3),b.pc("ngIf","cast"===a.type),b.Db(1),b.pc("src",t.poster),b.Db(2),b.Mc(t.name),b.Db(2),b.pc("ngIf","cast"===a.type),b.Db(1),b.pc("ngIf","crew"===a.type),b.Db(1),b.pc("ngIf","crew"===a.type)}}function ut(t,e){1&t&&(b.Wb(0,"no-results-message",23),b.Wb(1,"span",24),b.Lc(2,"Nothing to Display."),b.Vb(),b.Vb())}let mt=(()=>{class t{constructor(t,e,a,i){this.dialog=t,this.store=e,this.toast=a,this.datatable=i}ngOnInit(){this.datatable.init()}ngOnChanges(t){t.mediaItem&&t.mediaItem.currentValue&&(this.datatable.data="cast"===this.type?this.getCast(this.mediaItem.credits):this.getCrew(this.mediaItem.credits))}ngOnDestroy(){this.datatable.destroy()}openCrupdateCreditModal(t){this.dialog.open(Y,{credit:t,type:this.type,mediaItem:this.mediaItem})}detachCredit(t){this.dialog.open(T.a,{title:"Remove Credit",body:"Are you sure you want to remove this credit?",ok:"Remove"}).afterClosed().subscribe(e=>{e&&this.store.dispatch(new c.r(this.mediaItem,t)).subscribe(()=>{this.toast.open(V.a.CREDIT_REMOVE_SUCCESS)})})}changeCreditsOrder(t){this.store.selectSnapshot(r.a.loading)||this.store.dispatch(new c.e(this.mediaItem,t.previousIndex,t.currentIndex,this.type))}getCast(t){return t?t.filter(t=>"cast"===t.pivot.department):[]}getCrew(t){return t?t.filter(t=>"cast"!==t.pivot.department):[]}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(_.a),b.Qb(o.g),b.Qb(C.b),b.Qb(Z.a))},t.\u0275cmp=b.Kb({type:t,selectors:[["credits-panel"]],inputs:{mediaItem:"mediaItem",type:"type"},features:[b.Cb([Z.a]),b.Bb],decls:17,vars:10,consts:[["type","button","mat-raised-button","","color","accent","leftContent","","trans","",3,"click"],["cdkDropList","",1,"material-table",3,"cdkDropListDisabled","cdkDropListDropped"],["table-sort-header","","trans",""],["table-sort-header","pivot.character","trans","",4,"ngIf"],["table-sort-header","pivot.department","trans","",4,"ngIf"],["table-sort-header","pivot.job","trans","",4,"ngIf"],["cdkDrag","",4,"ngFor","ngForOf"],["svgImage","awards.svg",4,"ngIf"],["table-sort-header","pivot.character","trans",""],["table-sort-header","pivot.department","trans",""],["table-sort-header","pivot.job","trans",""],["cdkDrag",""],[1,"column-with-image"],["type","button","mat-icon-button","","cdkDragHandle","",4,"ngIf"],["size","small",3,"src"],[4,"cdkDragPreview"],[4,"ngIf"],[1,"edit-column"],["type","button","mat-icon-button","",3,"click"],["svgIcon","edit"],["svgIcon","close"],["type","button","mat-icon-button","","cdkDragHandle",""],["svgIcon","drag-handle"],["svgImage","awards.svg"],["primary-text","","trans",""]],template:function(t,e){1&t&&(b.Wb(0,"datatable-header"),b.Wb(1,"button",0),b.dc("click",(function(){return e.openCrupdateCreditModal()})),b.Lc(2,"Add Credit"),b.Vb(),b.Vb(),b.Wb(3,"table",1),b.dc("cdkDropListDropped",(function(t){return e.changeCreditsOrder(t)})),b.Wb(4,"thead"),b.Wb(5,"tr"),b.Wb(6,"th",2),b.Lc(7,"Name"),b.Vb(),b.Jc(8,nt,2,0,"th",3),b.Jc(9,st,2,0,"th",4),b.Jc(10,ot,2,0,"th",5),b.Rb(11,"th"),b.Vb(),b.Vb(),b.Wb(12,"tbody"),b.Jc(13,pt,16,6,"tr",6),b.ic(14,"async"),b.Vb(),b.Vb(),b.Jc(15,ut,3,0,"no-results-message",7),b.ic(16,"async")),2&t&&(b.Db(3),b.pc("cdkDropListDisabled","crew"===e.type),b.Db(5),b.pc("ngIf","cast"===e.type),b.Db(1),b.pc("ngIf","crew"===e.type),b.Db(1),b.pc("ngIf","crew"===e.type),b.Db(3),b.pc("ngForOf",b.jc(14,6,e.datatable.data$)),b.Db(2),b.pc("ngIf",!b.jc(16,8,e.datatable.data$).length))},directives:[tt.a,I.b,d.a,et.d,at.a,i.t,i.s,et.a,D.a,et.c,w.a,et.b,it.a],pipes:[i.b],styles:["[_nghost-%COMP%]{display:block;padding:0}.cdk-drag-handle[_ngcontent-%COMP%]{cursor:move;margin-right:10px}.cdk-drag-preview[_ngcontent-%COMP%]{padding:15px;font-size:1.5rem;border-radius:4px;background-color:var(--be-background);box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{background-color:var(--be-hover)}.cdk-drag-animating[_ngcontent-%COMP%], .cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"],changeDetection:0}),t})();function gt(t,e){1&t&&(b.Wb(0,"h2",30),b.Lc(1,"Edit Episode"),b.Vb())}function ht(t,e){1&t&&(b.Wb(0,"h2",30),b.Lc(1,"Create Episode"),b.Vb())}function ft(t,e){if(1&t&&(b.Wb(0,"div",31),b.Lc(1),b.Vb()),2&t){const t=e.ngIf;b.Db(1),b.Mc(t)}}let yt=(()=>{class t{constructor(t,e,a,i,n,s){this.store=t,this.toast=e,this.fb=a,this.uploadQueue=i,this.dialogRef=n,this.data=s,this.episode$=new l.a(null),this.errors$=new l.a({}),this.episodeForm=this.fb.group({name:["",[u.I.required,u.I.minLength(1)]],poster:["",[u.I.minLength(1),u.I.maxLength(250)]],description:["",[u.I.minLength(1)]],popularity:[50,[u.I.min(1),u.I.max(1e3)]],release_date:[""],episode_number:[""]})}ngOnInit(){this.data.episode?(this.bindToStoreEpisode(),this.episodeForm.patchValue(Object.assign(Object.assign({},this.episode$.value),{release_date:this.episode$.value.release_date.split(" ")[0]})),setTimeout(()=>this.loadEpisodeCredits())):this.episodeForm.patchValue({episode_number:this.data.season?this.data.season.episode_count+1:1})}confirm(){this.data.episode?this.updateEpisode():this.createEpisode()}close(){this.dialogRef.close()}createEpisode(){this.store.dispatch(new c.h(this.data.season,this.episodeForm.value)).subscribe(()=>{this.errors$.next({}),this.toast.open(V.a.EPISODE_CREATE_SUCCESS);const t=this.store.selectSnapshot(r.a.seasons).find(t=>t.id===this.data.season.id).episodes;this.data.episode=t[t.length-1]},t=>this.errors$.next(t.errors))}updateEpisode(){this.store.dispatch(new c.v(this.data.episode,this.episodeForm.value)).subscribe(()=>{this.errors$.next({}),this.toast.open(V.a.EPISODE_UPDATE_SUCCESS),this.close()},t=>this.errors$.next(t.errors))}uploadPoster(){Object(g.a)({types:[h.a.image]}).then(t=>{this.uploadQueue.start(t,{uri:"uploads/images",httpParams:{diskPrefix:"media-images/posters"}}).subscribe(t=>{this.episodeForm.patchValue({poster:t.fileEntry.url})})})}bindToStoreEpisode(){this.store.select(r.a.title).subscribe(t=>{if(t.seasons){const e=t.seasons.find(t=>t.number===this.data.episode.season_number).episodes.find(t=>t.episode_number===this.data.episode.episode_number);this.episode$.next(Object.assign({},e))}})}loadEpisodeCredits(){this.data.episode.credits||this.store.dispatch(new c.p(this.episode$.value)).toPromise()}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(o.g),b.Qb(C.b),b.Qb(u.h),b.Qb(m.a),b.Qb($.h),b.Qb($.a))},t.\u0275cmp=b.Kb({type:t,selectors:[["crupdate-episode-modal"]],features:[b.Cb([m.a])],decls:55,vars:30,consts:[[1,"modal-header"],["class","modal-title","mat-dialog-title","","trans","",4,"ngIf"],["type","button",1,"close-button","no-style","icon-button",3,"click"],["svgIcon","close"],["autocomplete","off","ngNativeValidate","",3,"formGroup","ngSubmit"],["animationDuration","0ms","color","accent",3,"dynamicHeight"],[3,"label"],[1,"many-inputs","primary-facts-panel"],[1,"input-container"],["for","name","trans",""],["type","text","formControlName","name","id","name","minlength","1","maxlength","250","required",""],["for","episode_number","trans",""],["type","number","formControlName","episode_number","id","episode_number","min","1","required",""],["class","error",4,"ngIf"],["for","poster","trans",""],[1,"input-with-action","action-left"],["type","button","mat-flat-button","","color","accent",3,"matTooltip","click"],["svgIcon","file-upload"],["type","text","formControlName","poster","id","poster","minlength","1","maxlength","250"],["for","release_date","trans",""],["type","date","formControlName","release_date","id","release_date","required",""],["for","description","trans",""],["type","text","formControlName","description","id","description","minlength","1","cdkTextareaAutosize","","cdkAutosizeMinRows","6"],["for","popularity","trans",""],["type","number","formControlName","popularity","id","popularity","min","1","max","1000"],[3,"label","disabled"],["type","cast",3,"mediaItem"],["type","crew",3,"mediaItem"],["type","button","mat-button","","trans","",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled"],["mat-dialog-title","","trans","",1,"modal-title"],[1,"error"]],template:function(t,e){1&t&&(b.Wb(0,"div",0),b.Jc(1,gt,2,0,"h2",1),b.Jc(2,ht,2,0,"h2",1),b.Wb(3,"button",2),b.dc("click",(function(){return e.close()})),b.Rb(4,"mat-icon",3),b.Vb(),b.Vb(),b.Wb(5,"form",4),b.dc("ngSubmit",(function(){return e.confirm()})),b.Wb(6,"mat-dialog-content"),b.Wb(7,"mat-tab-group",5),b.Wb(8,"mat-tab",6),b.ic(9,"trans"),b.Wb(10,"div",7),b.Wb(11,"div",8),b.Wb(12,"label",9),b.Lc(13,"Title"),b.Vb(),b.Rb(14,"input",10),b.Vb(),b.Wb(15,"div",8),b.Wb(16,"label",11),b.Lc(17,"Number"),b.Vb(),b.Rb(18,"input",12),b.Jc(19,ft,2,1,"div",13),b.ic(20,"async"),b.Vb(),b.Wb(21,"div",8),b.Wb(22,"label",14),b.Lc(23,"Poster"),b.Vb(),b.Wb(24,"div",15),b.Wb(25,"button",16),b.dc("click",(function(){return e.uploadPoster()})),b.ic(26,"trans"),b.Rb(27,"mat-icon",17),b.Vb(),b.Rb(28,"input",18),b.Vb(),b.Vb(),b.Wb(29,"div",8),b.Wb(30,"label",19),b.Lc(31,"Release Date"),b.Vb(),b.Rb(32,"input",20),b.Vb(),b.Wb(33,"div",8),b.Wb(34,"label",21),b.Lc(35,"Overview"),b.Vb(),b.Rb(36,"textarea",22),b.Vb(),b.Wb(37,"div",8),b.Wb(38,"label",23),b.Lc(39,"Popularity"),b.Vb(),b.Rb(40,"input",24),b.Vb(),b.Vb(),b.Vb(),b.Wb(41,"mat-tab",25),b.ic(42,"trans"),b.Rb(43,"credits-panel",26),b.ic(44,"async"),b.Vb(),b.Wb(45,"mat-tab",25),b.ic(46,"trans"),b.Rb(47,"credits-panel",27),b.ic(48,"async"),b.Vb(),b.Vb(),b.Vb(),b.Wb(49,"mat-dialog-actions"),b.Wb(50,"button",28),b.dc("click",(function(){return e.close()})),b.Lc(51,"Cancel"),b.Vb(),b.Wb(52,"button",29),b.ic(53,"async"),b.Lc(54,"Save"),b.Vb(),b.Vb(),b.Vb()),2&t&&(b.Db(1),b.pc("ngIf",e.data.episode),b.Db(1),b.pc("ngIf",!e.data.episode),b.Db(3),b.pc("formGroup",e.episodeForm),b.Db(2),b.pc("dynamicHeight",!0),b.Db(1),b.pc("label",b.jc(9,14,"Primary Facts")),b.Db(11),b.pc("ngIf",b.jc(20,16,e.errors$).episode_number),b.Db(6),b.pc("matTooltip",b.jc(26,18,"Upload poster")),b.Db(16),b.pc("label",b.jc(42,20,"Cast"))("disabled",!e.data.episode),b.Db(2),b.pc("mediaItem",b.jc(44,22,e.episode$)),b.Db(2),b.pc("label",b.jc(46,24,"Crew"))("disabled",!e.data.episode),b.Db(2),b.pc("mediaItem",b.jc(48,26,e.episode$)),b.Db(5),b.pc("disabled",b.jc(53,28,e.loading$)))},directives:[i.t,w.a,u.v,u.m,$.f,j.c,j.a,d.a,u.d,u.u,u.k,u.q,u.p,u.F,u.A,I.b,k.a,L.b,mt,$.c,$.i],pipes:[O.a,i.b],styles:["[_nghost-%COMP%]{display:block;width:750px;max-width:100%}label[_ngcontent-%COMP%]{text-transform:capitalize}.primary-facts-panel[_ngcontent-%COMP%], credits-panel[_ngcontent-%COMP%]{padding:20px 0}"],changeDetection:0}),Object(s.b)([Object(o.d)(r.a.loading)],t.prototype,"loading$",void 0),t})();var vt=a("iB19");function Vt(t,e){if(1&t){const t=b.Xb();b.Wb(0,"tr"),b.Wb(1,"td"),b.Wb(2,"div",7),b.Rb(3,"media-image",8),b.Wb(4,"span"),b.Lc(5),b.Vb(),b.Vb(),b.Vb(),b.Wb(6,"td"),b.Lc(7),b.Vb(),b.Wb(8,"td"),b.Lc(9),b.ic(10,"formattedDate"),b.Vb(),b.Wb(11,"td",9),b.Wb(12,"button",10),b.dc("click",(function(){b.Ac(t);const a=e.$implicit;return b.hc().openCrupdateEpisodeModal(a)})),b.Rb(13,"mat-icon",11),b.Vb(),b.Wb(14,"button",10),b.dc("click",(function(){b.Ac(t);const a=e.$implicit;return b.hc().deleteEpisode(a)})),b.Rb(15,"mat-icon",12),b.Vb(),b.Vb(),b.Vb()}if(2&t){const t=e.$implicit;b.Db(3),b.pc("src",t.poster)("alt",t.name),b.Db(2),b.Mc(t.name),b.Db(2),b.Mc(t.episode_number),b.Db(2),b.Mc(b.jc(10,5,t.release_date))}}function xt(t,e){1&t&&(b.Wb(0,"no-results-message"),b.Wb(1,"span",13),b.Lc(2,"Nothing to Display."),b.Vb(),b.Wb(3,"span",14),b.Lc(4,"This season does not have any episodes yet."),b.Vb(),b.Vb())}let Wt=(()=>{class t{constructor(t,e,a,i,n){this.store=t,this.dialog=e,this.toast=a,this.route=i,this.datatable=n,this.trackByFn=(t,e)=>e.id}ngOnInit(){this.datatable.init()}ngAfterViewInit(){const t=+this.route.snapshot.params.episodeNumber;if(t){const e=this.season.episodes.find(e=>e.episode_number===t);e&&this.openCrupdateEpisodeModal(e)}}ngOnChanges(t){t.season.currentValue&&t.season.currentValue.episodes&&(this.datatable.data=this.season.episodes)}ngOnDestroy(){this.datatable.destroy()}deleteEpisode(t){this.dialog.open(T.a,{title:"Delete Episode",body:"Are you sure you want to delete this episode?",ok:"Delete"}).afterClosed().subscribe(e=>{e&&this.store.dispatch(new c.j(t)).subscribe(()=>{this.toast.open(V.a.EPISODE_DELETE_SUCCESS)})})}openCrupdateEpisodeModal(t){this.dialog.open(yt,{episode:t,season:this.season},{panelClass:"crupdate-episode-modal-container"})}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(o.g),b.Qb(_.a),b.Qb(C.b),b.Qb(n.a),b.Qb(Z.a))},t.\u0275cmp=b.Kb({type:t,selectors:[["episodes-panel"]],inputs:{season:"season"},features:[b.Cb([Z.a]),b.Bb],decls:19,vars:7,consts:[["pluralResourceName","episodes"],["leftContent",""],["mat-raised-button","","color","accent","trans","",3,"click"],[1,"material-table"],["table-sort-header","","trans",""],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"column-with-image"],["size","small",3,"src","alt"],[1,"edit-column"],["type","button","mat-icon-button","",3,"click"],["svgIcon","edit"],["svgIcon","close"],["primary-text","","trans",""],["secondary-text","","trans",""]],template:function(t,e){1&t&&(b.Wb(0,"datatable-header",0),b.Ub(1,1),b.Wb(2,"button",2),b.dc("click",(function(){return e.openCrupdateEpisodeModal()})),b.Lc(3,"Add Episode"),b.Vb(),b.Tb(),b.Vb(),b.Wb(4,"table",3),b.Wb(5,"thead"),b.Wb(6,"tr"),b.Wb(7,"th",4),b.Lc(8,"Name"),b.Vb(),b.Wb(9,"th",4),b.Lc(10,"Number"),b.Vb(),b.Wb(11,"th",4),b.Lc(12,"Release Date"),b.Vb(),b.Rb(13,"th"),b.Vb(),b.Vb(),b.Wb(14,"tbody"),b.Jc(15,Vt,16,7,"tr",5),b.ic(16,"async"),b.Vb(),b.Vb(),b.Jc(17,xt,5,0,"no-results-message",6),b.ic(18,"async")),2&t&&(b.Db(15),b.pc("ngForOf",b.jc(16,3,e.datatable.data$))("ngForTrackBy",e.trackByFn),b.Db(2),b.pc("ngIf",!b.jc(18,5,e.datatable.data$).length))},directives:[tt.a,I.b,d.a,at.a,i.s,i.t,D.a,w.a,it.a],pipes:[i.b,vt.a],styles:["episodes-panel{display:block}episodes-panel .table-header{display:flex;align-items:center;margin-bottom:15px}episodes-panel .table-header .input-container{max-width:300px;margin-left:auto;position:relative}episodes-panel .table-header .input-container .mat-icon{position:absolute;top:11px;right:8px}episodes-panel no-results-message{margin-top:50px}"],encapsulation:2,changeDetection:0}),t})();function Ct(t,e){if(1&t&&(b.Wb(0,"mat-tab-group",8),b.Wb(1,"mat-tab",9),b.ic(2,"trans"),b.Rb(3,"episodes-panel",10),b.Vb(),b.Wb(4,"mat-tab",9),b.ic(5,"trans"),b.Rb(6,"credits-panel",11),b.Vb(),b.Wb(7,"mat-tab",9),b.ic(8,"trans"),b.Rb(9,"credits-panel",12),b.Vb(),b.Vb()),2&t){const t=b.hc().$implicit;b.Db(1),b.pc("label",b.jc(2,6,"Episodes")),b.Db(2),b.pc("season",t),b.Db(1),b.pc("label",b.jc(5,8,"Regular Cast")),b.Db(2),b.pc("mediaItem",t),b.Db(1),b.pc("label",b.jc(8,10,"Regular Crew")),b.Db(2),b.pc("mediaItem",t)}}function Dt(t,e){if(1&t){const t=b.Xb();b.Wb(0,"mat-expansion-panel",4),b.ic(1,"async"),b.Wb(2,"mat-expansion-panel-header"),b.Wb(3,"mat-panel-title"),b.Wb(4,"span",5),b.Lc(5,"Season"),b.Vb(),b.Lc(6," \xa0 "),b.Wb(7,"span"),b.Lc(8),b.Vb(),b.Vb(),b.Vb(),b.Jc(9,Ct,10,12,"ng-template",6),b.Wb(10,"mat-action-row"),b.Wb(11,"button",7),b.dc("click",(function(){b.Ac(t);const a=e.$implicit;return b.hc(2).maybeDeleteSeason(a)})),b.Lc(12,"Delete"),b.Vb(),b.Vb(),b.Vb()}if(2&t){const t=e.$implicit,a=b.hc(2);b.pc("expanded",b.jc(1,3,a.activeSeason$)===t.number)("ngClass","season-"+t.number+"-panel"),b.Db(8),b.Mc(t.number)}}function It(t,e){1&t&&(b.Wb(0,"no-results-message"),b.Wb(1,"span",13),b.Lc(2,"Nothing to Display."),b.Vb(),b.Wb(3,"span",14),b.Lc(4,"This series does not have any seasons yet."),b.Vb(),b.Vb())}function kt(t,e){if(1&t){const t=b.Xb();b.Ub(0),b.Wb(1,"div",1),b.Wb(2,"button",2),b.dc("click",(function(){return b.Ac(t),b.hc().addSeason()})),b.ic(3,"async"),b.Lc(4,"Add Season"),b.Vb(),b.Vb(),b.Wb(5,"mat-accordion"),b.Jc(6,Dt,13,5,"mat-expansion-panel",3),b.Vb(),b.Jc(7,It,5,0,"no-results-message",0),b.Tb()}if(2&t){const t=e.ngIf,a=b.hc();b.Db(2),b.pc("disabled",b.jc(3,4,a.loading$)),b.Db(4),b.pc("ngForOf",t)("ngForTrackBy",a.trackByFn),b.Db(1),b.pc("ngIf",!t.length)}}let wt=(()=>{class t{constructor(t,e,a,i,n){this.store=t,this.modal=e,this.toast=a,this.route=i,this.el=n,this.activeSeason$=new l.a(1)}ngOnInit(){this.activeSeason$.next(+this.route.snapshot.params.seasonNumber||1)}ngAfterViewInit(){setTimeout(()=>{var t;this.activeSeason$.value>1&&(null===(t=this.el.nativeElement.querySelector(`.season-${this.activeSeason$.value}-panel`))||void 0===t||t.scrollIntoView({behavior:"smooth",block:"start",inline:"start"}))})}addSeason(){this.store.dispatch(new c.i).subscribe(()=>{this.toast.open(V.a.SEASON_CREATE_SUCCESS)})}maybeDeleteSeason(t){this.modal.open(T.a,{title:"Delete Season",body:"Are you sure you want to delete this season?",bodyBold:"This will also delete all episodes attached to this season.",ok:"Delete"}).afterClosed().subscribe(e=>{e&&this.store.dispatch(new c.l(t)).subscribe(()=>{this.toast.open(V.a.SEASON_DELETE_SUCCESS)})})}trackByFn(t,e){return e.id}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(o.g),b.Qb(_.a),b.Qb(C.b),b.Qb(n.a),b.Qb(b.m))},t.\u0275cmp=b.Kb({type:t,selectors:[["seasons-panel"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"header"],["type","button","mat-raised-button","","color","accent",3,"disabled","click"],["class","mat-elevation-z0",3,"expanded","ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"mat-elevation-z0",3,"expanded","ngClass"],["trans",""],["matExpansionPanelContent",""],["type","button","mat-button","","trans","",3,"click"],["animationDuration","0ms","color","accent"],[3,"label"],[3,"season"],["type","cast",3,"mediaItem"],["type","crew",3,"mediaItem"],["primary-text","","trans",""],["secondary-text","","trans",""]],template:function(t,e){1&t&&(b.Jc(0,kt,8,6,"ng-container",0),b.ic(1,"async")),2&t&&b.pc("ngIf",b.jc(1,1,e.seasons$))},directives:[i.t,I.b,R.a,i.s,R.c,i.q,R.f,R.g,d.a,R.e,R.d,j.c,j.a,Wt,mt,it.a],pipes:[i.b,O.a],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     datatable-header{height:auto}.header[_ngcontent-%COMP%]{margin-bottom:20px}.mat-expansion-panel[_ngcontent-%COMP%]{border:1px solid var(--be-divider-default);border-radius:4px;margin-bottom:10px}.mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%]{font-weight:500;font-size:1.5rem}"],changeDetection:0}),Object(s.b)([Object(o.d)(r.a.seasons)],t.prototype,"seasons$",void 0),Object(s.b)([Object(o.d)(r.a.loading)],t.prototype,"loading$",void 0),t})();var Lt=a("35We"),Ot=a("vxfF");function St(t,e){if(1&t){const t=b.Xb();b.Wb(0,"div",4),b.dc("cdkDropListDropped",(function(){return b.Ac(t),b.hc().dropListDropped()})),b.Wb(1,"media-image",7),b.dc("cdkDragMoved",(function(e){return b.Ac(t),b.hc().dragMoved(e)})),b.Wb(2,"button",8),b.dc("click",(function(){b.Ac(t);const a=e.$implicit;return b.hc().deleteImage(a)})),b.Rb(3,"mat-icon",9),b.Vb(),b.Vb(),b.Vb()}if(2&t){const t=e.$implicit,a=b.hc();b.pc("cdkDropListEnterPredicate",a.dropListEnterPredicate),b.Db(1),b.pc("src",t.url)}}let Pt=(()=>{class t{constructor(t,e,a,i){this.images=t,this.store=e,this.toast=a,this.viewportRuler=i,this.dropListEnterPredicate=(t,e)=>{if(e===this.placeholder)return!0;if(e!==this.activeContainer)return!1;const a=this.placeholder.element.nativeElement,i=t.dropContainer.element.nativeElement,n=e.element.nativeElement,s=Et(n.parentElement.children,this.source?a:i),o=Et(n.parentElement.children,n);return this.source||(this.sourceIndex=s,this.source=t.dropContainer,a.style.width=i.clientWidth+"px",a.style.height=i.clientHeight+"px",i.parentElement.removeChild(i)),this.targetIndex=o,this.target=e,a.style.display="",n.parentElement.insertBefore(a,o>s?n.nextSibling:n),this.placeholder._dropListRef.enter(t._dragRef,t.element.nativeElement.offsetLeft,t.element.nativeElement.offsetTop),!1}}uploadImage(){Object(g.a)({types:[h.a.image]}).then(t=>{const e={modelId:this.store.selectSnapshot(r.a.title).id};this.images.create(t[0],e).subscribe(t=>{this.store.dispatch(new c.b(t.image)).subscribe(()=>{this.toast.open(V.a.IMAGE_CREATE_SUCCESS)})})})}deleteImage(t){this.store.dispatch(new c.k(t)).subscribe(()=>{this.toast.open(V.a.IMAGE_DELETE_SUCCESS)})}dragMoved(t){const e=this.getPointerPositionOnPage(t.event);this.listGroup._items.forEach(t=>{(function(t,e,a){const{top:i,bottom:n,left:s,right:o}=t.element.nativeElement.getBoundingClientRect();return a>=i&&a<=n&&e>=s&&e<=o})(t,e.x,e.y)&&(this.activeContainer=t)})}dropListDropped(){if(!this.target)return;const t=this.placeholder.element.nativeElement,e=t.parentElement;t.style.display="none",e.removeChild(t),e.appendChild(t),e.insertBefore(this.source.element.nativeElement,e.children[this.sourceIndex]),this.target=null,this.source=null,this.sourceIndex!==this.targetIndex&&this.store.dispatch(new c.f(this.sourceIndex,this.targetIndex))}getPointerPositionOnPage(t){const e=function(t){return t.type.startsWith("touch")}(t)?t.touches[0]||t.changedTouches[0]:t,a=this.viewportRuler.getViewportScrollPosition();return{x:e.pageX-a.left,y:e.pageY-a.top}}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(Lt.a),b.Qb(o.g),b.Qb(C.b),b.Qb(Ot.e))},t.\u0275cmp=b.Kb({type:t,selectors:[["images-panel"]],viewQuery:function(t,e){var a;1&t&&(b.Sc(et.e,!0),b.Sc(et.d,!0)),2&t&&(b.wc(a=b.ec())&&(e.listGroup=a.first),b.wc(a=b.ec())&&(e.placeholder=a.first))},features:[b.Cb([m.a])],decls:9,vars:4,consts:[["mat-raised-button","","color","accent",3,"click"],["svgIcon","add"],["trans",""],["cdkDropListGroup",""],["cdkDropList","",3,"cdkDropListEnterPredicate","cdkDropListDropped"],[1,"images-grid"],["cdkDropList","",3,"cdkDropListEnterPredicate","cdkDropListDropped",4,"ngFor","ngForOf"],["cdkDrag","","size","medium","mode","landscape",1,"images-panel-media-image",3,"src","cdkDragMoved"],["mat-mini-fab","","color","warn",3,"click"],["svgIcon","delete"]],template:function(t,e){1&t&&(b.Wb(0,"button",0),b.dc("click",(function(){return e.uploadImage()})),b.Rb(1,"mat-icon",1),b.Wb(2,"span",2),b.Lc(3,"Upload Image"),b.Vb(),b.Vb(),b.Wb(4,"div",3),b.Wb(5,"div",4),b.dc("cdkDropListDropped",(function(){return e.dropListDropped()})),b.Vb(),b.Wb(6,"div",5),b.Jc(7,St,4,2,"div",6),b.ic(8,"async"),b.Vb(),b.Vb()),2&t&&(b.Db(5),b.pc("cdkDropListEnterPredicate",e.dropListEnterPredicate),b.Db(2),b.pc("ngForOf",b.jc(8,2,e.images$)))},directives:[I.b,w.a,d.a,et.e,et.d,i.s,D.a,et.a],pipes:[i.b],styles:[".mat-raised-button[_ngcontent-%COMP%]{display:block;margin-bottom:25px}.images-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);grid-auto-rows:1fr;grid-gap:15px;overflow:hidden}media-image[_ngcontent-%COMP%]{display:block;box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12);border-radius:4px;overflow:hidden;position:relative;cursor:move;transition:box-shadow .2s cubic-bezier(0,0,.2,1)}media-image[_ngcontent-%COMP%]:active{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12);opacity:.6}.mat-mini-fab[_ngcontent-%COMP%]{position:absolute;bottom:8px;right:8px}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.3}.cdk-drag-preview[_ngcontent-%COMP%]{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}"],changeDetection:0}),Object(s.b)([Object(o.d)(r.a.images)],t.prototype,"images$",void 0),t})();function Et(t,e){return Array.prototype.indexOf.call(t,e)}var Tt=a("SRuq"),_t=a("WAq7"),Rt=a("CZpq"),jt=a("A5z7");function $t(t,e){if(1&t){const t=b.Xb();b.Wb(0,"form",9),b.dc("ngSubmit",(function(){b.Ac(t);const e=b.hc();return e.selectTagsFromString(e.formControl.value)})),b.Wb(1,"div",10),b.Rb(2,"input",11),b.Wb(3,"button",12),b.Lc(4,"Add"),b.Vb(),b.Vb(),b.Vb()}if(2&t){const t=b.hc(),e=b.xc(8);b.Db(2),b.pc("matAutocomplete",e)("formControl",t.formControl)}}const Mt=function(t){return{tagName:t}};function Nt(t,e){if(1&t&&(b.Wb(0,"p",13),b.Lc(1,"Separate :tagName with comma."),b.Vb()),2&t){const t=b.hc();b.pc("transValues",b.tc(1,Mt,t.pluralName))}}function Jt(t,e){if(1&t){const t=b.Xb();b.Wb(0,"mat-chip",14),b.dc("removed",(function(){b.Ac(t);const a=e.$implicit;return b.hc().deselectTag(a)})),b.Wb(1,"span"),b.Lc(2),b.Vb(),b.Rb(3,"mat-icon",15),b.Vb()}if(2&t){const t=e.$implicit,a=b.hc();b.pc("removable",!a.readonly),b.Db(2),b.Mc(t)}}function At(t,e){if(1&t){const t=b.Xb();b.Wb(0,"div",20),b.dc("click",(function(){b.Ac(t);const a=e.$implicit;return b.hc(2).selectTags([a.name])})),b.Lc(1),b.Vb()}if(2&t){const t=e.$implicit;b.Db(1),b.Mc(t.display_name)}}function Ft(t,e){if(1&t&&(b.Wb(0,"div",16),b.Wb(1,"p",17),b.Lc(2,"Choose from existing :tagName:"),b.Vb(),b.Wb(3,"div",18),b.Jc(4,At,2,1,"div",19),b.ic(5,"async"),b.Vb(),b.Vb()),2&t){const t=b.hc();b.Db(1),b.pc("transValues",b.tc(4,Mt,t.pluralName)),b.Db(3),b.pc("ngForOf",b.jc(5,2,t.existingTags$))}}function Qt(t,e){if(1&t&&(b.Wb(0,"mat-option",21),b.Lc(1),b.Vb()),2&t){const t=e.$implicit;b.pc("value",t.name),b.Db(1),b.Mc(t.display_name)}}let Ut=(()=>{class t{constructor(t){this.tagService=t,this.readonly=!1,this.pluralName="tags",this.formControl=new u.i,this.selectedTags$=new l.a([]),this.existingTags$=new l.a([]),this.suggestedTags$=new l.a([])}ngOnInit(){this.tagService.index({perPage:15,type:this.tagType}).subscribe(t=>{this.existingTags$.next(t.pagination.data.filter(t=>"status"!==t.type))}),this.formControl.valueChanges.subscribe(t=>{const e=t?this.existingTags$.value.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())):[];this.suggestedTags$.next(e)})}writeValue(t){this.selectTags(t,{skipPropagate:!0,override:!0})}registerOnChange(t){this.propagateChange=t}registerOnTouched(){}selectTags(t,e={}){const a=(t||[]).map(t=>t.trim()).filter(t=>!this.selectedTags$.value.includes(t));e.override?this.selectedTags$.next(a):a.length&&this.selectedTags$.next([...this.selectedTags$.value,...a]),this.formControl.reset(),e.skipPropagate||this.propagateChange(this.selectedTags$.value)}deselectTag(t){const e=this.selectedTags$.value.slice();e.splice(e.indexOf(t),1),this.selectedTags$.next(e),this.propagateChange(this.selectedTags$.value)}selectTagsFromString(t){const e=t.split(",").map(t=>Object(_t.a)(t));this.selectTags(e)}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(Rt.a))},t.\u0275cmp=b.Kb({type:t,selectors:[["tags-manager"]],inputs:{readonly:"readonly",tagType:"tagType",pluralName:"pluralName"},features:[b.Cb([{provide:u.s,useExisting:t,multi:!0}])],decls:11,vars:10,consts:[["class","input-container","ngNativeValidate","",3,"ngSubmit",4,"ngIf"],["class","main-info","trans","",3,"transValues",4,"ngIf"],[1,"selected-tags"],[3,"selectable"],[3,"removable","removed",4,"ngFor","ngForOf"],["class","existing-tags",4,"ngIf"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["ngNativeValidate","",1,"input-container",3,"ngSubmit"],[1,"input-with-action"],["type","text","required","",1,"tags-string-input",3,"matAutocomplete","formControl"],["type","submit","mat-flat-button","","color","accent","trans","",1,"add-tags-button"],["trans","",1,"main-info",3,"transValues"],[3,"removable","removed"],["svgIcon","cancel","matChipRemove",""],[1,"existing-tags"],["trans","",3,"transValues"],[1,"existing-tags-list"],["class","existing-tag-name",3,"click",4,"ngFor","ngForOf"],[1,"existing-tag-name",3,"click"],[3,"value"]],template:function(t,e){1&t&&(b.Jc(0,$t,5,2,"form",0),b.Jc(1,Nt,2,3,"p",1),b.Wb(2,"div",2),b.Wb(3,"mat-chip-list",3),b.Jc(4,Jt,4,2,"mat-chip",4),b.ic(5,"async"),b.Vb(),b.Vb(),b.Jc(6,Ft,6,6,"div",5),b.Wb(7,"mat-autocomplete",6,7),b.dc("optionSelected",(function(t){return e.selectTags([t.option.value])})),b.Jc(9,Qt,2,2,"mat-option",8),b.ic(10,"async"),b.Vb()),2&t&&(b.pc("ngIf",!e.readonly),b.Db(1),b.pc("ngIf",!e.readonly),b.Db(2),b.pc("selectable",!1),b.Db(1),b.pc("ngForOf",b.jc(5,6,e.selectedTags$)),b.Db(2),b.pc("ngIf",!e.readonly),b.Db(3),b.pc("ngForOf",b.jc(10,8,e.suggestedTags$)))},directives:[i.t,jt.c,i.s,Q.a,u.v,u.w,Q.c,u.d,u.F,u.u,u.j,I.b,d.a,jt.a,w.a,jt.d,U.l],pipes:[i.b],styles:["[_nghost-%COMP%]{display:block}.selected-tag[_ngcontent-%COMP%]{margin:0 10px 10px 0;display:inline-block}.main-info[_ngcontent-%COMP%]{margin-top:5px;font-size:1.3rem}.existing-tags[_ngcontent-%COMP%]{margin-top:25px}.existing-tags[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:5px;font-size:1.3rem;color:var(--be-secondary-text)}.existing-tags-list[_ngcontent-%COMP%]{border:1px solid var(--be-divider-default);padding:8px;height:78px;overflow:auto}.existing-tag-name[_ngcontent-%COMP%]{display:inline-block;margin-right:6px;color:var(--be-link);text-decoration:underline;font-size:1.2rem;cursor:pointer}"],changeDetection:0}),t})();const zt=function(t){return{tagName:t}};let qt=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.selectedTagsControl=new u.i,this.pluralName=this.data.pluralName||"tags"}close(){this.dialogRef.close()}confirm(){this.dialogRef.close(this.selectedTagsControl.value)}noTagsSelected(){var t;return!(null===(t=this.selectedTagsControl.value)||void 0===t?void 0:t.length)}}return t.\u0275fac=function(e){return new(e||t)(b.Qb($.h),b.Qb($.a))},t.\u0275cmp=b.Kb({type:t,selectors:[["tag-manager-modal"]],decls:12,vars:10,consts:[[1,"modal-header"],["mat-dialog-title","","trans","",3,"transValues"],["type","button","mat-icon-button","","tabindex","-1",1,"close-button",3,"click"],["svgIcon","close"],[3,"tagType","pluralName","formControl"],["type","button","mat-button","","trans","",1,"cancel-button",3,"click"],["type","button","mat-raised-button","","color","accent","trans","",1,"submit-button",3,"disabled","transValues","click"]],template:function(t,e){1&t&&(b.Wb(0,"div",0),b.Wb(1,"h2",1),b.Lc(2,"Select :tagName"),b.Vb(),b.Wb(3,"button",2),b.dc("click",(function(){return e.close()})),b.Rb(4,"mat-icon",3),b.Vb(),b.Vb(),b.Wb(5,"mat-dialog-content"),b.Rb(6,"tags-manager",4),b.Vb(),b.Wb(7,"mat-dialog-actions"),b.Wb(8,"button",5),b.dc("click",(function(){return e.close()})),b.Lc(9,"Cancel"),b.Vb(),b.Wb(10,"button",6),b.dc("click",(function(){return e.confirm()})),b.Lc(11,"Merge :tagName"),b.Vb(),b.Vb()),2&t&&(b.Db(1),b.pc("transValues",b.tc(6,zt,e.pluralName)),b.Db(5),b.pc("tagType",e.data.tagType)("pluralName",e.pluralName)("formControl",e.selectedTagsControl),b.Db(4),b.pc("disabled",e.noTagsSelected())("transValues",b.tc(8,zt,e.pluralName)))},directives:[$.i,d.a,I.b,w.a,$.f,Ut,u.u,u.j,$.c],styles:["[_nghost-%COMP%]{display:block;width:400px;max-width:100%}.mat-dialog-title[_ngcontent-%COMP%], .submit-button[_ngcontent-%COMP%]{text-transform:capitalize}"],changeDetection:0}),t})();function Gt(t,e){if(1&t){const t=b.Xb();b.Wb(0,"tr"),b.Wb(1,"td"),b.Lc(2),b.Vb(),b.Wb(3,"td"),b.Lc(4),b.Vb(),b.Wb(5,"td",5),b.Wb(6,"button",6),b.dc("click",(function(){b.Ac(t);const a=e.$implicit;return b.hc().detachTag(a)})),b.Rb(7,"mat-icon",7),b.Vb(),b.Vb(),b.Vb()}if(2&t){const t=e.$implicit;b.Db(2),b.Mc(t.name),b.Db(2),b.Mc(t.display_name||"-")}}function Ht(t,e){1&t&&(b.Wb(0,"no-results-message",8),b.Wb(1,"span",9),b.Lc(2,"Nothing to display"),b.Vb(),b.Vb())}let Xt=(()=>{class t{constructor(t,e,a,i){this.store=t,this.modal=e,this.toast=a,this.datatable=i}ngOnInit(){this.datatable.init(),this.getTagObservable().subscribe(t=>{this.datatable.data=t||[]})}ngOnDestroy(){this.datatable.destroy()}openTagManagerModal(){this.modal.open(qt,{tagType:this.type,pluralName:"production_country"===this.type?"countries":this.type+"s"}).beforeClosed().subscribe(t=>{t&&t.length&&this.store.dispatch(new c.d(t,this.type))})}detachTag(t){this.store.dispatch(new c.n(t)).subscribe(()=>{this.toast.open(V.a.TAG_DETACH_SUCCESS)})}getTagObservable(){return this.store.select("keyword"===this.type?r.a.keywords:"genre"===this.type?r.a.genres:r.a.countries)}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(o.g),b.Qb(_.a),b.Qb(C.b),b.Qb(Z.a))},t.\u0275cmp=b.Kb({type:t,selectors:[["tags-panel"]],inputs:{type:"type",displayType:"displayType"},features:[b.Cb([Z.a])],decls:18,vars:12,consts:[["mat-raised-button","","color","accent","leftContent","",3,"click"],[1,"material-table"],["table-sort-header","","trans",""],[4,"ngFor","ngForOf"],["svgImage","folder.svg",4,"ngIf"],[1,"edit-column"],["mat-icon-button","",3,"click"],["svgIcon","close"],["svgImage","folder.svg"],["primary-text","","trans",""]],template:function(t,e){1&t&&(b.Wb(0,"datatable-header"),b.Wb(1,"button",0),b.dc("click",(function(){return e.openTagManagerModal()})),b.Lc(2),b.ic(3,"trans"),b.ic(4,"trans"),b.Vb(),b.Vb(),b.Wb(5,"table",1),b.Wb(6,"thead"),b.Wb(7,"tr"),b.Wb(8,"th",2),b.Lc(9,"Name"),b.Vb(),b.Wb(10,"th",2),b.Lc(11,"Display Name"),b.Vb(),b.Rb(12,"th"),b.Vb(),b.Vb(),b.Wb(13,"tbody"),b.Jc(14,Gt,8,2,"tr",3),b.ic(15,"async"),b.Vb(),b.Vb(),b.Jc(16,Ht,3,0,"no-results-message",4),b.ic(17,"async")),2&t&&(b.Db(2),b.Oc(" ",b.jc(3,4,"Add")," ",b.jc(4,6,e.displayType||e.type+"s")," "),b.Db(12),b.pc("ngForOf",b.jc(15,8,e.datatable.data$)),b.Db(2),b.pc("ngIf",!b.jc(17,10,e.datatable.data$).length))},directives:[tt.a,I.b,at.a,d.a,i.s,i.t,w.a,it.a],pipes:[O.a,i.b],styles:["[_nghost-%COMP%]{padding:0}"],changeDetection:0}),t})();var Bt=a("/be1");function Kt(t,e){1&t&&b.Rb(0,"primary-facts-panel",15)}function Yt(t,e){1&t&&b.Rb(0,"seasons-panel",15)}function Zt(t,e){1&t&&b.Rb(0,"images-panel",15)}function te(t,e){if(1&t&&b.Rb(0,"video-index",16),2&t){const t=b.hc(2);b.pc("title",t.title)}}function ee(t,e){if(1&t&&b.Rb(0,"credits-panel",17),2&t){const t=b.hc(2);b.pc("mediaItem",t.title)}}function ae(t,e){if(1&t&&b.Rb(0,"credits-panel",18),2&t){const t=b.hc(2);b.pc("mediaItem",t.title)}}function ie(t,e){1&t&&b.Rb(0,"tags-panel",19)}function ne(t,e){1&t&&b.Rb(0,"tags-panel",20)}function se(t,e){1&t&&b.Rb(0,"tags-panel",21)}function oe(t,e){if(1&t&&b.Rb(0,"reviews-index",16),2&t){const t=b.hc(2);b.pc("title",t.title)}}function ce(t,e){1&t&&(b.Wb(0,"p",22),b.Lc(1,'Save from "Primary Facts" panel in order to enable other menu items.'),b.Vb())}function re(t,e){if(1&t){const t=b.Xb();b.Ub(0),b.Jc(1,Kt,1,0,"primary-facts-panel",1),b.Jc(2,Yt,1,0,"seasons-panel",1),b.Jc(3,Zt,1,0,"images-panel",1),b.Jc(4,te,1,1,"video-index",2),b.Jc(5,ee,1,1,"credits-panel",3),b.Jc(6,ae,1,1,"credits-panel",4),b.Jc(7,ie,1,0,"tags-panel",5),b.Jc(8,ne,1,0,"tags-panel",6),b.Jc(9,se,1,0,"tags-panel",7),b.Jc(10,oe,1,1,"reviews-index",2),b.Wb(11,"aside",8),b.Wb(12,"div",9),b.Lc(13,"Edit"),b.Vb(),b.Wb(14,"div",10),b.Wb(15,"button",11),b.dc("click",(function(){return b.Ac(t),b.hc().openPanel("primaryFacts")})),b.Lc(16,"Primary Facts"),b.Vb(),b.Wb(17,"button",12),b.dc("click",(function(){return b.Ac(t),b.hc().openPanel("seasons")})),b.Lc(18,"Seasons"),b.Vb(),b.Wb(19,"button",12),b.dc("click",(function(){return b.Ac(t),b.hc().openPanel("images")})),b.Lc(20,"Images"),b.Vb(),b.Wb(21,"button",12),b.dc("click",(function(){return b.Ac(t),b.hc().openPanel("videos")})),b.Lc(22,"Videos"),b.Vb(),b.Wb(23,"button",12),b.dc("click",(function(){return b.Ac(t),b.hc().openPanel("cast")})),b.Lc(24,"Cast"),b.Vb(),b.Wb(25,"button",12),b.dc("click",(function(){return b.Ac(t),b.hc().openPanel("crew")})),b.Lc(26,"Crew"),b.Vb(),b.Wb(27,"button",12),b.dc("click",(function(){return b.Ac(t),b.hc().openPanel("genres")})),b.Lc(28,"Genres"),b.Vb(),b.Wb(29,"button",12),b.dc("click",(function(){return b.Ac(t),b.hc().openPanel("keywords")})),b.Lc(30,"Keywords"),b.Vb(),b.Wb(31,"button",12),b.dc("click",(function(){return b.Ac(t),b.hc().openPanel("countries")})),b.Lc(32,"Countries"),b.Vb(),b.Wb(33,"button",12),b.dc("click",(function(){return b.Ac(t),b.hc().openPanel("reviews")})),b.Lc(34,"Reviews"),b.Vb(),b.Vb(),b.Jc(35,ce,2,0,"p",13),b.Vb(),b.Rb(36,"loading-indicator",14),b.ic(37,"async"),b.Tb()}if(2&t){const t=e.ngIf,a=b.hc();b.Db(1),b.pc("ngIf","primaryFacts"===t),b.Db(1),b.pc("ngIf","seasons"===t),b.Db(1),b.pc("ngIf","images"===t),b.Db(1),b.pc("ngIf","videos"===t),b.Db(1),b.pc("ngIf","cast"===t),b.Db(1),b.pc("ngIf","crew"===t),b.Db(1),b.pc("ngIf","keywords"===t),b.Db(1),b.pc("ngIf","genres"===t),b.Db(1),b.pc("ngIf","countries"===t),b.Db(1),b.pc("ngIf","reviews"===t),b.Db(5),b.Hb("active","primaryFacts"===t),b.Db(2),b.Hb("active","seasons"===t),b.pc("disabled",!a.titleCreated()),b.Db(2),b.Hb("active","images"===t),b.pc("disabled",!a.titleCreated()),b.Db(2),b.Hb("active","videos"===t),b.pc("disabled",!a.titleCreated()),b.Db(2),b.Hb("active","cast"===t),b.pc("disabled",!a.titleCreated()),b.Db(2),b.Hb("active","crew"===t),b.pc("disabled",!a.titleCreated()),b.Db(2),b.Hb("active","genres"===t),b.pc("disabled",!a.titleCreated()),b.Db(2),b.Hb("active","keywords"===t),b.pc("disabled",!a.titleCreated()),b.Db(2),b.Hb("active","countries"===t),b.pc("disabled",!a.titleCreated()),b.Db(2),b.Hb("active","reviews"===t),b.pc("disabled",!a.titleCreated()),b.Db(2),b.pc("ngIf",!a.titleCreated()),b.Db(1),b.pc("isVisible",b.jc(37,41,a.loading$))}}let le=(()=>{class t{constructor(t,e,a){this.store=t,this.router=e,this.route=a,this.activePanel$=new l.a("primaryFacts")}ngOnInit(){this.route.data.subscribe(t=>{var e,a;this.store.dispatch(new c.o(null===(e=t.api)||void 0===e?void 0:e.title)),this.title=null===(a=t.api)||void 0===a?void 0:a.title}),this.route.queryParams.subscribe(t=>{this.activePanel$.next(t.active||"primaryFacts")}),this.route.snapshot.params.seasonNumber&&this.activePanel$.next("seasons")}ngOnDestroy(){this.store.dispatch(new c.s)}openPanel(t){this.router.navigate([],{queryParams:{active:t}})}titleCreated(){return!!this.store.selectSnapshot(r.a.title).id}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(o.g),b.Qb(n.d),b.Qb(n.a))},t.\u0275cmp=b.Kb({type:t,selectors:[["crupdate-title"]],decls:2,vars:3,consts:[[4,"ngIf"],["class","material-panel crupdate-title-panel",4,"ngIf"],["class","material-panel crupdate-title-panel",3,"title",4,"ngIf"],["class","material-panel crupdate-title-panel","type","cast",3,"mediaItem",4,"ngIf"],["class","material-panel crupdate-title-panel","type","crew",3,"mediaItem",4,"ngIf"],["class","material-panel crupdate-title-panel","type","keyword",4,"ngIf"],["class","material-panel crupdate-title-panel","type","genre",4,"ngIf"],["class","material-panel crupdate-title-panel","type","production_country","displayType","country",4,"ngIf"],[1,"sidebar","material-panel"],["trans","",1,"header"],[1,"list"],["trans","",1,"list-item","no-style",3,"click"],["trans","",1,"list-item","no-style",3,"disabled","click"],["class","message","trans","",4,"ngIf"],[1,"overlay",3,"isVisible"],[1,"material-panel","crupdate-title-panel"],[1,"material-panel","crupdate-title-panel",3,"title"],["type","cast",1,"material-panel","crupdate-title-panel",3,"mediaItem"],["type","crew",1,"material-panel","crupdate-title-panel",3,"mediaItem"],["type","keyword",1,"material-panel","crupdate-title-panel"],["type","genre",1,"material-panel","crupdate-title-panel"],["type","production_country","displayType","country",1,"material-panel","crupdate-title-panel"],["trans","",1,"message"]],template:function(t,e){1&t&&(b.Jc(0,re,38,43,"ng-container",0),b.ic(1,"async")),2&t&&b.pc("ngIf",b.jc(1,1,e.activePanel$))},directives:[i.t,d.a,p.a,E,wt,Pt,Tt.a,mt,Xt,Bt.a],pipes:[i.b],styles:[".be-dark-mode crupdate-title .sidebar .header{background-color:transparent;border-bottom:1px solid var(--be-divider-default)}crupdate-title{display:flex;align-items:flex-start;width:100%}crupdate-title .material-panel{flex:1 1 auto;min-height:412px}crupdate-title .material-panel .inline-container,crupdate-title .material-panel form>.input-container{margin-bottom:25px}crupdate-title video-index.material-panel{padding:0}crupdate-title data-table{border:none}crupdate-title .inline-container{display:flex}crupdate-title .inline-container .input-container{flex:1 1 auto}crupdate-title .inline-container .input-container.size-small{flex:1 1 30%}crupdate-title .inline-container .input-container:first-of-type{margin-right:15px}crupdate-title .sidebar{flex:0 0 260px;margin-left:30px;padding:0;overflow:hidden}crupdate-title .sidebar .header{background-color:var(--be-primary-default);color:var(--be-accent-contrast);padding:15px 20px;font-size:1.6rem;font-weight:500}crupdate-title .sidebar .list .list-item{display:block;width:100%;padding:10px 20px;white-space:nowrap;text-transform:capitalize}crupdate-title .sidebar .list .list-item:disabled{color:var(--be-hint-text);cursor:default}crupdate-title .sidebar .list .list-item.active{font-weight:500}crupdate-title .sidebar .list .list-item:not(:disabled):hover{cursor:pointer}crupdate-title .sidebar .message{margin:8px 20px;padding-top:8px;font-size:1.3rem;color:var(--be-secondary-text);border-top:1px solid var(--be-divider-lighter)}@media only screen and (max-width:768px){crupdate-title{display:block}crupdate-title primary-facts-panel.material-panel{border:none}crupdate-title primary-facts-panel.material-panel .poster-container{display:block}crupdate-title primary-facts-panel.material-panel .many-inputs{margin-left:0}crupdate-title primary-facts-panel.material-panel img{margin:0 auto 20px}crupdate-title .sidebar{margin:30px 20px 0}crupdate-title .inline-container{display:block}crupdate-title .inline-container .input-container:first-of-type{margin-bottom:20px}}.crupdate-title-panel .table-header,crupdate-episode-modal .table-header{display:flex;align-items:center;margin-bottom:15px}.crupdate-title-panel .table-header .mat-raised-button,crupdate-episode-modal .table-header .mat-raised-button{text-transform:capitalize}.crupdate-title-panel .table-header .input-container,crupdate-episode-modal .table-header .input-container{max-width:300px;margin-left:auto;position:relative}.crupdate-title-panel .table-header .input-container .mat-icon,crupdate-episode-modal .table-header .input-container .mat-icon{position:absolute;top:11px;right:8px}.crupdate-title-panel no-results-message,crupdate-episode-modal no-results-message{margin-top:50px;margin-bottom:50px}.crupdate-title-panel .mat-column-edit,crupdate-episode-modal .mat-column-edit{max-width:100px;color:var(--be-secondary-text)}"],encapsulation:2,changeDetection:0}),Object(s.b)([Object(o.d)(r.a.loading)],t.prototype,"loading$",void 0),t})();var be=a("JIr8"),de=a("5+tZ"),pe=a("LRne"),ue=a("EY2u");const me=[{path:"",component:le,resolve:{api:(()=>{class t{constructor(t,e,a){this.router=t,this.store=e,this.titles=a}resolve(t,e){return t.params.titleId?this.titles.get(t.params.titleId,{fullCredits:!0,keywords:!0,countries:!0,seasons:!0,skipUpdating:!0,allVideos:!0}).pipe(Object(be.a)(()=>(this.router.navigate(this.fallbackUri(e)),ue.a)),Object(de.a)(t=>t?Object(pe.a)(t):(this.router.navigate(this.fallbackUri(e)),ue.a))):Object(pe.a)(null)}fallbackUri(t){return t.url.includes("admin")?["/admin/titles"]:[t.url.replace("/edit","")]}}return t.\u0275fac=function(e){return new(e||t)(b.ac(n.d),b.ac(o.g),b.ac(W.a))},t.\u0275prov=b.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},data:{permissions:["titles.update"]}}];let ge=(()=>{class t{}return t.\u0275mod=b.Ob({type:t}),t.\u0275inj=b.Nb({factory:function(e){return new(e||t)},imports:[[n.h.forChild(me)],n.h]}),t})();var he=a("6rvT"),fe=a("Iysn"),ye=a("ZFTr"),ve=a("k3xQ"),Ve=a("X3pI"),xe=a("NWPP"),We=a("1ImS"),Ce=a("CHUN"),De=a("99o5");let Ie=(()=>{class t{}return t.\u0275mod=b.Ob({type:t}),t.\u0275inj=b.Nb({factory:function(e){return new(e||t)},imports:[[i.c,ge,he.a,u.o,u.E,fe.a,ye.a,ve.a,Ve.a,xe.a,We.a,Ce.a,De.a,I.c,w.b,k.b,$.g,j.g,L.c,R.b,et.f,Q.b]]}),t})()}}]);
//# sourceMappingURL=3-es2015.b3459359228682d8325f.js.map