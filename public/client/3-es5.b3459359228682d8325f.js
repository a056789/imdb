!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,a){if(!t)return;if("string"==typeof t)return e(t,a);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(t,a)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,a){return e&&n(t.prototype,e),a&&n(t,a),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"/5ox":function(e,n,r){"use strict";r.r(n),r.d(n,"CrupdateTitleModule",(function(){return Fe}));var o=r("ofXK"),c=r("tyNb"),s=r("mrSG"),l=r("AcyG"),b=r("cIkh"),d=r("M/Pu"),p=r("2Vo4"),u=r("fXoL"),m=r("Rd8u"),f=r("FBzJ"),g=r("3Pt+"),h=r("h586"),v=r("Lm4C"),y=r("QeDF"),V=r("pLZG"),x=r("IzEk"),W=r("nYR2"),k=r("r2Ys"),C=r("kmQS"),D=r("7tLl"),I=r("i2dy"),w=r("l9qf"),L=r("bTqV"),O=r("Qu3c"),S=r("NFeN"),P=r("ihCf"),E=r("zW5C");function T(t,e){if(1&t&&(u.Wb(0,"option",42),u.Lc(1),u.Vb()),2&t){var a=e.$implicit;u.pc("ngValue",a),u.Db(1),u.Mc(a)}}function _(t,e){if(1&t&&(u.Wb(0,"option",43),u.Lc(1),u.Vb()),2&t){var a=e.$implicit;u.pc("value",a.code),u.Db(1),u.Mc(a.name)}}var j,R=((j=function(){function t(e,n,i,r,o,c,s,l){a(this,t),this.store=e,this.fb=n,this.route=i,this.uploadQueue=r,this.settings=o,this.router=c,this.titles=s,this.toast=l,this.poster$=new p.a(null),this.form=this.fb.group({name:["",[g.I.required,g.I.minLength(1)]],is_series:[!1,[g.I.required]],language:[""],tagline:["",[g.I.minLength(1),g.I.maxLength(250)]],poster:["",[g.I.minLength(1),g.I.maxLength(250)]],backdrop:["",[g.I.minLength(1),g.I.maxLength(250)]],description:["",[g.I.minLength(1)]],budget:["",g.I.min(1)],revenue:["",g.I.min(1)],runtime:["",[g.I.min(1),g.I.max(300)]],country:["",[g.I.minLength(1),g.I.maxLength(50)]],popularity:[1,[g.I.min(1),g.I.max(100)]],certification:["pg"],release_date:[""],allow_update:[!0]}),this.certificationOptions=this.settings.getJson("browse.ageRatings")}return i(t,[{key:"ngOnInit",value:function(){var t=this;this.store.dispatch(new b.q),this.store.select(d.a.title).pipe(Object(V.a)((function(t){return!!t.id})),Object(x.a)(1)).subscribe((function(e){t.form.patchValue(Object.assign(Object.assign({},e),{release_date:e.release_date?e.release_date.split("T")[0]:null})),t.poster$.next(e.poster)})),this.form.get("poster").valueChanges.subscribe((function(e){t.poster$.next(e)}))}},{key:"uploadImage",value:function(t){var e=this;Object(v.a)({types:[y.a.image]}).then((function(a){e.uploadQueue.start(a,{uri:"uploads/images",httpParams:{diskPrefix:"media-images/".concat(t,"s")}}).subscribe((function(a){var n,i,r;e.form.patchValue((n={},i=t,r=a.fileEntry.url,i in n?Object.defineProperty(n,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[i]=r,n))}))}))}},{key:"submit",value:function(){var t=this;this.store.dispatch(new b.t(!0));var e=this.store.selectSnapshot(d.a.title).id;(e?this.titles.update(e,this.form.value):this.titles.create(this.form.value)).pipe(Object(W.a)((function(){return t.store.dispatch(new b.t(!1))}))).subscribe((function(a){t.toast.open(e?k.a.TITLE_UPDATE_SUCCESS:k.a.TITLE_CREATE_SUCCESS),t.router.navigate(e?[t.router.url.includes("admin")?"/admin/titles":t.router.url.split("?")[0].replace("/edit","")]:[t.router.url.replace("new",""+a.title.id),"edit"])}))}}]),t}()).\u0275fac=function(t){return new(t||j)(u.Qb(l.g),u.Qb(g.h),u.Qb(c.a),u.Qb(h.a),u.Qb(C.a),u.Qb(c.d),u.Qb(D.a),u.Qb(I.b))},j.\u0275cmp=u.Kb({type:j,selectors:[["primary-facts-panel"]],features:[u.Cb([h.a])],decls:88,vars:21,consts:[[3,"formGroup","ngSubmit"],[1,"poster-container"],[3,"src"],[1,"many-inputs"],[1,"input-container"],["for","name","trans",""],["type","text","formControlName","name","id","name","minlength","1","maxlength","250","required",""],[1,"inline-container"],["for","type","trans",""],["formControlName","is_series","id","type","required",""],["trans","",3,"ngValue"],["for","allow_update","trans",""],["formControlName","allow_update","id","allow_update","required",""],["for","poster","trans",""],[1,"input-with-action","action-left"],["type","button","mat-flat-button","","color","accent",3,"matTooltip","click"],["svgIcon","file-upload"],["type","text","formControlName","poster","id","poster","minlength","1","maxlength","250"],["for","backdrop","trans",""],["type","text","formControlName","backdrop","id","backdrop","minlength","1","maxlength","250"],["for","release_date","trans",""],["type","date","formControlName","release_date","id","release_date","placeholder","YYYY-MM-DD","required",""],["for","tagline","trans",""],["type","text","formControlName","tagline","id","tagline","minlength","1","maxlength","250"],["for","description","trans",""],["type","text","formControlName","description","id","description","minlength","1","cdkTextareaAutosize","","cdkAutosizeMinRows","6"],["for","runtime","trans",""],["type","number","formControlName","runtime","id","runtime","min","1","max","500"],[1,"input-container","certification-input-container"],["for","certification","trans",""],["formControlName","certification","id","certification"],[3,"ngValue",4,"ngFor","ngForOf"],["for","budget","trans",""],["type","number","formControlName","budget","id","budget","min","1"],["for","revenue","trans",""],["type","number","formControlName","revenue","id","revenue","min","1"],["for","popularity","trans",""],["type","number","formControlName","popularity","id","popularity","min","1","max","1000"],["for","language","trans",""],["formControlName","language","id","language","required",""],[3,"value",4,"ngFor","ngForOf"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled"],[3,"ngValue"],[3,"value"]],template:function(t,e){1&t&&(u.Wb(0,"form",0),u.dc("ngSubmit",(function(){return e.submit()})),u.Wb(1,"div",1),u.Rb(2,"media-image",2),u.ic(3,"async"),u.Wb(4,"div",3),u.Wb(5,"div",4),u.Wb(6,"label",5),u.Lc(7,"Title"),u.Vb(),u.Rb(8,"input",6),u.Vb(),u.Wb(9,"div",7),u.Wb(10,"div",4),u.Wb(11,"label",8),u.Lc(12,"Type"),u.Vb(),u.Wb(13,"select",9),u.Wb(14,"option",10),u.Lc(15,"Movie"),u.Vb(),u.Wb(16,"option",10),u.Lc(17,"TV Series"),u.Vb(),u.Vb(),u.Vb(),u.Wb(18,"div",4),u.Wb(19,"label",11),u.Lc(20,"Allow Auto Update"),u.Vb(),u.Wb(21,"select",12),u.Wb(22,"option",10),u.Lc(23,"Yes"),u.Vb(),u.Wb(24,"option",10),u.Lc(25,"No"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(26,"div",4),u.Wb(27,"label",13),u.Lc(28,"Poster"),u.Vb(),u.Wb(29,"div",14),u.Wb(30,"button",15),u.dc("click",(function(){return e.uploadImage("poster")})),u.ic(31,"trans"),u.Rb(32,"mat-icon",16),u.Vb(),u.Rb(33,"input",17),u.Vb(),u.Vb(),u.Wb(34,"div",4),u.Wb(35,"label",18),u.Lc(36,"Backdrop"),u.Vb(),u.Wb(37,"div",14),u.Wb(38,"button",15),u.dc("click",(function(){return e.uploadImage("backdrop")})),u.ic(39,"trans"),u.Rb(40,"mat-icon",16),u.Vb(),u.Rb(41,"input",19),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(42,"div",7),u.Wb(43,"div",4),u.Wb(44,"label",20),u.Lc(45,"Release Date"),u.Vb(),u.Rb(46,"input",21),u.Vb(),u.Wb(47,"div",4),u.Wb(48,"label",22),u.Lc(49,"Tagline"),u.Vb(),u.Rb(50,"input",23),u.Vb(),u.Vb(),u.Wb(51,"div",4),u.Wb(52,"label",24),u.Lc(53,"Overview"),u.Vb(),u.Rb(54,"textarea",25),u.Vb(),u.Wb(55,"div",7),u.Wb(56,"div",4),u.Wb(57,"label",26),u.Lc(58,"Runtime"),u.Vb(),u.Rb(59,"input",27),u.Vb(),u.Wb(60,"div",28),u.Wb(61,"label",29),u.Lc(62,"Certification"),u.Vb(),u.Wb(63,"select",30),u.Jc(64,T,2,2,"option",31),u.Vb(),u.Vb(),u.Vb(),u.Wb(65,"div",7),u.Wb(66,"div",4),u.Wb(67,"label",32),u.Lc(68,"Budget"),u.Vb(),u.Rb(69,"input",33),u.Vb(),u.Wb(70,"div",4),u.Wb(71,"label",34),u.Lc(72,"Revenue"),u.Vb(),u.Rb(73,"input",35),u.Vb(),u.Vb(),u.Wb(74,"div",7),u.Wb(75,"div",4),u.Wb(76,"label",36),u.Lc(77,"Popularity"),u.Vb(),u.Rb(78,"input",37),u.Vb(),u.Wb(79,"div",4),u.Wb(80,"label",38),u.Lc(81,"Language"),u.Vb(),u.Wb(82,"select",39),u.Jc(83,_,2,2,"option",40),u.ic(84,"async"),u.Vb(),u.Vb(),u.Vb(),u.Wb(85,"button",41),u.ic(86,"async"),u.Lc(87,"Save"),u.Vb(),u.Vb()),2&t&&(u.pc("formGroup",e.form),u.Db(2),u.pc("src",u.jc(3,11,e.poster$)),u.Db(12),u.pc("ngValue",!1),u.Db(2),u.pc("ngValue",!0),u.Db(6),u.pc("ngValue",!0),u.Db(2),u.pc("ngValue",!1),u.Db(6),u.pc("matTooltip",u.jc(31,13,"Upload poster")),u.Db(8),u.pc("matTooltip",u.jc(39,15,"Upload backdrop")),u.Db(26),u.pc("ngForOf",e.certificationOptions),u.Db(19),u.pc("ngForOf",u.jc(84,17,e.languageOptions$)),u.Db(2),u.pc("disabled",u.jc(86,19,e.loading$)))},directives:[g.K,g.v,g.m,w.a,m.a,g.d,g.u,g.k,g.q,g.p,g.F,g.G,g.z,g.J,L.b,O.a,S.a,P.b,g.A,o.s],pipes:[o.b,E.a],styles:["primary-facts-panel{display:block}primary-facts-panel .poster-container{display:flex;margin-bottom:20px}primary-facts-panel .poster-container media-image img{height:350px;width:auto;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12);border-radius:4px}primary-facts-panel .poster-container .many-inputs{margin-left:20px;flex:1 1 auto}primary-facts-panel .poster-container .many-inputs .input-container:last-of-type{margin-bottom:0}primary-facts-panel .certification-input-container option,primary-facts-panel .certification-input-container select{text-transform:uppercase}"],encapsulation:2,changeDetection:0}),Object(s.b)([Object(l.d)(d.a.title)],j.prototype,"title$",void 0),Object(s.b)([Object(l.d)(d.a.loading)],j.prototype,"loading$",void 0),Object(s.b)([Object(l.d)(d.a.languageOptions)],j.prototype,"languageOptions$",void 0),j),$=r("/RwR"),M=r("QGXG"),A=r("7EHt"),N=r("wZkO"),J=r("0IaG"),F=r("Sx+n"),Q=r("JX91"),U=r("lJxs"),z=r("0Ej5"),q=r("VaGr"),G=r("/1cH"),H=r("FKr1");function X(t,e){1&t&&(u.Wb(0,"h2",11),u.Lc(1,"Edit"),u.Vb())}function B(t,e){1&t&&(u.Wb(0,"h2",11),u.Lc(1,"Create"),u.Vb())}function K(t,e){if(1&t&&(u.Wb(0,"div",12),u.Wb(1,"label",13),u.Lc(2,"Person"),u.Vb(),u.Rb(3,"input",14),u.Vb()),2&t){var a=u.hc();u.Db(3),u.pc("value",null==a.credit?null:a.credit.name)}}function Y(t,e){if(1&t){var a=u.Xb();u.Wb(0,"search-input",15),u.dc("resultSelected",(function(t){return u.Ac(a),u.hc().setCredit(t)})),u.Vb()}if(2&t){var n=u.hc();u.pc("type",n.getPersonType())("resetInputOnSelect",!1)}}function Z(t,e){1&t&&(u.Wb(0,"div",12),u.Wb(1,"label",16),u.Lc(2,"Character"),u.Vb(),u.Rb(3,"input",17),u.Vb())}function tt(t,e){if(1&t&&(u.Wb(0,"mat-option",25),u.Wb(1,"div",26),u.Wb(2,"span",27),u.Lc(3,"Job"),u.Vb(),u.Lc(4),u.Vb(),u.Wb(5,"div",28),u.Wb(6,"span",27),u.Lc(7,"Department"),u.Vb(),u.Lc(8),u.Vb(),u.Vb()),2&t){var a=e.$implicit;u.pc("value",a.job),u.Db(4),u.Nc(": ",a.job,""),u.Db(4),u.Nc(": ",a.department,"")}}function et(t,e){if(1&t){var a=u.Xb();u.Ub(0),u.Wb(1,"div",12),u.Wb(2,"label",18),u.Lc(3,"Job"),u.Vb(),u.Rb(4,"input",19),u.Vb(),u.Wb(5,"mat-autocomplete",20,21),u.dc("optionSelected",(function(t){return u.Ac(a),u.hc().jobSelected(t)})),u.Jc(7,tt,9,3,"mat-option",22),u.ic(8,"async"),u.Vb(),u.Wb(9,"div",12),u.Wb(10,"label",23),u.Lc(11,"Department"),u.Vb(),u.Rb(12,"input",24),u.Vb(),u.Tb()}if(2&t){var n=u.xc(6),i=u.hc();u.Db(4),u.pc("matAutocomplete",n),u.Db(3),u.pc("ngForOf",u.jc(8,2,i.filteredJobs))}}var at,nt=((at=function(){function e(t,n,i,r,o,c,s){a(this,e),this.store=t,this.toast=n,this.fb=i,this.actions$=r,this.dialogRef=o,this.valueLists=c,this.data=s,this.form=this.fb.group({character:[""],department:[""],job:[""]}),this.availableJobs=[],this.data.credit&&(this.credit=this.data.credit,this.form.patchValue(this.data.credit.pivot))}return i(e,[{key:"ngOnInit",value:function(){var e=this;this.valueLists.get(["tmdbJobs"]).subscribe((function(a){e.availableJobs=[],a.tmdbJobs.forEach((function(a){var n=a.jobs.map((function(t){return{job:t,department:a.department}}));e.availableJobs=[].concat(t(e.availableJobs),t(n))})),e.filteredJobs=e.form.get("job").valueChanges.pipe(Object(Q.a)(""),Object(U.a)((function(t){return e.availableJobs.filter((function(e){return!(t=t.toLowerCase())||e.job.toLowerCase().includes(t)||e.department.toLowerCase().includes(t)})).slice(0,10)})))}))}},{key:"confirm",value:function(){var t,e=this,a=this.data.credit?new b.u(this.credit.pivot.id,this.getPayload()):new b.a(null===(t=this.credit)||void 0===t?void 0:t.id,this.data.mediaItem,this.getPayload());this.store.dispatch(a).subscribe((function(){e.close(),e.toast.open(e.data.credit?k.a.CREDIT_UPDATE_SUCCESS:k.a.CREDIT_ADD_SUCCESS)}),(function(t){e.toast.open(t.message)}))}},{key:"close",value:function(){this.dialogRef.close()}},{key:"setCredit",value:function(t){this.credit=t}},{key:"getPayload",value:function(){var t=this.form.value;return"cast"===this.data.type&&(t.department="cast",t.job="cast"),t}},{key:"getPersonType",value:function(){return F.a.PERSON}},{key:"jobSelected",value:function(t){var e=this.availableJobs.find((function(e){return e.job===t.option.value}));this.form.patchValue({job:e.job,department:e.department})}}]),e}()).\u0275fac=function(t){return new(t||at)(u.Qb(l.g),u.Qb(I.b),u.Qb(g.h),u.Qb(l.b),u.Qb(J.h),u.Qb(z.a),u.Qb(J.a))},at.\u0275cmp=u.Kb({type:at,selectors:[["crupdate-credit-modal"]],decls:17,vars:10,consts:[[1,"modal-header"],["class","modal-title","mat-dialog-title","","trans","",4,"ngIf"],["type","button",1,"close-button","no-style","icon-button",3,"click"],["svgIcon","close"],["autocomplete","off","ngNativeValidate","",3,"formGroup","ngSubmit"],[1,"many-inputs"],["class","input-container",4,"ngIf"],["placeholder","Search for a person...","label","Person","searchProvider","local",3,"type","resetInputOnSelect","resultSelected",4,"ngIf"],[4,"ngIf"],["type","button","mat-button","","trans","",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled"],["mat-dialog-title","","trans","",1,"modal-title"],[1,"input-container"],["for","name","trans",""],["type","text","id","name","disabled","",3,"value"],["placeholder","Search for a person...","label","Person","searchProvider","local",3,"type","resetInputOnSelect","resultSelected"],["for","character","trans",""],["type","text","id","character","formControlName","character","required",""],["for","job","trans",""],["type","text","id","job","formControlName","job","required","",3,"matAutocomplete"],[3,"optionSelected"],["auto","matAutocomplete"],["class","multiline-mat-menu-item",3,"value",4,"ngFor","ngForOf"],["for","department","trans",""],["type","text","id","department","formControlName","department","required",""],[1,"multiline-mat-menu-item",3,"value"],[1,"title"],["trans",""],[1,"description"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Jc(1,X,2,0,"h2",1),u.Jc(2,B,2,0,"h2",1),u.Wb(3,"button",2),u.dc("click",(function(){return e.close()})),u.Rb(4,"mat-icon",3),u.Vb(),u.Vb(),u.Wb(5,"form",4),u.dc("ngSubmit",(function(){return e.confirm()})),u.Wb(6,"mat-dialog-content",5),u.Jc(7,K,4,1,"div",6),u.Jc(8,Y,1,2,"search-input",7),u.Jc(9,Z,4,0,"div",6),u.Jc(10,et,13,4,"ng-container",8),u.Vb(),u.Wb(11,"mat-dialog-actions"),u.Wb(12,"button",9),u.dc("click",(function(){return e.close()})),u.Lc(13,"Cancel"),u.Vb(),u.Wb(14,"button",10),u.ic(15,"async"),u.Lc(16,"Save"),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(1),u.pc("ngIf",e.data.credit),u.Db(1),u.pc("ngIf",!e.data.credit),u.Db(3),u.pc("formGroup",e.form),u.Db(2),u.pc("ngIf",e.data.credit),u.Db(1),u.pc("ngIf",!e.data.credit),u.Db(1),u.pc("ngIf","cast"===e.data.type),u.Db(1),u.pc("ngIf","crew"===e.data.type),u.Db(4),u.pc("disabled",u.jc(15,8,e.loading$)))},directives:[o.t,S.a,g.v,g.m,J.f,J.c,L.b,m.a,J.i,q.a,g.d,g.u,g.k,g.F,G.c,G.a,o.s,H.l],pipes:[o.b],styles:["crupdate-credit-modal{display:block;width:400px;max-width:100%}crupdate-credit-modal search-input input{border-color:var(--be-divider-default);margin-bottom:20px}"],encapsulation:2,changeDetection:0}),Object(s.b)([Object(l.d)(d.a.loading)],at.prototype,"loading$",void 0),at),it=r("2hX1"),rt=r("EAOp"),ot=r("5+WD"),ct=r("Um6Z"),st=r("CH4Q");function lt(t,e){1&t&&(u.Wb(0,"th",8),u.Lc(1,"Character"),u.Vb())}function bt(t,e){1&t&&(u.Wb(0,"th",9),u.Lc(1,"Department"),u.Vb())}function dt(t,e){1&t&&(u.Wb(0,"th",10),u.Lc(1,"Job"),u.Vb())}function pt(t,e){1&t&&(u.Wb(0,"button",21),u.Rb(1,"mat-icon",22),u.Vb())}function ut(t,e){if(1&t&&(u.Wb(0,"div"),u.Lc(1),u.Vb()),2&t){var a=u.hc().$implicit;u.Db(1),u.Mc(a.name)}}function mt(t,e){if(1&t&&(u.Wb(0,"td"),u.Lc(1),u.Vb()),2&t){var a=u.hc().$implicit;u.Db(1),u.Mc(a.pivot.character)}}function ft(t,e){if(1&t&&(u.Wb(0,"td"),u.Lc(1),u.Vb()),2&t){var a=u.hc().$implicit;u.Db(1),u.Mc(a.pivot.department)}}function gt(t,e){if(1&t&&(u.Wb(0,"td"),u.Lc(1),u.Vb()),2&t){var a=u.hc().$implicit;u.Db(1),u.Mc(a.pivot.job)}}function ht(t,e){if(1&t){var a=u.Xb();u.Wb(0,"tr",11),u.Wb(1,"td"),u.Wb(2,"div",12),u.Jc(3,pt,2,0,"button",13),u.Rb(4,"media-image",14),u.Wb(5,"span"),u.Lc(6),u.Vb(),u.Vb(),u.Jc(7,ut,2,1,"div",15),u.Vb(),u.Jc(8,mt,2,1,"td",16),u.Jc(9,ft,2,1,"td",16),u.Jc(10,gt,2,1,"td",16),u.Wb(11,"td",17),u.Wb(12,"button",18),u.dc("click",(function(){u.Ac(a);var t=e.$implicit;return u.hc().openCrupdateCreditModal(t)})),u.Rb(13,"mat-icon",19),u.Vb(),u.Wb(14,"button",18),u.dc("click",(function(){u.Ac(a);var t=e.$implicit;return u.hc().detachCredit(t)})),u.Rb(15,"mat-icon",20),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit,i=u.hc();u.Db(3),u.pc("ngIf","cast"===i.type),u.Db(1),u.pc("src",n.poster),u.Db(2),u.Mc(n.name),u.Db(2),u.pc("ngIf","cast"===i.type),u.Db(1),u.pc("ngIf","crew"===i.type),u.Db(1),u.pc("ngIf","crew"===i.type)}}function vt(t,e){1&t&&(u.Wb(0,"no-results-message",23),u.Wb(1,"span",24),u.Lc(2,"Nothing to Display."),u.Vb(),u.Vb())}var yt,Vt=((yt=function(){function t(e,n,i,r){a(this,t),this.dialog=e,this.store=n,this.toast=i,this.datatable=r}return i(t,[{key:"ngOnInit",value:function(){this.datatable.init()}},{key:"ngOnChanges",value:function(t){t.mediaItem&&t.mediaItem.currentValue&&(this.datatable.data="cast"===this.type?this.getCast(this.mediaItem.credits):this.getCrew(this.mediaItem.credits))}},{key:"ngOnDestroy",value:function(){this.datatable.destroy()}},{key:"openCrupdateCreditModal",value:function(t){this.dialog.open(nt,{credit:t,type:this.type,mediaItem:this.mediaItem})}},{key:"detachCredit",value:function(t){var e=this;this.dialog.open($.a,{title:"Remove Credit",body:"Are you sure you want to remove this credit?",ok:"Remove"}).afterClosed().subscribe((function(a){a&&e.store.dispatch(new b.r(e.mediaItem,t)).subscribe((function(){e.toast.open(k.a.CREDIT_REMOVE_SUCCESS)}))}))}},{key:"changeCreditsOrder",value:function(t){this.store.selectSnapshot(d.a.loading)||this.store.dispatch(new b.e(this.mediaItem,t.previousIndex,t.currentIndex,this.type))}},{key:"getCast",value:function(t){return t?t.filter((function(t){return"cast"===t.pivot.department})):[]}},{key:"getCrew",value:function(t){return t?t.filter((function(t){return"cast"!==t.pivot.department})):[]}}]),t}()).\u0275fac=function(t){return new(t||yt)(u.Qb(M.a),u.Qb(l.g),u.Qb(I.b),u.Qb(it.a))},yt.\u0275cmp=u.Kb({type:yt,selectors:[["credits-panel"]],inputs:{mediaItem:"mediaItem",type:"type"},features:[u.Cb([it.a]),u.Bb],decls:17,vars:10,consts:[["type","button","mat-raised-button","","color","accent","leftContent","","trans","",3,"click"],["cdkDropList","",1,"material-table",3,"cdkDropListDisabled","cdkDropListDropped"],["table-sort-header","","trans",""],["table-sort-header","pivot.character","trans","",4,"ngIf"],["table-sort-header","pivot.department","trans","",4,"ngIf"],["table-sort-header","pivot.job","trans","",4,"ngIf"],["cdkDrag","",4,"ngFor","ngForOf"],["svgImage","awards.svg",4,"ngIf"],["table-sort-header","pivot.character","trans",""],["table-sort-header","pivot.department","trans",""],["table-sort-header","pivot.job","trans",""],["cdkDrag",""],[1,"column-with-image"],["type","button","mat-icon-button","","cdkDragHandle","",4,"ngIf"],["size","small",3,"src"],[4,"cdkDragPreview"],[4,"ngIf"],[1,"edit-column"],["type","button","mat-icon-button","",3,"click"],["svgIcon","edit"],["svgIcon","close"],["type","button","mat-icon-button","","cdkDragHandle",""],["svgIcon","drag-handle"],["svgImage","awards.svg"],["primary-text","","trans",""]],template:function(t,e){1&t&&(u.Wb(0,"datatable-header"),u.Wb(1,"button",0),u.dc("click",(function(){return e.openCrupdateCreditModal()})),u.Lc(2,"Add Credit"),u.Vb(),u.Vb(),u.Wb(3,"table",1),u.dc("cdkDropListDropped",(function(t){return e.changeCreditsOrder(t)})),u.Wb(4,"thead"),u.Wb(5,"tr"),u.Wb(6,"th",2),u.Lc(7,"Name"),u.Vb(),u.Jc(8,lt,2,0,"th",3),u.Jc(9,bt,2,0,"th",4),u.Jc(10,dt,2,0,"th",5),u.Rb(11,"th"),u.Vb(),u.Vb(),u.Wb(12,"tbody"),u.Jc(13,ht,16,6,"tr",6),u.ic(14,"async"),u.Vb(),u.Vb(),u.Jc(15,vt,3,0,"no-results-message",7),u.ic(16,"async")),2&t&&(u.Db(3),u.pc("cdkDropListDisabled","crew"===e.type),u.Db(5),u.pc("ngIf","cast"===e.type),u.Db(1),u.pc("ngIf","crew"===e.type),u.Db(1),u.pc("ngIf","crew"===e.type),u.Db(3),u.pc("ngForOf",u.jc(14,6,e.datatable.data$)),u.Db(2),u.pc("ngIf",!u.jc(16,8,e.datatable.data$).length))},directives:[rt.a,L.b,m.a,ot.d,ct.a,o.t,o.s,ot.a,w.a,ot.c,S.a,ot.b,st.a],pipes:[o.b],styles:["[_nghost-%COMP%]{display:block;padding:0}.cdk-drag-handle[_ngcontent-%COMP%]{cursor:move;margin-right:10px}.cdk-drag-preview[_ngcontent-%COMP%]{padding:15px;font-size:1.5rem;border-radius:4px;background-color:var(--be-background);box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{background-color:var(--be-hover)}.cdk-drag-animating[_ngcontent-%COMP%], .cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"],changeDetection:0}),yt);function xt(t,e){1&t&&(u.Wb(0,"h2",30),u.Lc(1,"Edit Episode"),u.Vb())}function Wt(t,e){1&t&&(u.Wb(0,"h2",30),u.Lc(1,"Create Episode"),u.Vb())}function kt(t,e){if(1&t&&(u.Wb(0,"div",31),u.Lc(1),u.Vb()),2&t){var a=e.ngIf;u.Db(1),u.Mc(a)}}var Ct,Dt=((Ct=function(){function t(e,n,i,r,o,c){a(this,t),this.store=e,this.toast=n,this.fb=i,this.uploadQueue=r,this.dialogRef=o,this.data=c,this.episode$=new p.a(null),this.errors$=new p.a({}),this.episodeForm=this.fb.group({name:["",[g.I.required,g.I.minLength(1)]],poster:["",[g.I.minLength(1),g.I.maxLength(250)]],description:["",[g.I.minLength(1)]],popularity:[50,[g.I.min(1),g.I.max(1e3)]],release_date:[""],episode_number:[""]})}return i(t,[{key:"ngOnInit",value:function(){var t=this;this.data.episode?(this.bindToStoreEpisode(),this.episodeForm.patchValue(Object.assign(Object.assign({},this.episode$.value),{release_date:this.episode$.value.release_date.split(" ")[0]})),setTimeout((function(){return t.loadEpisodeCredits()}))):this.episodeForm.patchValue({episode_number:this.data.season?this.data.season.episode_count+1:1})}},{key:"confirm",value:function(){this.data.episode?this.updateEpisode():this.createEpisode()}},{key:"close",value:function(){this.dialogRef.close()}},{key:"createEpisode",value:function(){var t=this;this.store.dispatch(new b.h(this.data.season,this.episodeForm.value)).subscribe((function(){t.errors$.next({}),t.toast.open(k.a.EPISODE_CREATE_SUCCESS);var e=t.store.selectSnapshot(d.a.seasons).find((function(e){return e.id===t.data.season.id})).episodes;t.data.episode=e[e.length-1]}),(function(e){return t.errors$.next(e.errors)}))}},{key:"updateEpisode",value:function(){var t=this;this.store.dispatch(new b.v(this.data.episode,this.episodeForm.value)).subscribe((function(){t.errors$.next({}),t.toast.open(k.a.EPISODE_UPDATE_SUCCESS),t.close()}),(function(e){return t.errors$.next(e.errors)}))}},{key:"uploadPoster",value:function(){var t=this;Object(v.a)({types:[y.a.image]}).then((function(e){t.uploadQueue.start(e,{uri:"uploads/images",httpParams:{diskPrefix:"media-images/posters"}}).subscribe((function(e){t.episodeForm.patchValue({poster:e.fileEntry.url})}))}))}},{key:"bindToStoreEpisode",value:function(){var t=this;this.store.select(d.a.title).subscribe((function(e){if(e.seasons){var a=e.seasons.find((function(e){return e.number===t.data.episode.season_number})).episodes.find((function(e){return e.episode_number===t.data.episode.episode_number}));t.episode$.next(Object.assign({},a))}}))}},{key:"loadEpisodeCredits",value:function(){this.data.episode.credits||this.store.dispatch(new b.p(this.episode$.value)).toPromise()}}]),t}()).\u0275fac=function(t){return new(t||Ct)(u.Qb(l.g),u.Qb(I.b),u.Qb(g.h),u.Qb(h.a),u.Qb(J.h),u.Qb(J.a))},Ct.\u0275cmp=u.Kb({type:Ct,selectors:[["crupdate-episode-modal"]],features:[u.Cb([h.a])],decls:55,vars:30,consts:[[1,"modal-header"],["class","modal-title","mat-dialog-title","","trans","",4,"ngIf"],["type","button",1,"close-button","no-style","icon-button",3,"click"],["svgIcon","close"],["autocomplete","off","ngNativeValidate","",3,"formGroup","ngSubmit"],["animationDuration","0ms","color","accent",3,"dynamicHeight"],[3,"label"],[1,"many-inputs","primary-facts-panel"],[1,"input-container"],["for","name","trans",""],["type","text","formControlName","name","id","name","minlength","1","maxlength","250","required",""],["for","episode_number","trans",""],["type","number","formControlName","episode_number","id","episode_number","min","1","required",""],["class","error",4,"ngIf"],["for","poster","trans",""],[1,"input-with-action","action-left"],["type","button","mat-flat-button","","color","accent",3,"matTooltip","click"],["svgIcon","file-upload"],["type","text","formControlName","poster","id","poster","minlength","1","maxlength","250"],["for","release_date","trans",""],["type","date","formControlName","release_date","id","release_date","required",""],["for","description","trans",""],["type","text","formControlName","description","id","description","minlength","1","cdkTextareaAutosize","","cdkAutosizeMinRows","6"],["for","popularity","trans",""],["type","number","formControlName","popularity","id","popularity","min","1","max","1000"],[3,"label","disabled"],["type","cast",3,"mediaItem"],["type","crew",3,"mediaItem"],["type","button","mat-button","","trans","",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled"],["mat-dialog-title","","trans","",1,"modal-title"],[1,"error"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Jc(1,xt,2,0,"h2",1),u.Jc(2,Wt,2,0,"h2",1),u.Wb(3,"button",2),u.dc("click",(function(){return e.close()})),u.Rb(4,"mat-icon",3),u.Vb(),u.Vb(),u.Wb(5,"form",4),u.dc("ngSubmit",(function(){return e.confirm()})),u.Wb(6,"mat-dialog-content"),u.Wb(7,"mat-tab-group",5),u.Wb(8,"mat-tab",6),u.ic(9,"trans"),u.Wb(10,"div",7),u.Wb(11,"div",8),u.Wb(12,"label",9),u.Lc(13,"Title"),u.Vb(),u.Rb(14,"input",10),u.Vb(),u.Wb(15,"div",8),u.Wb(16,"label",11),u.Lc(17,"Number"),u.Vb(),u.Rb(18,"input",12),u.Jc(19,kt,2,1,"div",13),u.ic(20,"async"),u.Vb(),u.Wb(21,"div",8),u.Wb(22,"label",14),u.Lc(23,"Poster"),u.Vb(),u.Wb(24,"div",15),u.Wb(25,"button",16),u.dc("click",(function(){return e.uploadPoster()})),u.ic(26,"trans"),u.Rb(27,"mat-icon",17),u.Vb(),u.Rb(28,"input",18),u.Vb(),u.Vb(),u.Wb(29,"div",8),u.Wb(30,"label",19),u.Lc(31,"Release Date"),u.Vb(),u.Rb(32,"input",20),u.Vb(),u.Wb(33,"div",8),u.Wb(34,"label",21),u.Lc(35,"Overview"),u.Vb(),u.Rb(36,"textarea",22),u.Vb(),u.Wb(37,"div",8),u.Wb(38,"label",23),u.Lc(39,"Popularity"),u.Vb(),u.Rb(40,"input",24),u.Vb(),u.Vb(),u.Vb(),u.Wb(41,"mat-tab",25),u.ic(42,"trans"),u.Rb(43,"credits-panel",26),u.ic(44,"async"),u.Vb(),u.Wb(45,"mat-tab",25),u.ic(46,"trans"),u.Rb(47,"credits-panel",27),u.ic(48,"async"),u.Vb(),u.Vb(),u.Vb(),u.Wb(49,"mat-dialog-actions"),u.Wb(50,"button",28),u.dc("click",(function(){return e.close()})),u.Lc(51,"Cancel"),u.Vb(),u.Wb(52,"button",29),u.ic(53,"async"),u.Lc(54,"Save"),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(1),u.pc("ngIf",e.data.episode),u.Db(1),u.pc("ngIf",!e.data.episode),u.Db(3),u.pc("formGroup",e.episodeForm),u.Db(2),u.pc("dynamicHeight",!0),u.Db(1),u.pc("label",u.jc(9,14,"Primary Facts")),u.Db(11),u.pc("ngIf",u.jc(20,16,e.errors$).episode_number),u.Db(6),u.pc("matTooltip",u.jc(26,18,"Upload poster")),u.Db(16),u.pc("label",u.jc(42,20,"Cast"))("disabled",!e.data.episode),u.Db(2),u.pc("mediaItem",u.jc(44,22,e.episode$)),u.Db(2),u.pc("label",u.jc(46,24,"Crew"))("disabled",!e.data.episode),u.Db(2),u.pc("mediaItem",u.jc(48,26,e.episode$)),u.Db(5),u.pc("disabled",u.jc(53,28,e.loading$)))},directives:[o.t,S.a,g.v,g.m,J.f,N.c,N.a,m.a,g.d,g.u,g.k,g.q,g.p,g.F,g.A,L.b,O.a,P.b,Vt,J.c,J.i],pipes:[E.a,o.b],styles:["[_nghost-%COMP%]{display:block;width:750px;max-width:100%}label[_ngcontent-%COMP%]{text-transform:capitalize}.primary-facts-panel[_ngcontent-%COMP%], credits-panel[_ngcontent-%COMP%]{padding:20px 0}"],changeDetection:0}),Object(s.b)([Object(l.d)(d.a.loading)],Ct.prototype,"loading$",void 0),Ct),It=r("iB19");function wt(t,e){if(1&t){var a=u.Xb();u.Wb(0,"tr"),u.Wb(1,"td"),u.Wb(2,"div",7),u.Rb(3,"media-image",8),u.Wb(4,"span"),u.Lc(5),u.Vb(),u.Vb(),u.Vb(),u.Wb(6,"td"),u.Lc(7),u.Vb(),u.Wb(8,"td"),u.Lc(9),u.ic(10,"formattedDate"),u.Vb(),u.Wb(11,"td",9),u.Wb(12,"button",10),u.dc("click",(function(){u.Ac(a);var t=e.$implicit;return u.hc().openCrupdateEpisodeModal(t)})),u.Rb(13,"mat-icon",11),u.Vb(),u.Wb(14,"button",10),u.dc("click",(function(){u.Ac(a);var t=e.$implicit;return u.hc().deleteEpisode(t)})),u.Rb(15,"mat-icon",12),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit;u.Db(3),u.pc("src",n.poster)("alt",n.name),u.Db(2),u.Mc(n.name),u.Db(2),u.Mc(n.episode_number),u.Db(2),u.Mc(u.jc(10,5,n.release_date))}}function Lt(t,e){1&t&&(u.Wb(0,"no-results-message"),u.Wb(1,"span",13),u.Lc(2,"Nothing to Display."),u.Vb(),u.Wb(3,"span",14),u.Lc(4,"This season does not have any episodes yet."),u.Vb(),u.Vb())}var Ot,St=((Ot=function(){function t(e,n,i,r,o){a(this,t),this.store=e,this.dialog=n,this.toast=i,this.route=r,this.datatable=o,this.trackByFn=function(t,e){return e.id}}return i(t,[{key:"ngOnInit",value:function(){this.datatable.init()}},{key:"ngAfterViewInit",value:function(){var t=+this.route.snapshot.params.episodeNumber;if(t){var e=this.season.episodes.find((function(e){return e.episode_number===t}));e&&this.openCrupdateEpisodeModal(e)}}},{key:"ngOnChanges",value:function(t){t.season.currentValue&&t.season.currentValue.episodes&&(this.datatable.data=this.season.episodes)}},{key:"ngOnDestroy",value:function(){this.datatable.destroy()}},{key:"deleteEpisode",value:function(t){var e=this;this.dialog.open($.a,{title:"Delete Episode",body:"Are you sure you want to delete this episode?",ok:"Delete"}).afterClosed().subscribe((function(a){a&&e.store.dispatch(new b.j(t)).subscribe((function(){e.toast.open(k.a.EPISODE_DELETE_SUCCESS)}))}))}},{key:"openCrupdateEpisodeModal",value:function(t){this.dialog.open(Dt,{episode:t,season:this.season},{panelClass:"crupdate-episode-modal-container"})}}]),t}()).\u0275fac=function(t){return new(t||Ot)(u.Qb(l.g),u.Qb(M.a),u.Qb(I.b),u.Qb(c.a),u.Qb(it.a))},Ot.\u0275cmp=u.Kb({type:Ot,selectors:[["episodes-panel"]],inputs:{season:"season"},features:[u.Cb([it.a]),u.Bb],decls:19,vars:7,consts:[["pluralResourceName","episodes"],["leftContent",""],["mat-raised-button","","color","accent","trans","",3,"click"],[1,"material-table"],["table-sort-header","","trans",""],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"column-with-image"],["size","small",3,"src","alt"],[1,"edit-column"],["type","button","mat-icon-button","",3,"click"],["svgIcon","edit"],["svgIcon","close"],["primary-text","","trans",""],["secondary-text","","trans",""]],template:function(t,e){1&t&&(u.Wb(0,"datatable-header",0),u.Ub(1,1),u.Wb(2,"button",2),u.dc("click",(function(){return e.openCrupdateEpisodeModal()})),u.Lc(3,"Add Episode"),u.Vb(),u.Tb(),u.Vb(),u.Wb(4,"table",3),u.Wb(5,"thead"),u.Wb(6,"tr"),u.Wb(7,"th",4),u.Lc(8,"Name"),u.Vb(),u.Wb(9,"th",4),u.Lc(10,"Number"),u.Vb(),u.Wb(11,"th",4),u.Lc(12,"Release Date"),u.Vb(),u.Rb(13,"th"),u.Vb(),u.Vb(),u.Wb(14,"tbody"),u.Jc(15,wt,16,7,"tr",5),u.ic(16,"async"),u.Vb(),u.Vb(),u.Jc(17,Lt,5,0,"no-results-message",6),u.ic(18,"async")),2&t&&(u.Db(15),u.pc("ngForOf",u.jc(16,3,e.datatable.data$))("ngForTrackBy",e.trackByFn),u.Db(2),u.pc("ngIf",!u.jc(18,5,e.datatable.data$).length))},directives:[rt.a,L.b,m.a,ct.a,o.s,o.t,w.a,S.a,st.a],pipes:[o.b,It.a],styles:["episodes-panel{display:block}episodes-panel .table-header{display:flex;align-items:center;margin-bottom:15px}episodes-panel .table-header .input-container{max-width:300px;margin-left:auto;position:relative}episodes-panel .table-header .input-container .mat-icon{position:absolute;top:11px;right:8px}episodes-panel no-results-message{margin-top:50px}"],encapsulation:2,changeDetection:0}),Ot);function Pt(t,e){if(1&t&&(u.Wb(0,"mat-tab-group",8),u.Wb(1,"mat-tab",9),u.ic(2,"trans"),u.Rb(3,"episodes-panel",10),u.Vb(),u.Wb(4,"mat-tab",9),u.ic(5,"trans"),u.Rb(6,"credits-panel",11),u.Vb(),u.Wb(7,"mat-tab",9),u.ic(8,"trans"),u.Rb(9,"credits-panel",12),u.Vb(),u.Vb()),2&t){var a=u.hc().$implicit;u.Db(1),u.pc("label",u.jc(2,6,"Episodes")),u.Db(2),u.pc("season",a),u.Db(1),u.pc("label",u.jc(5,8,"Regular Cast")),u.Db(2),u.pc("mediaItem",a),u.Db(1),u.pc("label",u.jc(8,10,"Regular Crew")),u.Db(2),u.pc("mediaItem",a)}}function Et(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-expansion-panel",4),u.ic(1,"async"),u.Wb(2,"mat-expansion-panel-header"),u.Wb(3,"mat-panel-title"),u.Wb(4,"span",5),u.Lc(5,"Season"),u.Vb(),u.Lc(6," \xa0 "),u.Wb(7,"span"),u.Lc(8),u.Vb(),u.Vb(),u.Vb(),u.Jc(9,Pt,10,12,"ng-template",6),u.Wb(10,"mat-action-row"),u.Wb(11,"button",7),u.dc("click",(function(){u.Ac(a);var t=e.$implicit;return u.hc(2).maybeDeleteSeason(t)})),u.Lc(12,"Delete"),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit,i=u.hc(2);u.pc("expanded",u.jc(1,3,i.activeSeason$)===n.number)("ngClass","season-"+n.number+"-panel"),u.Db(8),u.Mc(n.number)}}function Tt(t,e){1&t&&(u.Wb(0,"no-results-message"),u.Wb(1,"span",13),u.Lc(2,"Nothing to Display."),u.Vb(),u.Wb(3,"span",14),u.Lc(4,"This series does not have any seasons yet."),u.Vb(),u.Vb())}function _t(t,e){if(1&t){var a=u.Xb();u.Ub(0),u.Wb(1,"div",1),u.Wb(2,"button",2),u.dc("click",(function(){return u.Ac(a),u.hc().addSeason()})),u.ic(3,"async"),u.Lc(4,"Add Season"),u.Vb(),u.Vb(),u.Wb(5,"mat-accordion"),u.Jc(6,Et,13,5,"mat-expansion-panel",3),u.Vb(),u.Jc(7,Tt,5,0,"no-results-message",0),u.Tb()}if(2&t){var n=e.ngIf,i=u.hc();u.Db(2),u.pc("disabled",u.jc(3,4,i.loading$)),u.Db(4),u.pc("ngForOf",n)("ngForTrackBy",i.trackByFn),u.Db(1),u.pc("ngIf",!n.length)}}var jt,Rt=((jt=function(){function t(e,n,i,r,o){a(this,t),this.store=e,this.modal=n,this.toast=i,this.route=r,this.el=o,this.activeSeason$=new p.a(1)}return i(t,[{key:"ngOnInit",value:function(){this.activeSeason$.next(+this.route.snapshot.params.seasonNumber||1)}},{key:"ngAfterViewInit",value:function(){var t=this;setTimeout((function(){var e;t.activeSeason$.value>1&&(null===(e=t.el.nativeElement.querySelector(".season-".concat(t.activeSeason$.value,"-panel")))||void 0===e||e.scrollIntoView({behavior:"smooth",block:"start",inline:"start"}))}))}},{key:"addSeason",value:function(){var t=this;this.store.dispatch(new b.i).subscribe((function(){t.toast.open(k.a.SEASON_CREATE_SUCCESS)}))}},{key:"maybeDeleteSeason",value:function(t){var e=this;this.modal.open($.a,{title:"Delete Season",body:"Are you sure you want to delete this season?",bodyBold:"This will also delete all episodes attached to this season.",ok:"Delete"}).afterClosed().subscribe((function(a){a&&e.store.dispatch(new b.l(t)).subscribe((function(){e.toast.open(k.a.SEASON_DELETE_SUCCESS)}))}))}},{key:"trackByFn",value:function(t,e){return e.id}}]),t}()).\u0275fac=function(t){return new(t||jt)(u.Qb(l.g),u.Qb(M.a),u.Qb(I.b),u.Qb(c.a),u.Qb(u.m))},jt.\u0275cmp=u.Kb({type:jt,selectors:[["seasons-panel"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"header"],["type","button","mat-raised-button","","color","accent",3,"disabled","click"],["class","mat-elevation-z0",3,"expanded","ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"mat-elevation-z0",3,"expanded","ngClass"],["trans",""],["matExpansionPanelContent",""],["type","button","mat-button","","trans","",3,"click"],["animationDuration","0ms","color","accent"],[3,"label"],[3,"season"],["type","cast",3,"mediaItem"],["type","crew",3,"mediaItem"],["primary-text","","trans",""],["secondary-text","","trans",""]],template:function(t,e){1&t&&(u.Jc(0,_t,8,6,"ng-container",0),u.ic(1,"async")),2&t&&u.pc("ngIf",u.jc(1,1,e.seasons$))},directives:[o.t,L.b,A.a,o.s,A.c,o.q,A.f,A.g,m.a,A.e,A.d,N.c,N.a,St,Vt,st.a],pipes:[o.b,E.a],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     datatable-header{height:auto}.header[_ngcontent-%COMP%]{margin-bottom:20px}.mat-expansion-panel[_ngcontent-%COMP%]{border:1px solid var(--be-divider-default);border-radius:4px;margin-bottom:10px}.mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%]{font-weight:500;font-size:1.5rem}"],changeDetection:0}),Object(s.b)([Object(l.d)(d.a.seasons)],jt.prototype,"seasons$",void 0),Object(s.b)([Object(l.d)(d.a.loading)],jt.prototype,"loading$",void 0),jt),$t=r("35We"),Mt=r("vxfF");function At(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",4),u.dc("cdkDropListDropped",(function(){return u.Ac(a),u.hc().dropListDropped()})),u.Wb(1,"media-image",7),u.dc("cdkDragMoved",(function(t){return u.Ac(a),u.hc().dragMoved(t)})),u.Wb(2,"button",8),u.dc("click",(function(){u.Ac(a);var t=e.$implicit;return u.hc().deleteImage(t)})),u.Rb(3,"mat-icon",9),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit,i=u.hc();u.pc("cdkDropListEnterPredicate",i.dropListEnterPredicate),u.Db(1),u.pc("src",n.url)}}var Nt,Jt=((Nt=function(){function t(e,n,i,r){var o=this;a(this,t),this.images=e,this.store=n,this.toast=i,this.viewportRuler=r,this.dropListEnterPredicate=function(t,e){if(e===o.placeholder)return!0;if(e!==o.activeContainer)return!1;var a=o.placeholder.element.nativeElement,n=t.dropContainer.element.nativeElement,i=e.element.nativeElement,r=Ft(i.parentElement.children,o.source?a:n),c=Ft(i.parentElement.children,i);return o.source||(o.sourceIndex=r,o.source=t.dropContainer,a.style.width=n.clientWidth+"px",a.style.height=n.clientHeight+"px",n.parentElement.removeChild(n)),o.targetIndex=c,o.target=e,a.style.display="",i.parentElement.insertBefore(a,c>r?i.nextSibling:i),o.placeholder._dropListRef.enter(t._dragRef,t.element.nativeElement.offsetLeft,t.element.nativeElement.offsetTop),!1}}return i(t,[{key:"uploadImage",value:function(){var t=this;Object(v.a)({types:[y.a.image]}).then((function(e){var a={modelId:t.store.selectSnapshot(d.a.title).id};t.images.create(e[0],a).subscribe((function(e){t.store.dispatch(new b.b(e.image)).subscribe((function(){t.toast.open(k.a.IMAGE_CREATE_SUCCESS)}))}))}))}},{key:"deleteImage",value:function(t){var e=this;this.store.dispatch(new b.k(t)).subscribe((function(){e.toast.open(k.a.IMAGE_DELETE_SUCCESS)}))}},{key:"dragMoved",value:function(t){var e=this,a=this.getPointerPositionOnPage(t.event);this.listGroup._items.forEach((function(t){(function(t,e,a){var n=t.element.nativeElement.getBoundingClientRect(),i=n.top,r=n.bottom,o=n.left,c=n.right;return a>=i&&a<=r&&e>=o&&e<=c})(t,a.x,a.y)&&(e.activeContainer=t)}))}},{key:"dropListDropped",value:function(){if(this.target){var t=this.placeholder.element.nativeElement,e=t.parentElement;t.style.display="none",e.removeChild(t),e.appendChild(t),e.insertBefore(this.source.element.nativeElement,e.children[this.sourceIndex]),this.target=null,this.source=null,this.sourceIndex!==this.targetIndex&&this.store.dispatch(new b.f(this.sourceIndex,this.targetIndex))}}},{key:"getPointerPositionOnPage",value:function(t){var e=function(t){return t.type.startsWith("touch")}(t)?t.touches[0]||t.changedTouches[0]:t,a=this.viewportRuler.getViewportScrollPosition();return{x:e.pageX-a.left,y:e.pageY-a.top}}}]),t}()).\u0275fac=function(t){return new(t||Nt)(u.Qb($t.a),u.Qb(l.g),u.Qb(I.b),u.Qb(Mt.e))},Nt.\u0275cmp=u.Kb({type:Nt,selectors:[["images-panel"]],viewQuery:function(t,e){var a;1&t&&(u.Sc(ot.e,!0),u.Sc(ot.d,!0)),2&t&&(u.wc(a=u.ec())&&(e.listGroup=a.first),u.wc(a=u.ec())&&(e.placeholder=a.first))},features:[u.Cb([h.a])],decls:9,vars:4,consts:[["mat-raised-button","","color","accent",3,"click"],["svgIcon","add"],["trans",""],["cdkDropListGroup",""],["cdkDropList","",3,"cdkDropListEnterPredicate","cdkDropListDropped"],[1,"images-grid"],["cdkDropList","",3,"cdkDropListEnterPredicate","cdkDropListDropped",4,"ngFor","ngForOf"],["cdkDrag","","size","medium","mode","landscape",1,"images-panel-media-image",3,"src","cdkDragMoved"],["mat-mini-fab","","color","warn",3,"click"],["svgIcon","delete"]],template:function(t,e){1&t&&(u.Wb(0,"button",0),u.dc("click",(function(){return e.uploadImage()})),u.Rb(1,"mat-icon",1),u.Wb(2,"span",2),u.Lc(3,"Upload Image"),u.Vb(),u.Vb(),u.Wb(4,"div",3),u.Wb(5,"div",4),u.dc("cdkDropListDropped",(function(){return e.dropListDropped()})),u.Vb(),u.Wb(6,"div",5),u.Jc(7,At,4,2,"div",6),u.ic(8,"async"),u.Vb(),u.Vb()),2&t&&(u.Db(5),u.pc("cdkDropListEnterPredicate",e.dropListEnterPredicate),u.Db(2),u.pc("ngForOf",u.jc(8,2,e.images$)))},directives:[L.b,S.a,m.a,ot.e,ot.d,o.s,w.a,ot.a],pipes:[o.b],styles:[".mat-raised-button[_ngcontent-%COMP%]{display:block;margin-bottom:25px}.images-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);grid-auto-rows:1fr;grid-gap:15px;overflow:hidden}media-image[_ngcontent-%COMP%]{display:block;box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12);border-radius:4px;overflow:hidden;position:relative;cursor:move;transition:box-shadow .2s cubic-bezier(0,0,.2,1)}media-image[_ngcontent-%COMP%]:active{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12);opacity:.6}.mat-mini-fab[_ngcontent-%COMP%]{position:absolute;bottom:8px;right:8px}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.3}.cdk-drag-preview[_ngcontent-%COMP%]{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}"],changeDetection:0}),Object(s.b)([Object(l.d)(d.a.images)],Nt.prototype,"images$",void 0),Nt);function Ft(t,e){return Array.prototype.indexOf.call(t,e)}var Qt=r("SRuq"),Ut=r("WAq7"),zt=r("CZpq"),qt=r("A5z7");function Gt(t,e){if(1&t){var a=u.Xb();u.Wb(0,"form",9),u.dc("ngSubmit",(function(){u.Ac(a);var t=u.hc();return t.selectTagsFromString(t.formControl.value)})),u.Wb(1,"div",10),u.Rb(2,"input",11),u.Wb(3,"button",12),u.Lc(4,"Add"),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc(),i=u.xc(8);u.Db(2),u.pc("matAutocomplete",i)("formControl",n.formControl)}}var Ht=function(t){return{tagName:t}};function Xt(t,e){if(1&t&&(u.Wb(0,"p",13),u.Lc(1,"Separate :tagName with comma."),u.Vb()),2&t){var a=u.hc();u.pc("transValues",u.tc(1,Ht,a.pluralName))}}function Bt(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-chip",14),u.dc("removed",(function(){u.Ac(a);var t=e.$implicit;return u.hc().deselectTag(t)})),u.Wb(1,"span"),u.Lc(2),u.Vb(),u.Rb(3,"mat-icon",15),u.Vb()}if(2&t){var n=e.$implicit,i=u.hc();u.pc("removable",!i.readonly),u.Db(2),u.Mc(n)}}function Kt(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",20),u.dc("click",(function(){u.Ac(a);var t=e.$implicit;return u.hc(2).selectTags([t.name])})),u.Lc(1),u.Vb()}if(2&t){var n=e.$implicit;u.Db(1),u.Mc(n.display_name)}}function Yt(t,e){if(1&t&&(u.Wb(0,"div",16),u.Wb(1,"p",17),u.Lc(2,"Choose from existing :tagName:"),u.Vb(),u.Wb(3,"div",18),u.Jc(4,Kt,2,1,"div",19),u.ic(5,"async"),u.Vb(),u.Vb()),2&t){var a=u.hc();u.Db(1),u.pc("transValues",u.tc(4,Ht,a.pluralName)),u.Db(3),u.pc("ngForOf",u.jc(5,2,a.existingTags$))}}function Zt(t,e){if(1&t&&(u.Wb(0,"mat-option",21),u.Lc(1),u.Vb()),2&t){var a=e.$implicit;u.pc("value",a.name),u.Db(1),u.Mc(a.display_name)}}var te,ee,ae=((te=function(){function e(t){a(this,e),this.tagService=t,this.readonly=!1,this.pluralName="tags",this.formControl=new g.i,this.selectedTags$=new p.a([]),this.existingTags$=new p.a([]),this.suggestedTags$=new p.a([])}return i(e,[{key:"ngOnInit",value:function(){var t=this;this.tagService.index({perPage:15,type:this.tagType}).subscribe((function(e){t.existingTags$.next(e.pagination.data.filter((function(t){return"status"!==t.type})))})),this.formControl.valueChanges.subscribe((function(e){var a=e?t.existingTags$.value.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())})):[];t.suggestedTags$.next(a)}))}},{key:"writeValue",value:function(t){this.selectTags(t,{skipPropagate:!0,override:!0})}},{key:"registerOnChange",value:function(t){this.propagateChange=t}},{key:"registerOnTouched",value:function(){}},{key:"selectTags",value:function(e){var a=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(e||[]).map((function(t){return t.trim()})).filter((function(t){return!a.selectedTags$.value.includes(t)}));n.override?this.selectedTags$.next(i):i.length&&this.selectedTags$.next([].concat(t(this.selectedTags$.value),t(i))),this.formControl.reset(),n.skipPropagate||this.propagateChange(this.selectedTags$.value)}},{key:"deselectTag",value:function(t){var e=this.selectedTags$.value.slice();e.splice(e.indexOf(t),1),this.selectedTags$.next(e),this.propagateChange(this.selectedTags$.value)}},{key:"selectTagsFromString",value:function(t){var e=t.split(",").map((function(t){return Object(Ut.a)(t)}));this.selectTags(e)}}]),e}()).\u0275fac=function(t){return new(t||te)(u.Qb(zt.a))},te.\u0275cmp=u.Kb({type:te,selectors:[["tags-manager"]],inputs:{readonly:"readonly",tagType:"tagType",pluralName:"pluralName"},features:[u.Cb([{provide:g.s,useExisting:te,multi:!0}])],decls:11,vars:10,consts:[["class","input-container","ngNativeValidate","",3,"ngSubmit",4,"ngIf"],["class","main-info","trans","",3,"transValues",4,"ngIf"],[1,"selected-tags"],[3,"selectable"],[3,"removable","removed",4,"ngFor","ngForOf"],["class","existing-tags",4,"ngIf"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["ngNativeValidate","",1,"input-container",3,"ngSubmit"],[1,"input-with-action"],["type","text","required","",1,"tags-string-input",3,"matAutocomplete","formControl"],["type","submit","mat-flat-button","","color","accent","trans","",1,"add-tags-button"],["trans","",1,"main-info",3,"transValues"],[3,"removable","removed"],["svgIcon","cancel","matChipRemove",""],[1,"existing-tags"],["trans","",3,"transValues"],[1,"existing-tags-list"],["class","existing-tag-name",3,"click",4,"ngFor","ngForOf"],[1,"existing-tag-name",3,"click"],[3,"value"]],template:function(t,e){1&t&&(u.Jc(0,Gt,5,2,"form",0),u.Jc(1,Xt,2,3,"p",1),u.Wb(2,"div",2),u.Wb(3,"mat-chip-list",3),u.Jc(4,Bt,4,2,"mat-chip",4),u.ic(5,"async"),u.Vb(),u.Vb(),u.Jc(6,Yt,6,6,"div",5),u.Wb(7,"mat-autocomplete",6,7),u.dc("optionSelected",(function(t){return e.selectTags([t.option.value])})),u.Jc(9,Zt,2,2,"mat-option",8),u.ic(10,"async"),u.Vb()),2&t&&(u.pc("ngIf",!e.readonly),u.Db(1),u.pc("ngIf",!e.readonly),u.Db(2),u.pc("selectable",!1),u.Db(1),u.pc("ngForOf",u.jc(5,6,e.selectedTags$)),u.Db(2),u.pc("ngIf",!e.readonly),u.Db(3),u.pc("ngForOf",u.jc(10,8,e.suggestedTags$)))},directives:[o.t,qt.c,o.s,G.a,g.v,g.w,G.c,g.d,g.F,g.u,g.j,L.b,m.a,qt.a,S.a,qt.d,H.l],pipes:[o.b],styles:["[_nghost-%COMP%]{display:block}.selected-tag[_ngcontent-%COMP%]{margin:0 10px 10px 0;display:inline-block}.main-info[_ngcontent-%COMP%]{margin-top:5px;font-size:1.3rem}.existing-tags[_ngcontent-%COMP%]{margin-top:25px}.existing-tags[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:5px;font-size:1.3rem;color:var(--be-secondary-text)}.existing-tags-list[_ngcontent-%COMP%]{border:1px solid var(--be-divider-default);padding:8px;height:78px;overflow:auto}.existing-tag-name[_ngcontent-%COMP%]{display:inline-block;margin-right:6px;color:var(--be-link);text-decoration:underline;font-size:1.2rem;cursor:pointer}"],changeDetection:0}),te),ne=function(t){return{tagName:t}},ie=((ee=function(){function t(e,n){a(this,t),this.dialogRef=e,this.data=n,this.selectedTagsControl=new g.i,this.pluralName=this.data.pluralName||"tags"}return i(t,[{key:"close",value:function(){this.dialogRef.close()}},{key:"confirm",value:function(){this.dialogRef.close(this.selectedTagsControl.value)}},{key:"noTagsSelected",value:function(){var t;return!(null===(t=this.selectedTagsControl.value)||void 0===t?void 0:t.length)}}]),t}()).\u0275fac=function(t){return new(t||ee)(u.Qb(J.h),u.Qb(J.a))},ee.\u0275cmp=u.Kb({type:ee,selectors:[["tag-manager-modal"]],decls:12,vars:10,consts:[[1,"modal-header"],["mat-dialog-title","","trans","",3,"transValues"],["type","button","mat-icon-button","","tabindex","-1",1,"close-button",3,"click"],["svgIcon","close"],[3,"tagType","pluralName","formControl"],["type","button","mat-button","","trans","",1,"cancel-button",3,"click"],["type","button","mat-raised-button","","color","accent","trans","",1,"submit-button",3,"disabled","transValues","click"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"h2",1),u.Lc(2,"Select :tagName"),u.Vb(),u.Wb(3,"button",2),u.dc("click",(function(){return e.close()})),u.Rb(4,"mat-icon",3),u.Vb(),u.Vb(),u.Wb(5,"mat-dialog-content"),u.Rb(6,"tags-manager",4),u.Vb(),u.Wb(7,"mat-dialog-actions"),u.Wb(8,"button",5),u.dc("click",(function(){return e.close()})),u.Lc(9,"Cancel"),u.Vb(),u.Wb(10,"button",6),u.dc("click",(function(){return e.confirm()})),u.Lc(11,"Merge :tagName"),u.Vb(),u.Vb()),2&t&&(u.Db(1),u.pc("transValues",u.tc(6,ne,e.pluralName)),u.Db(5),u.pc("tagType",e.data.tagType)("pluralName",e.pluralName)("formControl",e.selectedTagsControl),u.Db(4),u.pc("disabled",e.noTagsSelected())("transValues",u.tc(8,ne,e.pluralName)))},directives:[J.i,m.a,L.b,S.a,J.f,ae,g.u,g.j,J.c],styles:["[_nghost-%COMP%]{display:block;width:400px;max-width:100%}.mat-dialog-title[_ngcontent-%COMP%], .submit-button[_ngcontent-%COMP%]{text-transform:capitalize}"],changeDetection:0}),ee);function re(t,e){if(1&t){var a=u.Xb();u.Wb(0,"tr"),u.Wb(1,"td"),u.Lc(2),u.Vb(),u.Wb(3,"td"),u.Lc(4),u.Vb(),u.Wb(5,"td",5),u.Wb(6,"button",6),u.dc("click",(function(){u.Ac(a);var t=e.$implicit;return u.hc().detachTag(t)})),u.Rb(7,"mat-icon",7),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit;u.Db(2),u.Mc(n.name),u.Db(2),u.Mc(n.display_name||"-")}}function oe(t,e){1&t&&(u.Wb(0,"no-results-message",8),u.Wb(1,"span",9),u.Lc(2,"Nothing to display"),u.Vb(),u.Vb())}var ce,se=((ce=function(){function t(e,n,i,r){a(this,t),this.store=e,this.modal=n,this.toast=i,this.datatable=r}return i(t,[{key:"ngOnInit",value:function(){var t=this;this.datatable.init(),this.getTagObservable().subscribe((function(e){t.datatable.data=e||[]}))}},{key:"ngOnDestroy",value:function(){this.datatable.destroy()}},{key:"openTagManagerModal",value:function(){var t=this;this.modal.open(ie,{tagType:this.type,pluralName:"production_country"===this.type?"countries":this.type+"s"}).beforeClosed().subscribe((function(e){e&&e.length&&t.store.dispatch(new b.d(e,t.type))}))}},{key:"detachTag",value:function(t){var e=this;this.store.dispatch(new b.n(t)).subscribe((function(){e.toast.open(k.a.TAG_DETACH_SUCCESS)}))}},{key:"getTagObservable",value:function(){return this.store.select("keyword"===this.type?d.a.keywords:"genre"===this.type?d.a.genres:d.a.countries)}}]),t}()).\u0275fac=function(t){return new(t||ce)(u.Qb(l.g),u.Qb(M.a),u.Qb(I.b),u.Qb(it.a))},ce.\u0275cmp=u.Kb({type:ce,selectors:[["tags-panel"]],inputs:{type:"type",displayType:"displayType"},features:[u.Cb([it.a])],decls:18,vars:12,consts:[["mat-raised-button","","color","accent","leftContent","",3,"click"],[1,"material-table"],["table-sort-header","","trans",""],[4,"ngFor","ngForOf"],["svgImage","folder.svg",4,"ngIf"],[1,"edit-column"],["mat-icon-button","",3,"click"],["svgIcon","close"],["svgImage","folder.svg"],["primary-text","","trans",""]],template:function(t,e){1&t&&(u.Wb(0,"datatable-header"),u.Wb(1,"button",0),u.dc("click",(function(){return e.openTagManagerModal()})),u.Lc(2),u.ic(3,"trans"),u.ic(4,"trans"),u.Vb(),u.Vb(),u.Wb(5,"table",1),u.Wb(6,"thead"),u.Wb(7,"tr"),u.Wb(8,"th",2),u.Lc(9,"Name"),u.Vb(),u.Wb(10,"th",2),u.Lc(11,"Display Name"),u.Vb(),u.Rb(12,"th"),u.Vb(),u.Vb(),u.Wb(13,"tbody"),u.Jc(14,re,8,2,"tr",3),u.ic(15,"async"),u.Vb(),u.Vb(),u.Jc(16,oe,3,0,"no-results-message",4),u.ic(17,"async")),2&t&&(u.Db(2),u.Oc(" ",u.jc(3,4,"Add")," ",u.jc(4,6,e.displayType||e.type+"s")," "),u.Db(12),u.pc("ngForOf",u.jc(15,8,e.datatable.data$)),u.Db(2),u.pc("ngIf",!u.jc(17,10,e.datatable.data$).length))},directives:[rt.a,L.b,ct.a,m.a,o.s,o.t,S.a,st.a],pipes:[E.a,o.b],styles:["[_nghost-%COMP%]{padding:0}"],changeDetection:0}),ce),le=r("/be1");function be(t,e){1&t&&u.Rb(0,"primary-facts-panel",15)}function de(t,e){1&t&&u.Rb(0,"seasons-panel",15)}function pe(t,e){1&t&&u.Rb(0,"images-panel",15)}function ue(t,e){if(1&t&&u.Rb(0,"video-index",16),2&t){var a=u.hc(2);u.pc("title",a.title)}}function me(t,e){if(1&t&&u.Rb(0,"credits-panel",17),2&t){var a=u.hc(2);u.pc("mediaItem",a.title)}}function fe(t,e){if(1&t&&u.Rb(0,"credits-panel",18),2&t){var a=u.hc(2);u.pc("mediaItem",a.title)}}function ge(t,e){1&t&&u.Rb(0,"tags-panel",19)}function he(t,e){1&t&&u.Rb(0,"tags-panel",20)}function ve(t,e){1&t&&u.Rb(0,"tags-panel",21)}function ye(t,e){if(1&t&&u.Rb(0,"reviews-index",16),2&t){var a=u.hc(2);u.pc("title",a.title)}}function Ve(t,e){1&t&&(u.Wb(0,"p",22),u.Lc(1,'Save from "Primary Facts" panel in order to enable other menu items.'),u.Vb())}function xe(t,e){if(1&t){var a=u.Xb();u.Ub(0),u.Jc(1,be,1,0,"primary-facts-panel",1),u.Jc(2,de,1,0,"seasons-panel",1),u.Jc(3,pe,1,0,"images-panel",1),u.Jc(4,ue,1,1,"video-index",2),u.Jc(5,me,1,1,"credits-panel",3),u.Jc(6,fe,1,1,"credits-panel",4),u.Jc(7,ge,1,0,"tags-panel",5),u.Jc(8,he,1,0,"tags-panel",6),u.Jc(9,ve,1,0,"tags-panel",7),u.Jc(10,ye,1,1,"reviews-index",2),u.Wb(11,"aside",8),u.Wb(12,"div",9),u.Lc(13,"Edit"),u.Vb(),u.Wb(14,"div",10),u.Wb(15,"button",11),u.dc("click",(function(){return u.Ac(a),u.hc().openPanel("primaryFacts")})),u.Lc(16,"Primary Facts"),u.Vb(),u.Wb(17,"button",12),u.dc("click",(function(){return u.Ac(a),u.hc().openPanel("seasons")})),u.Lc(18,"Seasons"),u.Vb(),u.Wb(19,"button",12),u.dc("click",(function(){return u.Ac(a),u.hc().openPanel("images")})),u.Lc(20,"Images"),u.Vb(),u.Wb(21,"button",12),u.dc("click",(function(){return u.Ac(a),u.hc().openPanel("videos")})),u.Lc(22,"Videos"),u.Vb(),u.Wb(23,"button",12),u.dc("click",(function(){return u.Ac(a),u.hc().openPanel("cast")})),u.Lc(24,"Cast"),u.Vb(),u.Wb(25,"button",12),u.dc("click",(function(){return u.Ac(a),u.hc().openPanel("crew")})),u.Lc(26,"Crew"),u.Vb(),u.Wb(27,"button",12),u.dc("click",(function(){return u.Ac(a),u.hc().openPanel("genres")})),u.Lc(28,"Genres"),u.Vb(),u.Wb(29,"button",12),u.dc("click",(function(){return u.Ac(a),u.hc().openPanel("keywords")})),u.Lc(30,"Keywords"),u.Vb(),u.Wb(31,"button",12),u.dc("click",(function(){return u.Ac(a),u.hc().openPanel("countries")})),u.Lc(32,"Countries"),u.Vb(),u.Wb(33,"button",12),u.dc("click",(function(){return u.Ac(a),u.hc().openPanel("reviews")})),u.Lc(34,"Reviews"),u.Vb(),u.Vb(),u.Jc(35,Ve,2,0,"p",13),u.Vb(),u.Rb(36,"loading-indicator",14),u.ic(37,"async"),u.Tb()}if(2&t){var n=e.ngIf,i=u.hc();u.Db(1),u.pc("ngIf","primaryFacts"===n),u.Db(1),u.pc("ngIf","seasons"===n),u.Db(1),u.pc("ngIf","images"===n),u.Db(1),u.pc("ngIf","videos"===n),u.Db(1),u.pc("ngIf","cast"===n),u.Db(1),u.pc("ngIf","crew"===n),u.Db(1),u.pc("ngIf","keywords"===n),u.Db(1),u.pc("ngIf","genres"===n),u.Db(1),u.pc("ngIf","countries"===n),u.Db(1),u.pc("ngIf","reviews"===n),u.Db(5),u.Hb("active","primaryFacts"===n),u.Db(2),u.Hb("active","seasons"===n),u.pc("disabled",!i.titleCreated()),u.Db(2),u.Hb("active","images"===n),u.pc("disabled",!i.titleCreated()),u.Db(2),u.Hb("active","videos"===n),u.pc("disabled",!i.titleCreated()),u.Db(2),u.Hb("active","cast"===n),u.pc("disabled",!i.titleCreated()),u.Db(2),u.Hb("active","crew"===n),u.pc("disabled",!i.titleCreated()),u.Db(2),u.Hb("active","genres"===n),u.pc("disabled",!i.titleCreated()),u.Db(2),u.Hb("active","keywords"===n),u.pc("disabled",!i.titleCreated()),u.Db(2),u.Hb("active","countries"===n),u.pc("disabled",!i.titleCreated()),u.Db(2),u.Hb("active","reviews"===n),u.pc("disabled",!i.titleCreated()),u.Db(2),u.pc("ngIf",!i.titleCreated()),u.Db(1),u.pc("isVisible",u.jc(37,41,i.loading$))}}var We,ke,Ce,De,Ie=((We=function(){function t(e,n,i){a(this,t),this.store=e,this.router=n,this.route=i,this.activePanel$=new p.a("primaryFacts")}return i(t,[{key:"ngOnInit",value:function(){var t=this;this.route.data.subscribe((function(e){var a,n;t.store.dispatch(new b.o(null===(a=e.api)||void 0===a?void 0:a.title)),t.title=null===(n=e.api)||void 0===n?void 0:n.title})),this.route.queryParams.subscribe((function(e){t.activePanel$.next(e.active||"primaryFacts")})),this.route.snapshot.params.seasonNumber&&this.activePanel$.next("seasons")}},{key:"ngOnDestroy",value:function(){this.store.dispatch(new b.s)}},{key:"openPanel",value:function(t){this.router.navigate([],{queryParams:{active:t}})}},{key:"titleCreated",value:function(){return!!this.store.selectSnapshot(d.a.title).id}}]),t}()).\u0275fac=function(t){return new(t||We)(u.Qb(l.g),u.Qb(c.d),u.Qb(c.a))},We.\u0275cmp=u.Kb({type:We,selectors:[["crupdate-title"]],decls:2,vars:3,consts:[[4,"ngIf"],["class","material-panel crupdate-title-panel",4,"ngIf"],["class","material-panel crupdate-title-panel",3,"title",4,"ngIf"],["class","material-panel crupdate-title-panel","type","cast",3,"mediaItem",4,"ngIf"],["class","material-panel crupdate-title-panel","type","crew",3,"mediaItem",4,"ngIf"],["class","material-panel crupdate-title-panel","type","keyword",4,"ngIf"],["class","material-panel crupdate-title-panel","type","genre",4,"ngIf"],["class","material-panel crupdate-title-panel","type","production_country","displayType","country",4,"ngIf"],[1,"sidebar","material-panel"],["trans","",1,"header"],[1,"list"],["trans","",1,"list-item","no-style",3,"click"],["trans","",1,"list-item","no-style",3,"disabled","click"],["class","message","trans","",4,"ngIf"],[1,"overlay",3,"isVisible"],[1,"material-panel","crupdate-title-panel"],[1,"material-panel","crupdate-title-panel",3,"title"],["type","cast",1,"material-panel","crupdate-title-panel",3,"mediaItem"],["type","crew",1,"material-panel","crupdate-title-panel",3,"mediaItem"],["type","keyword",1,"material-panel","crupdate-title-panel"],["type","genre",1,"material-panel","crupdate-title-panel"],["type","production_country","displayType","country",1,"material-panel","crupdate-title-panel"],["trans","",1,"message"]],template:function(t,e){1&t&&(u.Jc(0,xe,38,43,"ng-container",0),u.ic(1,"async")),2&t&&u.pc("ngIf",u.jc(1,1,e.activePanel$))},directives:[o.t,m.a,f.a,R,Rt,Jt,Qt.a,Vt,se,le.a],pipes:[o.b],styles:[".be-dark-mode crupdate-title .sidebar .header{background-color:transparent;border-bottom:1px solid var(--be-divider-default)}crupdate-title{display:flex;align-items:flex-start;width:100%}crupdate-title .material-panel{flex:1 1 auto;min-height:412px}crupdate-title .material-panel .inline-container,crupdate-title .material-panel form>.input-container{margin-bottom:25px}crupdate-title video-index.material-panel{padding:0}crupdate-title data-table{border:none}crupdate-title .inline-container{display:flex}crupdate-title .inline-container .input-container{flex:1 1 auto}crupdate-title .inline-container .input-container.size-small{flex:1 1 30%}crupdate-title .inline-container .input-container:first-of-type{margin-right:15px}crupdate-title .sidebar{flex:0 0 260px;margin-left:30px;padding:0;overflow:hidden}crupdate-title .sidebar .header{background-color:var(--be-primary-default);color:var(--be-accent-contrast);padding:15px 20px;font-size:1.6rem;font-weight:500}crupdate-title .sidebar .list .list-item{display:block;width:100%;padding:10px 20px;white-space:nowrap;text-transform:capitalize}crupdate-title .sidebar .list .list-item:disabled{color:var(--be-hint-text);cursor:default}crupdate-title .sidebar .list .list-item.active{font-weight:500}crupdate-title .sidebar .list .list-item:not(:disabled):hover{cursor:pointer}crupdate-title .sidebar .message{margin:8px 20px;padding-top:8px;font-size:1.3rem;color:var(--be-secondary-text);border-top:1px solid var(--be-divider-lighter)}@media only screen and (max-width:768px){crupdate-title{display:block}crupdate-title primary-facts-panel.material-panel{border:none}crupdate-title primary-facts-panel.material-panel .poster-container{display:block}crupdate-title primary-facts-panel.material-panel .many-inputs{margin-left:0}crupdate-title primary-facts-panel.material-panel img{margin:0 auto 20px}crupdate-title .sidebar{margin:30px 20px 0}crupdate-title .inline-container{display:block}crupdate-title .inline-container .input-container:first-of-type{margin-bottom:20px}}.crupdate-title-panel .table-header,crupdate-episode-modal .table-header{display:flex;align-items:center;margin-bottom:15px}.crupdate-title-panel .table-header .mat-raised-button,crupdate-episode-modal .table-header .mat-raised-button{text-transform:capitalize}.crupdate-title-panel .table-header .input-container,crupdate-episode-modal .table-header .input-container{max-width:300px;margin-left:auto;position:relative}.crupdate-title-panel .table-header .input-container .mat-icon,crupdate-episode-modal .table-header .input-container .mat-icon{position:absolute;top:11px;right:8px}.crupdate-title-panel no-results-message,crupdate-episode-modal no-results-message{margin-top:50px;margin-bottom:50px}.crupdate-title-panel .mat-column-edit,crupdate-episode-modal .mat-column-edit{max-width:100px;color:var(--be-secondary-text)}"],encapsulation:2,changeDetection:0}),Object(s.b)([Object(l.d)(d.a.loading)],We.prototype,"loading$",void 0),We),we=r("JIr8"),Le=r("5+tZ"),Oe=r("LRne"),Se=r("EY2u"),Pe=[{path:"",component:Ie,resolve:{api:(ke=function(){function t(e,n,i){a(this,t),this.router=e,this.store=n,this.titles=i}return i(t,[{key:"resolve",value:function(t,e){var a=this;return t.params.titleId?this.titles.get(t.params.titleId,{fullCredits:!0,keywords:!0,countries:!0,seasons:!0,skipUpdating:!0,allVideos:!0}).pipe(Object(we.a)((function(){return a.router.navigate(a.fallbackUri(e)),Se.a})),Object(Le.a)((function(t){return t?Object(Oe.a)(t):(a.router.navigate(a.fallbackUri(e)),Se.a)}))):Object(Oe.a)(null)}},{key:"fallbackUri",value:function(t){return t.url.includes("admin")?["/admin/titles"]:[t.url.replace("/edit","")]}}]),t}(),ke.\u0275fac=function(t){return new(t||ke)(u.ac(c.d),u.ac(l.g),u.ac(D.a))},ke.\u0275prov=u.Mb({token:ke,factory:ke.\u0275fac,providedIn:"root"}),ke)},data:{permissions:["titles.update"]}}],Ee=((Ce=function t(){a(this,t)}).\u0275mod=u.Ob({type:Ce}),Ce.\u0275inj=u.Nb({factory:function(t){return new(t||Ce)},imports:[[c.h.forChild(Pe)],c.h]}),Ce),Te=r("6rvT"),_e=r("Iysn"),je=r("ZFTr"),Re=r("k3xQ"),$e=r("X3pI"),Me=r("NWPP"),Ae=r("1ImS"),Ne=r("CHUN"),Je=r("99o5"),Fe=((De=function t(){a(this,t)}).\u0275mod=u.Ob({type:De}),De.\u0275inj=u.Nb({factory:function(t){return new(t||De)},imports:[[o.c,Ee,Te.a,g.o,g.E,_e.a,je.a,Re.a,$e.a,Me.a,Ae.a,Ne.a,Je.a,L.c,S.b,O.b,J.g,N.g,P.c,A.b,ot.f,G.b]]}),De)}}])}();
//# sourceMappingURL=3-es5.b3459359228682d8325f.js.map